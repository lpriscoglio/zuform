(self.webpackChunkargon_dashboard_angular=self.webpackChunkargon_dashboard_angular||[]).push([[471],{1471:(qt,It,Z)=>{"use strict";Z.r(It),Z.d(It,{AdminLayoutModule:()=>ai});var Tt=Z(529),Ct=Z(4102),mt=Z(6895),C=Z(433),t=Z(1571);let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[mt.ez]]}),n})();var V=Z(5861),tt=Z(3028),pt=Z(8739),nt=Z(6308),y=Z(7155);class dt{constructor(o){if(this.DICTIONARY_BEST_ROLES={"Dd;E":{role:"Dd;E",best_role:"Dd"},"Ds;E":{role:"Ds;E",best_role:"Ds"},"Dd;Dc":{role:"Dd;Dc",best_role:"Dc"},"Dd;Ds;Dc":{role:"Dd;Ds;Dc",best_role:"Dc"},"Dd;Ds;E":{role:"Dd;Ds;E",best_role:"Dd;Ds"},"Ds;Dc":{role:"Ds;Dc",best_role:"Dc"},"W;A":{role:"W;A",best_role:"W"},"C;T":{role:"C;T",best_role:"C"},"T;A":{role:"T;A",best_role:"T"},"W;T":{role:"W;T",best_role:"W;T"},"M;C":{role:"M;C",best_role:"M"},"E;W":{role:"E;W",best_role:"E"},"C;W;T":{role:"C;W;T",best_role:"C"},"E;C":{role:"E;C",best_role:"E"},"E;M":{role:"E;M",best_role:"E;M"},"W;T;A":{role:"W;T;A",best_role:"W;T"}},!(o&&o.id&&o.name&&o.team))throw new Error("Essential fields are missing to create a Player instance.");this.id=parseInt(o?.id)||0,this.name=o?.name||"",this.team=o?.team||"",this.ruolo_classic=o?.ruolo_classic||"",this.role_mantra=o?.role_mantra||[o.role_1_mantra,o?.role_2_mantra,o?.role_3_mantra].filter(e=>Boolean(e)).join(";"),this.best_role_mantra=this.getBestRoleValues(o?.role_mantra||[o.role_1_mantra,o?.role_2_mantra,o?.role_3_mantra].filter(e=>Boolean(e)).join(";")),this.curr_value_classic=parseInt(o?.curr_value_classic)||0,this.base_value_classic=parseInt(o?.base_value_classic)||0,this.curr_value_mantra=parseInt(o?.curr_value_mantra)||0,this.base_value_mantra=parseInt(o?.base_value_mantra)||0,this.value_classic_1000=parseInt(o?.value_classic_1000)||0,this.value_mantra_1000=parseInt(o?.value_mantra_1000)||0,this.rating=o?.rating||"",this.first_team=o?.first_team||"",this.penalty_taker=o?.penalty_taker||"",this.free_kick_taker=o?.free_kick_taker||"",this.injured=parseInt(o?.injured)||0,this.notes=o?.notes||"",this.isEdit=null!=o?.isEdit&&"false"!==o?.isEdit&&o?.isEdit,this.price=parseInt(o?.price)||0,this.team_id=parseInt(o?.team_id)||0}getDisplayName(){return`${this.name} (${this.team})`}getBestRoleValues(o){return this.DICTIONARY_BEST_ROLES[o]?this.DICTIONARY_BEST_ROLES[o].best_role:o}}var Dt=Z(1135),bt=Z(6805),vt=Z(930);let At=(()=>{class n{constructor(e){this.http=e,this.dataSubject=new Dt.X([]),this.dataTable$=this.dataSubject.asObservable(),this.initalizeStorage(),this.dataTable$.subscribe(i=>{localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(i))})}initalizeStorage(){var e=this;return(0,V.Z)(function*(){let i=e.getDataFromLocalStorage();null==i||0===i.length?(console.log("Loading from CSV"),i=yield e.loadFromCSV()):console.log("Loading from localStorage"),e.dataSubject.next(i.filter(l=>void 0!==l)),console.log("Data loaded: ",i)})()}resetDataToCSV(){var e=this;return(0,V.Z)(function*(){e.dataSubject.next(yield e.loadFromCSV())})()}resetDataToLocal(){var e=this;return(0,V.Z)(function*(){let i=e.getDataFromLocalStorage();e.dataSubject.next(i)})()}loadFromCSV(){var e=this;return(0,V.Z)(function*(){try{const i=yield function Ft(n,o){const e="object"==typeof o;return new Promise((i,l)=>{const c=new vt.Hp({next:r=>{i(r),c.unsubscribe()},error:l,complete:()=>{e?i(o.defaultValue):l(new bt.K)}});n.subscribe(c)})}(e.http.get("assets/db.csv",{responseType:"text"}));let l=[];return tt.parse(i,{complete:c=>{l=c.data.map(r=>{try{return new dt(r)}catch(p){console.error(p.message)}}),console.log("Data refreshed from CSV: ",l)},header:!0}),localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(l)),l}catch(i){return console.log(i),[]}})()}setData(e){this.dataSubject.next(e)}updateField(e,i,l){const r=this.dataSubject.value.filter(p=>void 0!==p).map(p=>p.id===e?{...p,[i]:l}:p);this.dataSubject.next(r)}saveToLocalStorage(){localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(this.dataSubject.value))}getDataFromLocalStorage(){const e=localStorage.getItem(n.LOCAL_STORAGE_KEY);if(e){const l=JSON.parse(e).map(c=>{try{return new dt(c)}catch(r){console.error(r.message)}});return console.log("Data refreshed from LocalStorage: ",l),l}return[]}}return n.LOCAL_STORAGE_KEY="ZUFORM_PLAYERS_TABLE",n.\u0275fac=function(e){return new(e||n)(t.LFG(Tt.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ot=Z(5412),ht=Z(4859);let at=(()=>{class n{constructor(e,i){this.data=e,this.dialogRef=i,this.message="Are you sure?",this.confirmButtonText="Yes",this.cancelButtonText="No",e&&(this.message=e.message||this.message,e.buttonText&&(this.confirmButtonText=e.buttonText.ok||this.confirmButtonText,this.cancelButtonText=e.buttonText.cancel||this.cancelButtonText))}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ot.WI),t.Y36(ot.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confdialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Sicuro? Perderai i dati."),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"mat-dialog-actions")(6,"button",2),t.NdJ("click",function(){return i.onNoClick()}),t._uU(7,"No"),t.qZA(),t.TgZ(8,"button",3),t._uU(9,"Si"),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(i.message),t.xp6(4),t.Q6J("mat-dialog-close",!0))},dependencies:[ot.ZT,ot.uh,ot.xY,ot.H8,ht.lW]}),n})();var w=Z(4155),s=Z(7009),a=Z(7957),u=Z(3238),m=Z(9549),f=Z(4144),b=Z(4385),x=Z(266),M=Z(782),D=Z(3546),d=Z(7084),E=Z(6709),h=Z(3848),z=Z(1572);function L(n,o){if(1&n&&(t.TgZ(0,"button",19)(1,"span",1),t._UZ(2,"i",20),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",500-e.getColumnSum()," Rimasti ")}}function _(n,o){if(1&n&&(t.TgZ(0,"button",21)(1,"span",1),t._UZ(2,"i",20),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",500-e.getColumnSum()," Rimasti ")}}function U(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Nome "),t.qZA())}function B(n,o){if(1&n&&(t.TgZ(0,"td",23)(1,"b"),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name)}}function O(n,o){if(1&n&&(t.TgZ(0,"td",24),t._uU(1," Giocatori: "),t.TgZ(2,"b"),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.getCountSum())}}function Q(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Ruolo "),t.qZA())}function P(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"button",0),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e)}}function Y(n,o){if(1&n&&(t.TgZ(0,"td",23),t.YNc(1,P,3,1,"ng-container",25),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e.role_mantra.split(";"))}}function g(n,o){1&n&&t._UZ(0,"td",24)}function A(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Prezzo "),t.qZA())}function F(n,o){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.price," ")}}function J(n,o){if(1&n&&(t.TgZ(0,"td",24),t._uU(1," Spesa: "),t.TgZ(2,"b"),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.getColumnSum())}}function I(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Squadra "),t.qZA())}function j(n,o){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.team)}}function R(n,o){1&n&&t._UZ(0,"td",24)}function N(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Rating "),t.qZA())}function et(n,o){if(1&n&&(t.TgZ(0,"button",0),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function W(n,o){if(1&n&&(t.TgZ(0,"button",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function it(n,o){if(1&n&&(t.TgZ(0,"button",21),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function rt(n,o){if(1&n&&(t.TgZ(0,"button",3),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function K(n,o){if(1&n&&(t.TgZ(0,"button",31),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function q(n,o){if(1&n&&(t.TgZ(0,"button",19),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function k(n,o){if(1&n&&(t.TgZ(0,"td",23),t.YNc(1,et,2,1,"button",26),t.YNc(2,W,2,1,"button",27),t.YNc(3,it,2,1,"button",5),t.YNc(4,rt,2,1,"button",28),t.YNc(5,K,2,1,"button",29),t.YNc(6,q,2,1,"button",4),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf","A"===e.rating),t.xp6(1),t.Q6J("ngIf","A-"===e.rating),t.xp6(1),t.Q6J("ngIf","B"===e.rating),t.xp6(1),t.Q6J("ngIf","C"===e.rating),t.xp6(1),t.Q6J("ngIf","D"===e.rating),t.xp6(1),t.Q6J("ngIf","F"===e.rating)}}function _t(n,o){1&n&&t._UZ(0,"td",24)}function S(n,o){1&n&&t._UZ(0,"tr",32)}function gt(n,o){1&n&&t._UZ(0,"tr",33)}function st(n,o){1&n&&(t.TgZ(0,"tr",34)(1,"td",35),t._uU(2,"No data with current filters"),t.qZA()())}function ft(n,o){1&n&&t._UZ(0,"tr",36)}let lt=(()=>{class n{constructor(e){this.cdr=e,this.lessDisplayedColumns=["name","role_mantra","team","price","rating"],this.data=[],this.dataSource=new y.by,this.players=[]}ngOnInit(){console.log("SubTable ",this.teamName),this.filterData()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sort.active="price",this.dataSource.sort.direction="desc",this.dataSource.sort.sortChange.emit({active:this.sort.active,direction:this.sort.direction})}filterData(){this.players=this.data.slice().filter(e=>e.team_id===this.teamId),this.dataSource.data=this.players,this.cdr.detectChanges()}ngOnChanges(e){e.data&&this.data&&this.teamId&&this.filterData()}getCountSum(){return this.players.length}getColumnSum(){return this.players.map(e=>+e.price).reduce((e,i)=>e+i,0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-subtables"]],viewQuery:function(e,i){if(1&e&&(t.Gf(pt.NW,5),t.Gf(nt.YE,5)),2&e){let l;t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first)}},inputs:{data:"data",teamId:"teamId",teamName:"teamName"},features:[t.TTD],decls:39,vars:8,consts:[["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-primary"],[1,"btn-inner--icon"],[1,"fas","fa-users"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-secondary"],["class","btn btn-icon btn-sm btn-danger","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-success","type","button","mat-button","",4,"ngIf"],["mat-table","","matSort","",1,"table","align-items-center","table-flush",3,"dataSource"],["matColumnDef","name"],["class","thead-light","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","role_mantra"],["matColumnDef","price"],["matColumnDef","team"],["matColumnDef","rating"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","mat-row","mat-footer-row","",4,"matFooterRowDef"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-danger"],[1,"fas","fa-dollar-sign"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-success"],["mat-header-cell","","mat-sort-header","",1,"thead-light"],["mat-cell",""],["mat-footer-cell",""],[4,"ngFor","ngForOf"],["class","btn btn-icon btn-sm btn-primary","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-info","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-secondary","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-warning","type","button","mat-button","",4,"ngIf"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-info"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-warning"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-footer-row","",1,"mat-row"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"button",0)(4,"span",1),t._UZ(5,"i",2),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"mat-panel-description")(8,"button",3)(9,"span",1),t._UZ(10,"i",2),t.qZA(),t._uU(11),t.qZA(),t.YNc(12,L,4,1,"button",4),t.YNc(13,_,4,1,"button",5),t.qZA()(),t.TgZ(14,"table",6),t.ynx(15,7),t.YNc(16,U,2,0,"th",8),t.YNc(17,B,3,1,"td",9),t.YNc(18,O,4,1,"td",10),t.BQk(),t.ynx(19,11),t.YNc(20,Q,2,0,"th",8),t.YNc(21,Y,2,1,"td",9),t.YNc(22,g,1,0,"td",10),t.BQk(),t.ynx(23,12),t.YNc(24,A,2,0,"th",8),t.YNc(25,F,2,1,"td",9),t.YNc(26,J,4,1,"td",10),t.BQk(),t.ynx(27,13),t.YNc(28,I,2,0,"th",8),t.YNc(29,j,2,1,"td",9),t.YNc(30,R,1,0,"td",10),t.BQk(),t.ynx(31,14),t.YNc(32,N,2,0,"th",8),t.YNc(33,k,7,6,"td",9),t.YNc(34,_t,1,0,"td",10),t.BQk(),t.YNc(35,S,1,0,"tr",15),t.YNc(36,gt,1,0,"tr",16),t.YNc(37,st,3,0,"tr",17),t.YNc(38,ft,1,0,"tr",18),t.qZA()()),2&e&&(t.xp6(6),t.hij(" ",i.teamName," "),t.xp6(5),t.hij(" ",i.getCountSum()," Giocatori "),t.xp6(1),t.Q6J("ngIf",i.getColumnSum()>450),t.xp6(1),t.Q6J("ngIf",i.getColumnSum()<=450),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(21),t.Q6J("matHeaderRowDef",i.lessDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.lessDisplayedColumns),t.xp6(2),t.Q6J("matFooterRowDef",i.lessDisplayedColumns))},dependencies:[mt.sg,mt.O5,y.BZ,y.fO,y.as,y.w1,y.Dz,y.nj,y.mD,y.Ke,y.ge,y.ev,y.yh,y.XQ,y.Gk,y.Q2,y.Ee,nt.YE,nt.nU,d.ib,d.yz,d.yK,d.u4,ht.lW],styles:[".mat-row[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%]{height:15px!important}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{padding:4px!important}.mat-table[_ngcontent-%COMP%]{font-size:8px}mat-card[_ngcontent-%COMP%]{width:100%;overflow:scroll}"]}),n})();const ct=["inputmine"],ut=["inputadder"],H=["inputprice"],yt=["inputteam"];function X(n,o){1&n&&(t.TgZ(0,"div",98),t._UZ(1,"mat-spinner"),t.qZA())}function Ut(n,o){1&n&&(t.TgZ(0,"span",32),t._UZ(1,"i",99),t._uU(2," Vista Complessiva Squadre"),t.qZA())}function wt(n,o){if(1&n&&(t.TgZ(0,"mat-accordion",100),t._UZ(1,"app-subtables",101),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("data",i.playersLoaded)("teamId",e)("teamName",i.getTeamName(e))}}function Rt(n,o){1&n&&(t.TgZ(0,"span",32),t._UZ(1,"i",102),t._uU(2," Listone - Assegnazione Giocatori"),t.qZA())}function kt(n,o){if(1&n&&(t.TgZ(0,"button",103),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.amountRemaining," ")}}function Mt(n,o){if(1&n&&(t.TgZ(0,"button",104),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.amountRemaining," ")}}function Jt(n,o){1&n&&(t.TgZ(0,"h5"),t._uU(1,"Compra altri giocatori per avere suggerimenti!"),t.qZA())}function Pt(n,o){if(1&n&&(t.TgZ(0,"button",103),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function Yt(n,o){if(1&n&&(t.TgZ(0,"button",14),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.role," ")}}function Qt(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1," , per cui dovresti comprare "),t.YNc(2,Pt,2,1,"button",105),t._uU(3," , se possibile "),t.YNc(4,Yt,2,1,"button",106),t._uU(5,". "),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.highestFormation.missingRoles),t.xp6(2),t.Q6J("ngForOf",e.highestFormation.rolesToBuy)}}function Lt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1," Hai tutti i ruoli che ti servono! "),t.qZA())}function Bt(n,o){if(1&n&&(t.TgZ(0,"h5"),t._uU(1,"Il tuo modulo migliore finora \xe8 il "),t.TgZ(2,"button",104),t._uU(3),t.qZA(),t.YNc(4,Qt,6,2,"span",15),t.YNc(5,Lt,2,0,"span",15),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",e.highestFormation.name," "),t.xp6(1),t.Q6J("ngIf",e.highestFormation.rolesToBuy.length>0),t.xp6(1),t.Q6J("ngIf",0===e.highestFormation.rolesToBuy.length)}}function jt(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function $t(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("value",e),t.xp6(1),t.hij(" ",i.getDistinctTeams()[e]," ")}}function Vt(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("value",e),t.xp6(1),t.hij(" ",i.getDistinctTeams()[e]," ")}}function Gt(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function zt(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function Wt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-select",40),t.NdJ("selectionChange",function(l){t.CHM(e);const c=t.oxw();return t.KtG(c.filterByColumnValue(l.value))}),t.YNc(1,zt,2,2,"mat-option",22),t.TgZ(2,"mat-option",47)(3,"b"),t._uU(4,"Qualsiasi"),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("formControl",e.inputrolesrc),t.xp6(1),t.Q6J("ngForOf",e.DISTINCT_ROLES)}}function Kt(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function Ht(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-select",40),t.NdJ("selectionChange",function(l){t.CHM(e);const c=t.oxw();return t.KtG(c.filterByColumnValue(l.value))}),t.YNc(1,Kt,2,2,"mat-option",22),t.TgZ(2,"mat-option",47)(3,"b"),t._uU(4,"Qualsiasi"),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("formControl",e.inputrolesrc),t.xp6(1),t.Q6J("ngForOf",e.DISTINCT_ROLES)}}function Xt(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function te(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ee(n,o){1&n&&(t.TgZ(0,"th",108),t._uU(1," Libero "),t.qZA())}function ne(n,o){1&n&&(t.TgZ(0,"button",104)(1,"span",32),t._UZ(2,"i",111),t.qZA()())}function ie(n,o){if(1&n&&(t.TgZ(0,"button",14)(1,"span",32),t._UZ(2,"i",112),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(3),t.hij(" ",i.getTeamName(e.team_id)," ")}}function oe(n,o){if(1&n&&(t.TgZ(0,"button",103)(1,"span",32),t._UZ(2,"i",113),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(3),t.hij(" ",i.getTeamName(e.team_id)," ")}}function ae(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ne,3,0,"button",13),t.YNc(2,ie,4,1,"button",110),t.YNc(3,oe,4,1,"button",12),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",0===e.team_id),t.xp6(1),t.Q6J("ngIf",1===e.team_id),t.xp6(1),t.Q6J("ngIf",0!==e.team_id&&1!==e.team_id)}}function re(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(3);t.Q6J("value",e),t.xp6(1),t.hij(" ",i.getDistinctTeams()[e]," ")}}function se(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",114)(2,"mat-label"),t._uU(3,"Squadra Mantra"),t.qZA(),t.TgZ(4,"mat-select",115),t.NdJ("ngModelChange",function(l){t.CHM(e);const c=t.oxw().$implicit;return t.KtG(c.team_id=l)}),t.YNc(5,re,2,2,"mat-option",22),t.qZA()()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(4),t.Q6J("ngModel",e.team_id),t.xp6(1),t.Q6J("ngForOf",i.getDistinctTeamsKeys())}}function le(n,o){if(1&n&&(t.TgZ(0,"td",109),t.YNc(1,ae,4,3,"div",15),t.YNc(2,se,6,2,"div",15),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function ce(n,o){1&n&&t._UZ(0,"td",116)}function ue(n,o){1&n&&(t.TgZ(0,"th",108),t._uU(1," Nome "),t.qZA())}function me(n,o){if(1&n&&(t.TgZ(0,"td",109)(1,"b"),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name)}}function pe(n,o){if(1&n&&(t.TgZ(0,"td",116),t._uU(1," Giocatori: "),t.TgZ(2,"b"),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.getCountSum())}}function de(n,o){1&n&&(t.TgZ(0,"th",108),t._uU(1," Squadra "),t.qZA())}function _e(n,o){if(1&n&&(t.TgZ(0,"td",109),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.team)}}function fe(n,o){1&n&&t._UZ(0,"td",116)}function he(n,o){1&n&&(t.TgZ(0,"th",108)(1,"span",117),t._uU(2,"Ruolo"),t.qZA()())}function ge(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"button",14),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e," ")}}function be(n,o){if(1&n&&(t.TgZ(0,"td",109),t.YNc(1,ge,3,1,"ng-container",118),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e.best_role_mantra.split(";"))}}function Te(n,o){1&n&&t._UZ(0,"td",116)}function Ce(n,o){1&n&&(t.TgZ(0,"th",119),t._uU(1," Ruolo "),t.qZA())}function ye(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"button",14),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e," ")}}function Ze(n,o){if(1&n&&(t.TgZ(0,"td",109),t.YNc(1,ye,3,1,"ng-container",118),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e.role_mantra.split(";"))}}function xe(n,o){1&n&&t._UZ(0,"td",116)}function ve(n,o){1&n&&(t.TgZ(0,"th",108),t._uU(1," Stima "),t.qZA())}function Ae(n,o){if(1&n&&(t.TgZ(0,"td",109)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw();t.xp6(2),t.hij(" ",i.getPriceEstimation(e.value_mantra_1000)," ")}}function we(n,o){1&n&&t._UZ(0,"td",116)}function Se(n,o){1&n&&(t.TgZ(0,"th",108),t._uU(1," Prezzo "),t.qZA())}function Ie(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.price," ")}}function Ne(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Only numbers are allowed. "),t.qZA())}function De(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",120)(2,"input",121,122),t.NdJ("ngModelChange",function(l){t.CHM(e);const c=t.oxw().$implicit;return t.KtG(c.price=l)}),t.qZA(),t.YNc(4,Ne,2,0,"mat-error",15),t.qZA()()}if(2&n){const e=t.MAs(3),i=t.oxw().$implicit,l=t.oxw();t.xp6(2),t.Q6J("type",l.number)("ngModel",i.price),t.xp6(2),t.Q6J("ngIf",null==e.errors?null:e.errors.pattern)}}function Ue(n,o){if(1&n&&(t.TgZ(0,"td",109),t.YNc(1,Ie,2,1,"div",15),t.YNc(2,De,5,3,"div",15),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function Fe(n,o){1&n&&t._UZ(0,"td",116)}function qe(n,o){1&n&&(t.TgZ(0,"th",108),t._uU(1," Rating "),t.qZA())}function Ee(n,o){if(1&n&&(t.TgZ(0,"button",14),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Oe(n,o){if(1&n&&(t.TgZ(0,"button",126),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Re(n,o){if(1&n&&(t.TgZ(0,"button",104),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function ke(n,o){if(1&n&&(t.TgZ(0,"button",127),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Me(n,o){if(1&n&&(t.TgZ(0,"button",128),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Je(n,o){if(1&n&&(t.TgZ(0,"button",103),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Pe(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Ee,2,1,"button",110),t.YNc(2,Oe,2,1,"button",123),t.YNc(3,Re,2,1,"button",13),t.YNc(4,ke,2,1,"button",124),t.YNc(5,Me,2,1,"button",125),t.YNc(6,Je,2,1,"button",12),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","A"===e.rating),t.xp6(1),t.Q6J("ngIf","A-"===e.rating),t.xp6(1),t.Q6J("ngIf","B"===e.rating),t.xp6(1),t.Q6J("ngIf","C"===e.rating),t.xp6(1),t.Q6J("ngIf","D"===e.rating),t.xp6(1),t.Q6J("ngIf","F"===e.rating)}}function Ye(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",120)(2,"mat-label"),t._uU(3,"Rating"),t.qZA(),t.TgZ(4,"mat-select",115),t.NdJ("ngModelChange",function(l){t.CHM(e);const c=t.oxw().$implicit;return t.KtG(c.rating=l)}),t._UZ(5,"mat-option",47),t.TgZ(6,"mat-option",129),t._uU(7,"A"),t.qZA(),t.TgZ(8,"mat-option",130),t._uU(9,"A-"),t.qZA(),t.TgZ(10,"mat-option",131),t._uU(11,"B"),t.qZA(),t.TgZ(12,"mat-option",132),t._uU(13,"C"),t.qZA(),t.TgZ(14,"mat-option",133),t._uU(15,"D"),t.qZA(),t.TgZ(16,"mat-option",134),t._uU(17,"F"),t.qZA()()()()}if(2&n){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("ngModel",e.rating)}}function Qe(n,o){if(1&n&&(t.TgZ(0,"td",109),t.YNc(1,Pe,7,6,"div",15),t.YNc(2,Ye,18,1,"div",15),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function Le(n,o){1&n&&t._UZ(0,"td",116)}function Be(n,o){1&n&&(t.TgZ(0,"th",119),t._uU(1," INFO "),t.qZA())}function je(n,o){1&n&&(t.TgZ(0,"button",139)(1,"span",32),t._UZ(2,"i",140),t.qZA()())}function $e(n,o){1&n&&(t.TgZ(0,"button",141)(1,"span",32),t._UZ(2,"i",142),t.qZA()())}function Ve(n,o){1&n&&(t.TgZ(0,"button",143)(1,"span",32),t._UZ(2,"i",144),t.qZA()())}function Ge(n,o){if(1&n&&(t.TgZ(0,"button",145)(1,"span",32),t._UZ(2,"i",146),t.qZA()()),2&n){const e=t.oxw().$implicit;t.MGl("matTooltip","Injured for ",e.injured," days")}}function ze(n,o){if(1&n&&(t.TgZ(0,"td",109),t.YNc(1,je,3,0,"button",135),t.YNc(2,$e,3,0,"button",136),t.YNc(3,Ve,3,0,"button",137),t.YNc(4,Ge,3,1,"button",138),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf","Y"===e.first_team),t.xp6(1),t.Q6J("ngIf","Y"===e.penalty_taker),t.xp6(1),t.Q6J("ngIf","Y"===e.free_kick_taker),t.xp6(1),t.Q6J("ngIf",e.injured>0)}}function We(n,o){1&n&&t._UZ(0,"td",116)}function Ke(n,o){1&n&&t._UZ(0,"th",108)}function He(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",148)(1,"button",37),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,c=t.oxw();return t.KtG(c.editField(l))}),t.TgZ(2,"span",32),t._UZ(3,"i",149),t.qZA()()()}}function Xe(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",148)(1,"button",31),t.NdJ("click",function(){t.CHM(e);const l=t.oxw().$implicit,c=t.oxw();return t.KtG(c.editField(l))}),t.TgZ(2,"span",32),t._UZ(3,"i",150),t.qZA()()()}}function tn(n,o){if(1&n&&(t.TgZ(0,"td",109),t.YNc(1,He,4,0,"div",147),t.YNc(2,Xe,4,0,"div",147),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isEdit),t.xp6(1),t.Q6J("ngIf",!e.isEdit)}}function en(n,o){1&n&&t._UZ(0,"td",116)}function nn(n,o){1&n&&t._UZ(0,"tr",151)}function on(n,o){1&n&&t._UZ(0,"tr",152)}function an(n,o){1&n&&(t.TgZ(0,"tr",153)(1,"td",154),t._uU(2,"No data with current filters"),t.qZA()())}function rn(n,o){1&n&&t._UZ(0,"tr",155)}function sn(n,o){1&n&&(t.TgZ(0,"span",32),t._UZ(1,"i",156),t._uU(2," Analisi Squadra Attuale"),t.qZA())}function ln(n,o){if(1&n&&(t.TgZ(0,"mat-option",107),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function cn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"b")(2,"button",103),t._uU(3),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.assignedRole," ")}}function un(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"b")(2,"button",104),t._uU(3),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.assignedRole," ")}}function mn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"b")(2,"button",160),t._uU(3),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hYB("matTooltip","Sarebbe meglio schierare ",e.name," come ",e.best_role_mantra,""),t.xp6(1),t.hij(" ",e.assignedRole," ")}}function pn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"b"),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.name)}}function dn(n,o){1&n&&(t.TgZ(0,"td",158),t._UZ(1,"b"),t.qZA())}function _n(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"b"),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.team)}}function fn(n,o){1&n&&(t.TgZ(0,"td",158),t._UZ(1,"b"),t.qZA())}function hn(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"button",14),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e," ")}}function gn(n,o){if(1&n&&(t.TgZ(0,"button",14),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function bn(n,o){if(1&n&&(t.TgZ(0,"button",126),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Tn(n,o){if(1&n&&(t.TgZ(0,"button",104),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Cn(n,o){if(1&n&&(t.TgZ(0,"button",127),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function yn(n,o){if(1&n&&(t.TgZ(0,"button",128),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Zn(n,o){if(1&n&&(t.TgZ(0,"button",103),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function xn(n,o){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,cn,4,1,"td",159),t.YNc(2,un,4,1,"td",159),t.YNc(3,mn,4,3,"td",159),t.YNc(4,pn,3,1,"td",159),t.YNc(5,dn,2,0,"td",159),t.YNc(6,_n,3,1,"td",159),t.YNc(7,fn,2,0,"td",159),t.TgZ(8,"td",158),t.YNc(9,hn,3,1,"ng-container",118),t.qZA(),t.TgZ(10,"td",158),t.YNc(11,gn,2,1,"button",110),t.YNc(12,bn,2,1,"button",123),t.YNc(13,Tn,2,1,"button",13),t.YNc(14,Cn,2,1,"button",124),t.YNc(15,yn,2,1,"button",125),t.YNc(16,Zn,2,1,"button",12),t.qZA(),t.TgZ(17,"td",158),t._uU(18),t.qZA()()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",-1===e.id),t.xp6(1),t.Q6J("ngIf",-1!==e.id&&e.best_role_mantra===e.assignedRole),t.xp6(1),t.Q6J("ngIf",-1!==e.id&&e.best_role_mantra!==e.assignedRole),t.xp6(1),t.Q6J("ngIf",-1!==e.id),t.xp6(1),t.Q6J("ngIf",-1===e.id),t.xp6(1),t.Q6J("ngIf",-1!==e.id),t.xp6(1),t.Q6J("ngIf",-1===e.id),t.xp6(2),t.Q6J("ngForOf",e.best_role_mantra.split(";")),t.xp6(2),t.Q6J("ngIf","A"===e.rating),t.xp6(1),t.Q6J("ngIf","A-"===e.rating),t.xp6(1),t.Q6J("ngIf","B"===e.rating),t.xp6(1),t.Q6J("ngIf","C"===e.rating),t.xp6(1),t.Q6J("ngIf","D"===e.rating),t.xp6(1),t.Q6J("ngIf","F"===e.rating),t.xp6(2),t.hij(" ",e.price," ")}}function vn(n,o){if(1&n&&(t.TgZ(0,"table",157)(1,"tr")(2,"th",158),t._uU(3," Ruolo Formazione "),t.qZA(),t.TgZ(4,"th",158),t._uU(5," Giocatore "),t.qZA(),t.TgZ(6,"th",158),t._uU(7," Squadra "),t.qZA(),t.TgZ(8,"th",158),t._uU(9," Ruolo Giocatore"),t.qZA(),t.TgZ(10,"th",158),t._uU(11," Rating "),t.qZA(),t.TgZ(12,"th",158),t._uU(13," Spesa "),t.qZA()(),t.YNc(14,xn,19,15,"tr",118),t.qZA()),2&n){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.getBestEleven())}}function An(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",161)(2,"span",32),t._UZ(3,"i",111),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.MGl("matTooltip","Rating: ",e.value,"")}}function wn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",160)(2,"span",32),t._UZ(3,"i",162),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.MGl("matTooltip","Rating: ",e.value,"")}}function Sn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",145)(2,"span",32),t._UZ(3,"i",163),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.MGl("matTooltip","Rating: ",e.value,"")}}function In(n,o){if(1&n&&(t.TgZ(0,"b"),t._uU(1," \xa0"),t.TgZ(2,"button",103),t._uU(3),t.qZA()()),2&n){const e=o.$implicit;t.xp6(3),t.hij(" ",e," ")}}function Nn(n,o){if(1&n&&(t.TgZ(0,"td",158),t.YNc(1,In,4,1,"b",118),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.missingRoles)}}function Dn(n,o){1&n&&(t.TgZ(0,"td",158)(1,"b"),t._uU(2," \xa0"),t.TgZ(3,"button",103),t._uU(4," Molti "),t.qZA()()())}function Un(n,o){1&n&&(t.TgZ(0,"td",158)(1,"button",104),t._uU(2," Nessuno "),t.qZA()())}function Fn(n,o){if(1&n&&(t.TgZ(0,"b"),t._uU(1," \xa0"),t.TgZ(2,"button",14),t._uU(3),t.qZA()()),2&n){const e=o.$implicit;t.xp6(3),t.hij(" ",e.role," ")}}function qn(n,o){if(1&n&&(t.TgZ(0,"td",158),t.YNc(1,Fn,4,1,"b",118),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.rolesToBuy)}}function En(n,o){1&n&&(t.TgZ(0,"td",158)(1,"button",103),t._uU(2," Molti "),t.qZA()())}function On(n,o){1&n&&(t.TgZ(0,"td",158)(1,"button",104),t._uU(2," Nessuno "),t.qZA()())}function Rn(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",158)(2,"b"),t._uU(3),t.qZA()(),t.YNc(4,An,4,1,"td",159),t.YNc(5,wn,4,1,"td",159),t.YNc(6,Sn,4,1,"td",159),t.YNc(7,Nn,2,1,"td",159),t.YNc(8,Dn,5,0,"td",159),t.YNc(9,Un,3,0,"td",159),t.YNc(10,qn,2,1,"td",159),t.YNc(11,En,3,0,"td",159),t.YNc(12,On,3,0,"td",159),t.qZA()),2&n){const e=o.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.value>=11),t.xp6(1),t.Q6J("ngIf",e.value<11&&e.value>=7),t.xp6(1),t.Q6J("ngIf",e.value<7),t.xp6(1),t.Q6J("ngIf",e.missingRoles.length>0&&e.missingRoles.length<4),t.xp6(1),t.Q6J("ngIf",e.missingRoles.length>=4),t.xp6(1),t.Q6J("ngIf",0===e.missingRoles.length),t.xp6(1),t.Q6J("ngIf",e.rolesToBuy.length>0&&e.rolesToBuy.length<4),t.xp6(1),t.Q6J("ngIf",e.rolesToBuy.length>=4),t.xp6(1),t.Q6J("ngIf",0===e.rolesToBuy.length)}}function kn(n,o){if(1&n&&(t.TgZ(0,"table",157)(1,"tr")(2,"th",158),t._uU(3," Formazione "),t.qZA(),t.TgZ(4,"th",158),t._uU(5," Valore "),t.qZA(),t.TgZ(6,"th",158),t._uU(7," Ruoli Mancanti "),t.qZA(),t.TgZ(8,"th",158),t._uU(9," Ruoli Da Comprare "),t.qZA()(),t.YNc(10,Rn,13,10,"tr",118),t.qZA()),2&n){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.computedFormations)}}function Mn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",104)(2,"span",32),t._UZ(3,"i",111),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].remaining,"")}}function Jn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",128)(2,"span",32),t._UZ(3,"i",164),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].remaining,"")}}function Pn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",103)(2,"span",32),t._UZ(3,"i",165),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].remaining,"")}}function Yn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",104)(2,"span",32),t._UZ(3,"i",111),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].all,"")}}function Qn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",128)(2,"span",32),t._UZ(3,"i",162),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].all,"")}}function Ln(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",103)(2,"span",32),t._UZ(3,"i",163),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].all,"")}}function Bn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",104)(2,"span",32),t._UZ(3,"i",111),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].firstTeam,"")}}function jn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",128)(2,"span",32),t._UZ(3,"i",162),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].firstTeam,"")}}function $n(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",103)(2,"span",32),t._UZ(3,"i",163),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].firstTeam,"")}}function Vn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",104)(2,"span",32),t._UZ(3,"i",111),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].good,"")}}function Gn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",127)(2,"span",32),t._UZ(3,"i",162),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].good,"")}}function zn(n,o){if(1&n&&(t.TgZ(0,"td",158)(1,"button",103)(2,"span",32),t._UZ(3,"i",163),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].good,"")}}function Wn(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",158)(2,"b"),t._uU(3),t.qZA()(),t.YNc(4,Mn,5,1,"td",159),t.YNc(5,Jn,5,1,"td",159),t.YNc(6,Pn,5,1,"td",159),t.YNc(7,Yn,5,1,"td",159),t.YNc(8,Qn,5,1,"td",159),t.YNc(9,Ln,5,1,"td",159),t.YNc(10,Bn,5,1,"td",159),t.YNc(11,jn,5,1,"td",159),t.YNc(12,$n,5,1,"td",159),t.YNc(13,Vn,5,1,"td",159),t.YNc(14,Gn,5,1,"td",159),t.YNc(15,zn,5,1,"td",159),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].remaining>=3),t.xp6(1),t.Q6J("ngIf",2===i.roleInfo[e].remaining),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].remaining<=1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].all>=3),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].all<3&&i.roleInfo[e].all>=1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].all<1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].firstTeam>=3),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].firstTeam<3&&i.roleInfo[e].firstTeam>=1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].firstTeam<1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].good>=2),t.xp6(1),t.Q6J("ngIf",1===i.roleInfo[e].good),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].good<1)}}function Kn(n,o){if(1&n&&(t.TgZ(0,"table",157)(1,"tr")(2,"th",158),t._uU(3," Ruolo "),t.qZA(),t.TgZ(4,"th",158),t._uU(5," TOP Liberi "),t.qZA(),t.TgZ(6,"th",158),t._uU(7," Comprati "),t.qZA(),t.TgZ(8,"th",158),t._uU(9," Titolari "),t.qZA(),t.TgZ(10,"th",158),t._uU(11," B+ "),t.qZA()(),t.YNc(12,Wn,16,13,"tr",118),t.qZA()),2&n){const e=t.oxw();t.xp6(12),t.Q6J("ngForOf",e.getDistinctRoles())}}function Hn(n,o){1&n&&(t.TgZ(0,"span",32),t._UZ(1,"i",166),t._uU(2," Admin"),t.qZA())}const Xn=function(){return[25,50,100]};let ti=(()=>{class n{constructor(e,i,l,c){this.cdr=e,this.teamDataService=i,this.dialog=l,this._snackBar=c,this.loading=!1,this.DISTINCT_ROLES=["Por","Dc","Dd","Ds","E","M","C","W","T","A","Pc"],this.DISTINCT_TEAMS={0:"Senza Squadra",1:"OMagos",2:"Dano",3:"Greg",4:"Gio",5:"Fra",6:"Donzo",7:"Bot",8:"Ste"},this.FORMATIONS=[{name:"343",Por:1,Dc:3,Dd:0,Ds:0,E:2,M:0,C:2,W:0,T:0,A:2,Pc:1},{name:"4312",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:2,W:0,T:1,A:0,Pc:2},{name:"3412",Por:1,Dc:3,Dd:0,Ds:0,E:2,M:0,C:2,W:0,T:1,A:0,Pc:2},{name:"442",Por:1,Dc:2,Dd:1,Ds:1,E:1,M:0,C:2,W:1,T:0,A:0,Pc:2},{name:"3421",Por:1,Dc:3,Dd:0,Ds:0,E:1,M:1,C:1,W:1,T:1,A:1,Pc:1},{name:"4141",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:0,W:2,T:2,A:0,Pc:1},{name:"4231W",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:1,W:1,T:1,A:1,Pc:1},{name:"4231T",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:1,W:0,T:2,A:1,Pc:1},{name:"4411",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:1,W:2,T:0,A:1,Pc:1},{name:"352",Por:1,Dc:3,Dd:0,Ds:0,E:1,M:1,C:2,W:1,T:0,A:0,Pc:2},{name:"3511",Por:1,Dc:3,Dd:0,Ds:0,E:0,M:2,C:1,W:2,T:0,A:1,Pc:1},{name:"433",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:2,W:0,T:0,A:2,Pc:1}],this.COLUMNS=[{columnDef:"team_id",header:"Comprato",cell:r=>`${r.team_id}`},{columnDef:"name",header:"Nome",cell:r=>`${r.name}`},{columnDef:"team",header:"Squadra",cell:r=>`${r.team}`},{columnDef:"role_mantra",header:"Ruolo Mantra",cell:r=>`${r.role_mantra}`},{columnDef:"value_mantra_1000",header:"Valore 1000",cell:r=>`${r.value_mantra_1000}`},{columnDef:"price",header:"Prezzo",cell:r=>`${r.price}`},{columnDef:"rating",header:"Rating",cell:r=>`${r.rating}`},{columnDef:"first_team",header:"T",cell:r=>`${r.first_team}`},{columnDef:"isEdit",header:"",cell:r=>`${r.isEdit}`}],this.SIMPLE_ROLE_COLUMNS=[{columnDef:"team_id",header:"Comprato",cell:r=>`${r.team_id}`},{columnDef:"name",header:"Nome",cell:r=>`${r.name}`},{columnDef:"team",header:"Squadra",cell:r=>`${r.team}`},{columnDef:"best_role_mantra",header:"Ruolo Mantra",cell:r=>`${r.best_role_mantra}`},{columnDef:"value_mantra_1000",header:"Valore 1000",cell:r=>`${r.value_mantra_1000}`},{columnDef:"price",header:"Prezzo",cell:r=>`${r.price}`},{columnDef:"rating",header:"Rating",cell:r=>`${r.rating}`},{columnDef:"first_team",header:"T",cell:r=>`${r.first_team}`},{columnDef:"isEdit",header:"",cell:r=>`${r.isEdit}`}],this.RATING_VALUES={A:1e4,"A-":1e3,B:100,C:10,D:5,F:0},this.playersLoaded=[],this.dataSource=new y.by(this.playersLoaded),this.displayedColumns=this.SIMPLE_ROLE_COLUMNS.map(r=>r.columnDef),this.formationNames=this.FORMATIONS.map(r=>r.name),this.displayedColumnsFormations=["name","value"],this.allPlayerNames=this.playersLoaded.map(r=>r.name),this.notSoldPlayerNames=this.playersLoaded.map(r=>r.name),this.groupByTeam=[],this.pieChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}},this.pieChartLabels=Object.keys(this.groupByTeam),this.pieChartDatasets=[{data:Object.values(this.groupByTeam),label:"this is an example"}],this.pieChartLegend=!0,this.pieChartPlugins=[],this.roleColumn="best_role_mantra",this.nameColumn="name",this.teamColumn="team",this.userColumn="team_id",this.ratingColumn="rating",this.valueColumn="value_mantra_1000",this.roleFilter="",this.nameFilter="",this.teamFilter="",this.ratingFilter="",this.valueFilter="",this.userFilter=-1,this.areSimpleRoles=!0,this.firstTeamFilter=!1,this.penaltyTakerFilter=!1,this.freeKickTakerFilter=!1,this.injuredFilter=!0,this.formationChosen="442",this.myControl=new C.NI(""),this.myControlAdder=new C.NI(""),this.myControlAdderPrice=new C.NI(""),this.myControlAdderTeam=new C.NI(""),this.inputsquadsrc=new C.NI(""),this.inputrolesrc=new C.NI(""),this.inputteamsrc=new C.NI(""),this.inputratingsrc=new C.NI(""),this.inputvaluesrc=new C.NI(""),this.computedFormations=[],this.roleInfo={},this.dataSourceFormation=new y.by(this.computedFormations),this.addCandidate="",this.ratingCandidate="",this.roleCandidate="",this.teamCandidate="",this.amountRemaining=500,this.highestFormation={name:"",rolesToBuy:[]},this.roleFilterPredicate=(r,p)=>r[this.roleColumn].includes(p),this.userFilterPredicate=(r,p)=>!(this.userFilter>=0&&this.userFilter<=8)||r[this.userColumn]===p,this.nameFilterPredicate=(r,p)=>r[this.nameColumn].trim().toLowerCase().includes(p),this.valueFilterPredicate=(r,p)=>(p=""===p?"0":p,parseInt(r[this.valueColumn])>=parseInt(p)),this.teamFilterPredicate=(r,p)=>r[this.teamColumn]===p,this.ratingFilterPredicate=(r,p)=>this.RATING_VALUES[r[this.ratingColumn]]>=this.RATING_VALUES[p],this.infoFilterPredicate=(r,p,$,G,v)=>(!p||"Y"===r.first_team===p)&&(!$||"Y"===r.penalty_taker===$)&&(!G||"Y"===r.free_kick_taker===G)&&(v||r.injured>0===v)}groupByAndCountRoles(e,i,l="F"){return e.flatMap(r=>r[i].split(";").map($=>({...r,value:$}))).filter(r=>this.RATING_VALUES[r.rating]>=this.RATING_VALUES[l]).reduce((r,p)=>(r[p[i]]=(r[p[i]]||0)+1,r),{})}groupByAndCount(e,i,l="F"){return e.filter(c=>this.RATING_VALUES[c.rating]>=this.RATING_VALUES[l]).reduce((c,r)=>(c[r[i]]=(c[r[i]]||0)+1,c),{})}ngOnInit(){}ngAfterViewInit(){this.dataSource=new y.by(this.playersLoaded),this.teamDataService.dataTable$.subscribe(e=>{this.playersLoaded=e.filter(i=>void 0!==i),this.dataSource.data=this.playersLoaded,this.allPlayerNames=this.playersLoaded.map(i=>i.name),this.searchFilterOptions=this.allPlayerNames.slice(),this.addPlayerAutocompleteOptions=this.allPlayerNames.slice(),this.dataSource.paginator=this.paginator,this.cdr.detectChanges()}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.sort.active=this.valueColumn,this.sort.direction="desc",this.sort.sortChange.emit({active:this.sort.active,direction:this.sort.direction}),this.areSimpleRoles=!0,setTimeout(()=>{this.updateAnalyses()},100),this.cdr.detectChanges()}openConfirmationDialogLoadCSV(){this.dialog.open(at,{data:{message:"Sicuro di voler ricaricare i dati di default? Perderai i dati attuali.",buttonText:{ok:"Si",cancel:"No"}}}).afterClosed().subscribe(i=>{i&&(this.loadCSV(),setTimeout(()=>{this.updateAnalyses()},1e3))})}openSnackBar(e,i){this._snackBar.open(e,i)}openConfirmationDialogReloadTeams(){this.dialog.open(at,{data:{message:"Sicuro di voler ricreare tutte le squadre? Perderai i dati attuali.",buttonText:{ok:"Si",cancel:"No"}}}).afterClosed().subscribe(i=>{i&&this.addGoodTeam()})}updateBestEleven(){this.bestEleven=this.parseBestEleven()}getFormations(){return this.FORMATIONS}getBestEleven(){return this.bestEleven}onCheckboxChange(){this.areSimpleRoles?(this.displayedColumns=this.SIMPLE_ROLE_COLUMNS.map(e=>e.columnDef),this.roleColumn="best_role_mantra"):(this.displayedColumns=this.COLUMNS.map(e=>e.columnDef),this.roleColumn="role_mantra"),this.filterOptions(),this.aggregateFilters()}onFileChange(e){let i=e.target.files[0];tt.parse(i,{complete:l=>{const c=l.data.map(r=>{try{return new dt(r)}catch(p){console.error(p.message)}});console.log("Loaded From File: ",c),this.openSnackBar("Caricati "+c.length.toString()+" giocatori da "+i.name,"OK"),this.teamDataService.setData(c),this.filterOptions()},header:!0})}onPlayerToAddSelected(e){const i=e.option.value.trim().toLowerCase(),l=this.playersLoaded.find(c=>c.name.trim().toLowerCase()===i);this.addCandidate=i,this.ratingCandidate=l.rating,this.roleCandidate=l.role_mantra,this.teamCandidate=l.team}onOptionSelected(e){this.nameFilter=e.option.value.trim().toLowerCase(),this.myControl.setValue(e.option.value),this.aggregateFilters(),this.filterOptions()}openImageModal(){document.getElementById("imageModal").style.display="block"}closeImageModal(){document.getElementById("imageModal").style.display="none"}deleteFilters(){this.roleFilter="",this.nameFilter="",this.teamFilter="",this.ratingFilter="",this.valueFilter="",this.userFilter=-1,this.inputsquadsrc.setValue(""),this.inputrolesrc.setValue(""),this.inputteamsrc.setValue(""),this.inputratingsrc.setValue(""),this.inputvaluesrc.setValue(""),this.myControl.setValue(""),this.areSimpleRoles=!0,this.firstTeamFilter=!1,this.penaltyTakerFilter=!1,this.freeKickTakerFilter=!1,this.injuredFilter=!0,this.aggregateFilters(),this.filterOptions()}getRandomElements(e,i){const l=[...e];for(let c=l.length-1;c>0;c--){const r=Math.floor(Math.random()*(c+1));[l[c],l[r]]=[l[r],l[c]]}return l.slice(0,i)}addGoodTeam(){var e=this;this.loading=!0,setTimeout((0,V.Z)(function*(){yield e.addTeam(),e.updateAnalyses(),e.loading=!1,e.openSnackBar("Team casuali creati","OK")}),0)}addTeam(){var e=this;return(0,V.Z)(function*(){for(let i=0;i<e.playersLoaded.length;i++)e.playersLoaded[i].team_id=0;Object.keys(e.DISTINCT_TEAMS).forEach(function(){var i=(0,V.Z)(function*(l){yield e.createRandomTeamInternal(l)});return function(l){return i.apply(this,arguments)}}())})()}createRandomTeamInternal(e){var i=this;return(0,V.Z)(function*(){return new Promise(l=>{if("0"!==e){const c=[];i.DISTINCT_ROLES.forEach(r=>{c.push(...i.getRandomElements(i.playersLoaded.filter(p=>0===p.team_id).filter(p=>p.value_mantra_1000>=4).filter(p=>p.best_role_mantra.split(";")[0]===r),3))});for(let r=0;r<c.length;r++)i.addPlayer(c[r].name,Math.round(c[r].value_mantra_1000/2),parseInt(e))}setTimeout(()=>{l()},100)})})()}onOptionSelectedAdder(){const e=this.inputAdder.nativeElement.value,i=parseInt(""===this.inputPrice.nativeElement.value.trim()?"0":this.inputPrice.nativeElement.value);this.addPlayer(e,i,this.inputTeam.value),this.myControl.setValue(""),this.myControlAdder.setValue(""),this.myControlAdderPrice.setValue(""),this.myControlAdderTeam.setValue(""),this.filterOptions(),setTimeout(()=>{this.inputAdder.nativeElement.blur()})}addPlayer(e,i,l){const r=this.playersLoaded.find(p=>p.name===e).id;this.teamDataService.updateField(r,"team_id",l),this.teamDataService.updateField(r,"price",i),this.filterOptions()}getCountSum(){return this.dataSource.filteredData.length}getBestFormation(){void 0===this.highestFormation?this.highestFormation={name:"",rolesToBuy:[]}:(this.highestFormation=this.computedFormations.reduce((e,i)=>i.value>e.value?i:e,this.computedFormations[0]),this.highestFormation.rolesToBuy=this.highestFormation.rolesToBuy.splice(0,5)),console.log(this.highestFormation)}getRolesToBuy(){if(this.highestFormation=this.computedFormations.reduce((e,i)=>i.value>e.value?i:e,this.computedFormations[0]),void 0===this.highestFormation)return{name:"",rolesToBuy:[]};this.highestFormation.rolesToBuy=this.highestFormation.rolesToBuy.splice(0,3)}getMyAmountRemaining(){const e=this.dataSource.data.filter(i=>1===i.team_id).map(i=>+i.price).map(i=>isNaN(i)?0:i).filter(i=>!isNaN(i)).reduce((i,l)=>i+l,0);this.amountRemaining=500-e}getColumnSum(){return this.dataSource.filteredData.map(e=>+e.price).map(e=>isNaN(e)?0:e).filter(e=>!isNaN(e)).reduce((e,i)=>e+i,0)}filterOptions(){if(!this.loading){this.allPlayerNames=this.playersLoaded.slice().map(l=>l.name),this.notSoldPlayerNames=this.playersLoaded.slice().filter(l=>0===l.team_id).map(l=>l.name);const e=this.input.nativeElement.value.toLowerCase();this.searchFilterOptions=this.allPlayerNames.filter(l=>l.toLowerCase().includes(e)).sort();const i=this.inputAdder.nativeElement.value.toLowerCase();this.addPlayerAutocompleteOptions=this.notSoldPlayerNames.filter(l=>l.toLowerCase().includes(i)).sort(),this.cdr.detectChanges(),setTimeout(()=>{this.updateAnalyses()},100)}}updateAnalyses(){this.groupByTeam=this.updateGroupByTeamCount(),this.computedFormations=this.rateFormationsByPlayers(),console.log("Formazioni",this.computedFormations),this.roleInfo=this.evaluatePlayersInSquad(),this.bestEleven=this.parseBestEleven(),this.getMyAmountRemaining(),this.getBestFormation(),0===this.chart.chart.data.datasets.length||(this.chart.chart.data.datasets[0].data=Object.values(this.groupByTeam),this.chart.chart.data.labels=Object.keys(this.groupByTeam)),this.chart.chart.update()}rateFormationsByPlayers(){const e=this.evaluatePlayersInSquad();return this.FORMATIONS.map(l=>{const c=[],r=[],p=Object.keys(l).filter(v=>l[v]>0),$=this.DISTINCT_ROLES.map(v=>{const Ot=void 0!==e[v]?e[v].all:0;let St=Math.min(l[v],(Ot-(l[v]+1))*((void 0!==e[v]?e[v].good:0)+1));return l[v]>0&&0===Ot&&(c.push(v),St-=3),l[v]>0&&St<l[v]&&r.push({role:v,urgency:St-l[v]}),isNaN(St)?{name:v,value:-1}:{name:v,value:St}});console.log("Formazione "+l.name,$);const G=$.filter(v=>p.includes(v.name)).reduce((v,Zt)=>v+Zt.value,0);return r.sort((v,Zt)=>Zt.urgency-v.urgency),{name:l.name,value:G,missingRoles:c,rolesToBuy:r}}).sort((l,c)=>c.value-l.value)}parseBestEleven(){const e=[],i=this.FORMATIONS.find(r=>r.name===this.formationChosen),l=this.playersLoaded.filter(r=>1===r.team_id).sort((r,p)=>this.RATING_VALUES[p.rating]-this.RATING_VALUES[r.rating]),c=[...this.DISTINCT_ROLES].reverse();for(let r of c){const p=l.filter($=>!e.includes($)).slice().filter($=>{const G=$.best_role_mantra.split(";");for(let v of G)if(r===v)return!0;return!1}).slice(0,i[r]);for(let $ of p)$.assignedRole=r;if(e.push(...p),p.length<i[r]){const $=l.filter(G=>!e.includes(G)).slice().filter(G=>{const v=G.role_mantra.split(";");for(let Zt of v)if(r===Zt)return!0;return!1}).slice(0,i[r]);for(let G of $)G.assignedRole=r;if(e.push(...$),p.length+$.length<i[r])for(let G=0;G<i[r]-(p.length+$.length);G++){const v=new dt({name:" !! ",id:-1,team:" !! "});v.assignedRole=r,e.push(v)}}}return e}evaluatePlayersInSquad(){const e=this.groupByAndCount(this.playersLoaded.filter(p=>1===p.team_id),"best_role_mantra","F"),i=this.groupByAndCount(this.playersLoaded.filter(p=>1===p.team_id),"best_role_mantra","B"),l=this.groupByAndCount(this.playersLoaded.filter(p=>1===p.team_id&&"Y"===p.first_team),"best_role_mantra","F"),c=this.groupByAndCount(this.playersLoaded.filter(p=>0===p.team_id),"best_role_mantra","A-");this.expandRolesCountsToMultiRoles(e),this.expandRolesCountsToMultiRoles(i),this.expandRolesCountsToMultiRoles(l),this.expandRolesCountsToMultiRoles(c);const r={};for(let p of this.DISTINCT_ROLES)r[p]={all:e[p]||0,good:i[p]||0,firstTeam:l[p]||0,remaining:c[p]||0};return r}expandRolesCountsToMultiRoles(e){for(let i in e)if(i.includes(";")){let l=i.split(";");for(let c of l)e[c]?e[c]+=e[i]:e[c]=e[i];delete e[i]}}updateGroupByTeamCount(){return this.groupByAndCount(this.playersLoaded.filter(i=>1===i.team_id),"team","B")}getPriceEstimation(e){return Math.round(e/2)}editField(e){this.teamDataService.updateField(e.id,"isEdit",!e.isEdit),this.filterOptions()}loadCSV(){this.loading=!0,setTimeout(()=>{this.teamDataService.resetDataToCSV(),this.groupByTeam={},this.computedFormations=[],this.roleInfo=[],this.bestEleven=[],this.updateAnalyses(),this.openSnackBar("Caricati "+this.playersLoaded.length.toString()+" giocatori","OK"),this.loading=!1},0),setTimeout(()=>{this.groupByTeam=this.updateGroupByTeamCount(),this.computedFormations=this.rateFormationsByPlayers(),this.roleInfo=this.evaluatePlayersInSquad(),this.bestEleven=this.parseBestEleven(),this.getMyAmountRemaining(),0===this.chart.chart.data.datasets.length||(this.chart.chart.data.datasets[0].data=Object.values(this.groupByTeam),this.chart.chart.data.labels=Object.keys(this.groupByTeam)),this.chart.chart.update()},100)}remove(e){const i=this.playersLoaded.indexOf(e);this.playersLoaded.splice(i,1),this.teamDataService.setData(this.playersLoaded),this.filterOptions()}getNumPlayers(){return this.playersLoaded.filter(e=>1===e.team_id).length}getDistinctTeams(){return this.DISTINCT_TEAMS}getDistinctRoles(){return this.DISTINCT_ROLES}getDistinctTeamsKeys(){return Object.keys(this.getDistinctTeams()).map(e=>parseInt(e))}getDistinctTeamsKeysTeamsOnly(){return Object.keys(this.getDistinctTeams()).map(e=>parseInt(e)).filter(e=>0!==e)}getTeamName(e){return this.getDistinctTeams()[e]}switchFirstTeamFilter(){this.aggregateFilters(),this.filterOptions()}switchPenaltyTakerFilter(){this.aggregateFilters(),this.filterOptions()}switchFreeKickTakerFilter(){this.aggregateFilters(),this.filterOptions()}switchInjuredFilter(){this.aggregateFilters(),this.filterOptions()}getDistinctValues(e){const i=new Set;return this.playersLoaded.forEach(l=>{if(e===this.roleColumn){void 0===l&&console.log("undefined");const c=l[e].split(";");for(let r=0;r<c.length;r++)i.add(c[r])}else i.add(l[e])}),Array.from(i).sort()}aggregateFilters(){this.loading||(this.dataSource.filterPredicate=(e,i)=>(!this.nameFilter||this.nameFilterPredicate(e,this.nameFilter))&&(void 0===this.userFilter||this.userFilter<0||this.userFilterPredicate(e,this.userFilter))&&(!this.roleFilter||this.roleFilterPredicate(e,this.roleFilter))&&(!this.teamFilter||this.teamFilterPredicate(e,this.teamFilter))&&(!this.ratingFilter||this.ratingFilterPredicate(e,this.ratingFilter))&&(!this.valueFilter||this.valueFilterPredicate(e,this.valueFilter))&&this.infoFilterPredicate(e,this.firstTeamFilter,this.penaltyTakerFilter,this.freeKickTakerFilter,this.injuredFilter),this.dataSource.filter="#",this.dataSource.filter="A",this.dataSource.paginator&&this.dataSource.paginator.firstPage())}filterByColumnValue(e){this.roleFilter=e,this.aggregateFilters()}downloadCSV(){const e=tt.unparse(this.dataSource.data),i=new Blob([e],{type:"text/csv"}),l=window.URL.createObjectURL(i),c=document.createElement("a");c.href=l,c.download="data.csv",c.click(),window.URL.revokeObjectURL(l)}filterByColumnValueUser(e){this.userFilter=e,this.aggregateFilters()}filterByColumnValueTeam(e){this.teamFilter=e,this.aggregateFilters()}filterByColumnValueRating(e){this.ratingFilter=e,this.aggregateFilters()}filterByColumnValueMantra(e){this.valueFilter=e.target.value.trim().toLowerCase(),this.aggregateFilters()}applyFilter(e){this.nameFilter=e.target.value.trim().toLowerCase(),this.aggregateFilters()}filter(){this.filterOptions()}filterAdder(){this.filterOptions()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(At),t.Y36(ot.uw),t.Y36(s.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tables"]],viewQuery:function(e,i){if(1&e&&(t.Gf(w.jh,5),t.Gf(ct,5),t.Gf(ut,5),t.Gf(H,5),t.Gf(yt,5),t.Gf(pt.NW,5),t.Gf(nt.YE,5),t.Gf(y.BZ,5)),2&e){let l;t.iGM(l=t.CRH())&&(i.chart=l.first),t.iGM(l=t.CRH())&&(i.input=l.first),t.iGM(l=t.CRH())&&(i.inputAdder=l.first),t.iGM(l=t.CRH())&&(i.inputPrice=l.first),t.iGM(l=t.CRH())&&(i.inputTeam=l.first),t.iGM(l=t.CRH())&&(i.paginator=l.first),t.iGM(l=t.CRH())&&(i.sort=l.first),t.iGM(l=t.CRH())&&(i.table=l.first)}},decls:266,vars:50,consts:[[1,"header","bg-gradient-danger","pb-5","pt-5","pt-md-5"],[1,"container-fluid"],[1,"header-body"],["class","overlay",4,"ngIf"],["mat-tab-label",""],[1,"row"],[1,"col"],[1,"card","shadow"],["multi","",4,"ngFor","ngForOf"],[1,"card-header","bg-transparent","border-0"],[1,"card-container"],[1,"my-card"],["class","btn btn-icon btn-sm btn-danger","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-success","type","button","mat-button","",4,"ngIf"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-primary"],[4,"ngIf"],[1,"example-form"],[1,"player-field"],["type","text","placeholder","Pick one","matInput","",3,"formControl","matAutocomplete","input","focus"],["inputadder",""],["requireSelection","",3,"optionSelected"],["autoAdder","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"value-field"],["type","text","placeholder","Prezzo","matInput","",3,"formControl"],["inputprice",""],[3,"formControl"],["inputteam",""],["type","text","placeholder","Minimum Value","matInput","","disabled","","name","teaamCandidate",3,"ngModel","ngModelChange"],["type","text","placeholder","Minimum Value","matInput","","disabled","","name","ratingCandidate",3,"ngModel","ngModelChange"],["type","text","placeholder","Minimum Value","matInput","","disabled","","name","roleCandidate",3,"ngModel","ngModelChange"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-primary",3,"click"],[1,"btn-inner--icon"],[1,"fas","fa-user"],["id","imageModal",1,"modal"],[1,"close",3,"click"],["src","https://content.fantacalcio.it/web/img/medium/fb125077-b00a-4587-9139-be740128a4e4.jpg","alt","Description",1,"modal-content"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-success",3,"click"],[1,"fas","fa-plus"],[1,"team-field"],[3,"formControl","selectionChange"],["value","-1"],["type","text","placeholder","Pick one","matInput","",3,"formControl","matAutocomplete","input","focus","keyup"],["inputmine",""],["auto","matAutocomplete"],[1,"role-field"],[3,"formControl","selectionChange",4,"ngIf"],["value",""],["type","text","placeholder","Minimum Value","matInput","",3,"formControl","keyup"],["matTooltip","Se selezionato, mostra solo il ruolo migliore tra i disponibili es. Ds, Dc viene mostrato come Dc","matTooltipPosition","left","name","simpleRoles",3,"ngModel","ngModelChange","change"],["name","firstTeam",3,"ngModel","ngModelChange","change"],["name","penalty",3,"ngModel","ngModelChange","change"],["name","freeKick",3,"ngModel","ngModelChange","change"],["name","injured",3,"ngModel","ngModelChange","change"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-primary","btn-reset",3,"click"],[1,"fas","fa-trash"],[1,"table-responsive"],["mat-table","","matSort","",1,"table","align-items-center","table-flush",3,"dataSource"],["matColumnDef","team_id"],["class","thead-light","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","name"],["matColumnDef","team"],["matColumnDef","best_role_mantra"],["matColumnDef","role_mantra"],["class","thead-light","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","value_mantra_1000"],["matColumnDef","price"],["matColumnDef","rating"],["matColumnDef","first_team"],["matColumnDef","isEdit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","mat-row","mat-footer-row","",4,"matFooterRowDef"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"card-footer","py-4"],["aria-label","..."],["cols","1","rowHeight","430px","gutterSize","16px"],[1,"analysis-card"],[1,"example-chart"],[1,"card-title","text-uppercase","text-muted","mb-0"],[3,"ngModel","selectionChange","ngModelChange"],["class","table align-items-center table-flush small-table",4,"ngIf"],["cols","3","rowHeight","430px","gutterSize","16px"],["baseChart","",3,"type","datasets","labels","options","plugins","legend"],[1,"col-auto"],["type","button","mat-button","","matTooltip","Scarica i dati salvati come .CSV","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-primary",3,"click"],[1,"fas","fa-download"],["type","file",1,"hidden-file-input",3,"change"],["fileInput",""],["mat-button","","matTooltip","Carica un .CSV scaricato in precedenza","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-primary",3,"click"],[1,"fas","fa-upload"],["mat-button","","matTooltip","Riporta i dati allo stato originario","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-primary",3,"click"],[1,"fas","fa-power-off"],[1,"fas","fa-sun"],[1,"container-fluid","mt--7"],[1,"overlay"],[1,"fas","fa-table"],["multi",""],[3,"data","teamId","teamName"],[1,"fas","fa-play"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-danger"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-success"],["class","btn btn-icon btn-sm btn-danger","type","button","mat-button","",4,"ngFor","ngForOf"],["class","btn btn-icon btn-sm btn-primary","type","button","mat-button","",4,"ngFor","ngForOf"],[3,"value"],["mat-header-cell","","mat-sort-header","",1,"thead-light"],["mat-cell",""],["class","btn btn-icon btn-sm btn-primary","type","button","mat-button","",4,"ngIf"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-star"],[1,"fas","fa-ban"],[1,"squad-edit"],["name","rating",3,"ngModel","ngModelChange"],["mat-footer-cell",""],["matTooltip","Mostra solo il ruolo migliore tra i disponibili es. Ds, Dc viene mostrato come Dc","matTooltipPosition","above"],[4,"ngFor","ngForOf"],["mat-header-cell","",1,"thead-light"],[1,"rating-edit"],["matInput","","required","","pattern","[0-9]+",3,"type","ngModel","ngModelChange"],["price","ngModel"],["class","btn btn-icon btn-sm btn-info","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-secondary","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-warning","type","button","mat-button","",4,"ngIf"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-info"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-secondary"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-warning"],["value","A"],["value","A-"],["value","B"],["value","C"],["value","D"],["value","F"],["class","btn btn-icon btn-sm btn-success","type","button","mat-button","","matTooltip","Titolare","matTooltipPosition","above",4,"ngIf"],["class","btn btn-icon btn-sm btn-primary","type","button","mat-button","","matTooltip","Rigorista","matTooltipPosition","above",4,"ngIf"],["class","btn btn-icon btn-sm btn-secondary","type","button","mat-button","","matTooltip","Tira punizioni e angoli","matTooltipPosition","above",4,"ngIf"],["class","btn btn-icon btn-sm btn-danger","type","button","mat-button","","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["type","button","mat-button","","matTooltip","Titolare","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-success"],[1,"fas","fa-child"],["type","button","mat-button","","matTooltip","Rigorista","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-primary"],[1,"fas","fa-futbol"],["type","button","mat-button","","matTooltip","Tira punizioni e angoli","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-secondary"],[1,"fas","fa-bullseye"],["type","button","mat-button","","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-danger",3,"matTooltip"],[1,"fas","fa-briefcase-medical"],["class","btn-edit",4,"ngIf"],[1,"btn-edit"],[1,"fas","fa-check"],[1,"fas","fa-edit"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-footer-row","",1,"mat-row"],[1,"fas","fa-chart-line"],[1,"table","align-items-center","table-flush","small-table"],[1,"smallcell"],["class","smallcell",4,"ngIf"],["type","button","mat-button","","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-warning",3,"matTooltip"],["type","button","mat-button","","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-success",3,"matTooltip"],[1,"fas","fa-equals"],[1,"fas","fa-thumbs-down"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-exclamation-triangle"],[1,"fas","fa-users-cog"]],template:function(e,i){if(1&e){const l=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,X,2,0,"div",3),t.qZA()()(),t.TgZ(4,"mat-tab-group")(5,"mat-tab"),t.YNc(6,Ut,3,0,"ng-template",4),t._UZ(7,"br"),t.TgZ(8,"div",5)(9,"div",6)(10,"div",7),t.YNc(11,wt,2,3,"mat-accordion",8),t.qZA()()()(),t.TgZ(12,"mat-tab"),t.YNc(13,Rt,3,0,"ng-template",4),t.TgZ(14,"div")(15,"div")(16,"div",7)(17,"div",9),t._UZ(18,"br"),t.qZA(),t.TgZ(19,"div",10)(20,"div",11)(21,"mat-card")(22,"mat-card-content")(23,"h4"),t._uU(24," Aggiungi giocatore alla squadra. Hai "),t.TgZ(25,"b"),t.YNc(26,kt,2,1,"button",12),t.YNc(27,Mt,2,1,"button",13),t.qZA(),t._uU(28," crediti e "),t.TgZ(29,"button",14),t._uU(30),t.qZA(),t._uU(31," giocatori. "),t.qZA(),t.YNc(32,Jt,2,0,"h5",15),t.YNc(33,Bt,6,3,"h5",15),t.TgZ(34,"form",16)(35,"mat-form-field",17)(36,"mat-label"),t._uU(37,"Giocatore..."),t.qZA(),t.TgZ(38,"input",18,19),t.NdJ("input",function(){return i.filterAdder()})("focus",function(){return i.filterAdder()}),t.qZA(),t.TgZ(40,"mat-autocomplete",20,21),t.NdJ("optionSelected",function(r){return i.onPlayerToAddSelected(r)}),t.YNc(42,jt,2,2,"mat-option",22),t.qZA()(),t.TgZ(43,"mat-form-field",23)(44,"mat-label"),t._uU(45,"Prezzo pagato"),t.qZA(),t._UZ(46,"input",24,25),t.qZA(),t.TgZ(48,"mat-form-field",23)(49,"mat-label"),t._uU(50,"Team"),t.qZA(),t.TgZ(51,"mat-select",26,27),t.YNc(53,$t,2,2,"mat-option",22),t.qZA()()(),t.TgZ(54,"form",16)(55,"mat-form-field",23)(56,"mat-label"),t._uU(57,"Squadra"),t.qZA(),t.TgZ(58,"input",28),t.NdJ("ngModelChange",function(r){return i.teamCandidate=r}),t.qZA()(),t.TgZ(59,"mat-form-field",23)(60,"mat-label"),t._uU(61,"Rating"),t.qZA(),t.TgZ(62,"input",29),t.NdJ("ngModelChange",function(r){return i.ratingCandidate=r}),t.qZA()(),t.TgZ(63,"mat-form-field",23)(64,"mat-label"),t._uU(65,"Ruolo"),t.qZA(),t.TgZ(66,"input",30),t.NdJ("ngModelChange",function(r){return i.roleCandidate=r}),t.qZA()()(),t.TgZ(67,"form",16)(68,"button",31),t.NdJ("click",function(){return i.openImageModal()}),t._uU(69,"Vedi Moduli Mantra 23-24 "),t.TgZ(70,"span",32),t._UZ(71,"i",33),t.qZA()(),t.TgZ(72,"div",34)(73,"span",35),t.NdJ("click",function(){return i.closeImageModal()}),t._uU(74,"\xd7"),t.qZA(),t._UZ(75,"img",36),t.qZA(),t.TgZ(76,"button",37),t.NdJ("click",function(){return i.onOptionSelectedAdder()}),t._uU(77," Aggiungilo alla Squadra! "),t.TgZ(78,"span",32),t._UZ(79,"i",38),t.qZA()()()()()(),t._UZ(80,"br"),t.TgZ(81,"div",11)(82,"mat-card")(83,"mat-card-content")(84,"h4"),t._uU(85,"Filtra giocatori nel Listone"),t.qZA(),t.TgZ(86,"form",16)(87,"mat-form-field",39)(88,"mat-label"),t._uU(89,"Squadra"),t.qZA(),t.TgZ(90,"mat-select",40),t.NdJ("selectionChange",function(r){return i.filterByColumnValueUser(r.value)}),t.YNc(91,Vt,2,2,"mat-option",22),t.TgZ(92,"mat-option",41)(93,"b"),t._uU(94,"Tutti"),t.qZA()()()(),t.TgZ(95,"mat-form-field",17)(96,"mat-label"),t._uU(97,"Giocatore ..."),t.qZA(),t.TgZ(98,"input",42,43),t.NdJ("input",function(){return i.filter()})("focus",function(){return i.filter()})("keyup",function(r){return i.applyFilter(r)}),t.qZA(),t.TgZ(100,"mat-autocomplete",20,44),t.NdJ("optionSelected",function(r){return i.onOptionSelected(r)}),t.YNc(102,Gt,2,2,"mat-option",22),t.qZA()(),t.TgZ(103,"mat-form-field",45)(104,"mat-label"),t._uU(105,"Ruolo"),t.qZA(),t.YNc(106,Wt,5,2,"mat-select",46),t.YNc(107,Ht,5,2,"mat-select",46),t.qZA()(),t.TgZ(108,"form",16)(109,"mat-form-field",39)(110,"mat-label"),t._uU(111,"Squadra"),t.qZA(),t.TgZ(112,"mat-select",40),t.NdJ("selectionChange",function(r){return i.filterByColumnValueTeam(r.value)}),t.YNc(113,Xt,2,2,"mat-option",22),t.TgZ(114,"mat-option",47)(115,"b"),t._uU(116,"Qualsiasi"),t.qZA()()()(),t.TgZ(117,"mat-form-field",45)(118,"mat-label"),t._uU(119,"Rating"),t.qZA(),t.TgZ(120,"mat-select",40),t.NdJ("selectionChange",function(r){return i.filterByColumnValueRating(r.value)}),t.YNc(121,te,2,2,"mat-option",22),t.TgZ(122,"mat-option",47)(123,"b"),t._uU(124,"Qualsiasi"),t.qZA()()()(),t.TgZ(125,"mat-form-field",23)(126,"mat-label"),t._uU(127,"Valore min"),t.qZA(),t.TgZ(128,"input",48),t.NdJ("keyup",function(r){return i.filterByColumnValueMantra(r)}),t.qZA()()(),t.TgZ(129,"form",16)(130,"mat-checkbox",49),t.NdJ("ngModelChange",function(r){return i.areSimpleRoles=r})("change",function(){return i.onCheckboxChange()}),t._uU(131,"Ruoli Migliori"),t.qZA(),t.TgZ(132,"mat-checkbox",50),t.NdJ("ngModelChange",function(r){return i.firstTeamFilter=r})("change",function(){return i.switchFirstTeamFilter()}),t._uU(133,"Titolari"),t.qZA(),t.TgZ(134,"mat-checkbox",51),t.NdJ("ngModelChange",function(r){return i.penaltyTakerFilter=r})("change",function(){return i.switchPenaltyTakerFilter()}),t._uU(135,"Rigoristi"),t.qZA(),t.TgZ(136,"mat-checkbox",52),t.NdJ("ngModelChange",function(r){return i.freeKickTakerFilter=r})("change",function(){return i.switchFreeKickTakerFilter()}),t._uU(137,"Tiratori"),t.qZA(),t.TgZ(138,"mat-checkbox",53),t.NdJ("ngModelChange",function(r){return i.injuredFilter=r})("change",function(){return i.switchInjuredFilter()}),t._uU(139,"Infortunati"),t.qZA()(),t.TgZ(140,"form",16)(141,"button",54),t.NdJ("click",function(){return i.deleteFilters()}),t._uU(142," Cancella Tutti i Filtri "),t.TgZ(143,"span",32),t._UZ(144,"i",55),t.qZA()()()()()(),t._UZ(145,"br"),t.qZA(),t.TgZ(146,"div",56)(147,"table",57),t.ynx(148,58),t.YNc(149,ee,2,0,"th",59),t.YNc(150,le,3,2,"td",60),t.YNc(151,ce,1,0,"td",61),t.BQk(),t.ynx(152,62),t.YNc(153,ue,2,0,"th",59),t.YNc(154,me,3,1,"td",60),t.YNc(155,pe,4,1,"td",61),t.BQk(),t.ynx(156,63),t.YNc(157,de,2,0,"th",59),t.YNc(158,_e,2,1,"td",60),t.YNc(159,fe,1,0,"td",61),t.BQk(),t.ynx(160,64),t.YNc(161,he,3,0,"th",59),t.YNc(162,be,2,1,"td",60),t.YNc(163,Te,1,0,"td",61),t.BQk(),t.ynx(164,65),t.YNc(165,Ce,2,0,"th",66),t.YNc(166,Ze,2,1,"td",60),t.YNc(167,xe,1,0,"td",61),t.BQk(),t.ynx(168,67),t.YNc(169,ve,2,0,"th",59),t.YNc(170,Ae,3,1,"td",60),t.YNc(171,we,1,0,"td",61),t.BQk(),t.ynx(172,68),t.YNc(173,Se,2,0,"th",59),t.YNc(174,Ue,3,2,"td",60),t.YNc(175,Fe,1,0,"td",61),t.BQk(),t.ynx(176,69),t.YNc(177,qe,2,0,"th",59),t.YNc(178,Qe,3,2,"td",60),t.YNc(179,Le,1,0,"td",61),t.BQk(),t.ynx(180,70),t.YNc(181,Be,2,0,"th",66),t.YNc(182,ze,5,4,"td",60),t.YNc(183,We,1,0,"td",61),t.BQk(),t.ynx(184,71),t.YNc(185,Ke,1,0,"th",59),t.YNc(186,tn,3,2,"td",60),t.YNc(187,en,1,0,"td",61),t.BQk(),t.YNc(188,nn,1,0,"tr",72),t.YNc(189,on,1,0,"tr",73),t.YNc(190,an,3,0,"tr",74),t.YNc(191,rn,1,0,"tr",75),t.qZA(),t._UZ(192,"mat-paginator",76),t.qZA(),t.TgZ(193,"div",77),t._UZ(194,"nav",78),t.qZA()()()()(),t.TgZ(195,"mat-tab"),t.YNc(196,sn,3,0,"ng-template",4),t._UZ(197,"br"),t.TgZ(198,"mat-grid-list",79)(199,"mat-grid-tile")(200,"mat-card",80)(201,"mat-card-content",81)(202,"h5",82),t._uU(203," Migliore Formazione modulo "),t.qZA(),t.TgZ(204,"mat-form-field")(205,"mat-select",83,27),t.NdJ("selectionChange",function(){return i.updateBestEleven()})("ngModelChange",function(r){return i.formationChosen=r}),t.YNc(207,ln,2,2,"mat-option",22),t.qZA()(),t.YNc(208,vn,15,1,"table",84),t.qZA()()()(),t._UZ(209,"br"),t.TgZ(210,"mat-grid-list",85)(211,"mat-grid-tile")(212,"mat-card",80)(213,"mat-card-content",81)(214,"h5",82),t._uU(215," Squadre giocatori migliori "),t.qZA(),t.TgZ(216,"div",81),t._UZ(217,"canvas",86),t.qZA()()()(),t.TgZ(218,"mat-grid-tile")(219,"mat-card",80)(220,"mat-card-content",81)(221,"h5",82),t._uU(222," Formazioni Migliori "),t.qZA(),t.TgZ(223,"div",87),t.YNc(224,kn,11,1,"table",84),t.qZA()()()(),t.TgZ(225,"mat-grid-tile")(226,"mat-card",80)(227,"mat-card-content",81)(228,"h5",82),t._uU(229," Analisi Ruolo "),t.qZA(),t.TgZ(230,"div",87),t.YNc(231,Kn,13,1,"table",84),t.qZA()()()()()(),t.TgZ(232,"mat-tab"),t.YNc(233,Hn,3,0,"ng-template",4),t.TgZ(234,"div")(235,"div")(236,"div",7)(237,"div",9),t._UZ(238,"br"),t.TgZ(239,"button",88),t.NdJ("click",function(){return i.downloadCSV()}),t.TgZ(240,"span",32),t._uU(241,"Salva .CSV "),t._UZ(242,"i",89),t.qZA()(),t.TgZ(243,"input",90,91),t.NdJ("change",function(r){return i.onFileChange(r)}),t.qZA(),t.TgZ(245,"button",92),t.NdJ("click",function(){t.CHM(l);const r=t.MAs(244);return t.KtG(r.click())}),t.TgZ(246,"span",32),t._uU(247,"Carica .CSV "),t._UZ(248,"i",93),t.qZA()(),t.TgZ(249,"button",94),t.NdJ("click",function(){return i.openConfirmationDialogLoadCSV()}),t.TgZ(250,"span",32),t._uU(251,"Ripristina DB "),t._UZ(252,"i",95),t.qZA()(),t.TgZ(253,"button",31),t.NdJ("click",function(){return i.openConfirmationDialogReloadTeams()}),t.TgZ(254,"span",32),t._uU(255,"Crea squadre casuali"),t._UZ(256,"i",96),t.qZA()(),t.TgZ(257,"button",31),t.NdJ("click",function(){return i.openImageModal()}),t._uU(258,"Ricordami i moduli "),t.TgZ(259,"span",32),t._UZ(260,"i",33),t.qZA()(),t.TgZ(261,"div",34)(262,"span",35),t.NdJ("click",function(){return i.closeImageModal()}),t._uU(263,"\xd7"),t.qZA(),t._UZ(264,"img",36),t.qZA()()()()()()(),t._UZ(265,"div",97)}if(2&e){const l=t.MAs(41),c=t.MAs(101);t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(8),t.Q6J("ngForOf",i.getDistinctTeamsKeysTeamsOnly()),t.xp6(15),t.Q6J("ngIf",i.amountRemaining<50),t.xp6(1),t.Q6J("ngIf",i.amountRemaining>=50),t.xp6(3),t.hij(" ",i.getNumPlayers()," "),t.xp6(2),t.Q6J("ngIf",i.highestFormation.rolesToBuy.length>=5),t.xp6(1),t.Q6J("ngIf",i.highestFormation.rolesToBuy.length<5),t.xp6(5),t.Q6J("formControl",i.myControlAdder)("matAutocomplete",l),t.xp6(4),t.Q6J("ngForOf",i.addPlayerAutocompleteOptions),t.xp6(4),t.Q6J("formControl",i.myControlAdderPrice),t.xp6(5),t.Q6J("formControl",i.myControlAdderTeam),t.xp6(2),t.Q6J("ngForOf",i.getDistinctTeamsKeysTeamsOnly()),t.xp6(5),t.Q6J("ngModel",i.teamCandidate),t.xp6(4),t.Q6J("ngModel",i.ratingCandidate),t.xp6(4),t.Q6J("ngModel",i.roleCandidate),t.xp6(24),t.Q6J("formControl",i.inputsquadsrc),t.xp6(1),t.Q6J("ngForOf",i.getDistinctTeamsKeys()),t.xp6(7),t.Q6J("formControl",i.myControl)("matAutocomplete",c),t.xp6(4),t.Q6J("ngForOf",i.searchFilterOptions),t.xp6(4),t.Q6J("ngIf",i.areSimpleRoles),t.xp6(1),t.Q6J("ngIf",!i.areSimpleRoles),t.xp6(5),t.Q6J("formControl",i.inputteamsrc),t.xp6(1),t.Q6J("ngForOf",i.getDistinctValues("team")),t.xp6(7),t.Q6J("formControl",i.inputratingsrc),t.xp6(1),t.Q6J("ngForOf",i.getDistinctValues("rating")),t.xp6(7),t.Q6J("formControl",i.inputvaluesrc),t.xp6(2),t.Q6J("ngModel",i.areSimpleRoles),t.xp6(2),t.Q6J("ngModel",i.firstTeamFilter),t.xp6(2),t.Q6J("ngModel",i.penaltyTakerFilter),t.xp6(2),t.Q6J("ngModel",i.freeKickTakerFilter),t.xp6(2),t.Q6J("ngModel",i.injuredFilter),t.xp6(9),t.Q6J("dataSource",i.dataSource),t.xp6(41),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("matFooterRowDef",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(49,Xn)),t.xp6(13),t.Q6J("ngModel",i.formationChosen),t.xp6(2),t.Q6J("ngForOf",i.formationNames),t.xp6(1),t.Q6J("ngIf",i.getBestEleven()),t.xp6(9),t.Q6J("type","pie")("datasets",i.pieChartDatasets)("labels",i.pieChartLabels)("options",i.pieChartOptions)("plugins",i.pieChartPlugins)("legend",i.pieChartLegend),t.xp6(7),t.Q6J("ngIf",i.computedFormations),t.xp6(7),t.Q6J("ngIf",i.roleInfo.Por)}},dependencies:[mt.sg,mt.O5,C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.c5,C.On,C.F,y.BZ,y.fO,y.as,y.w1,y.Dz,y.nj,y.mD,y.Ke,y.ge,y.ev,y.yh,y.XQ,y.Gk,y.Q2,y.Ee,a.XC,a.ZL,u.ey,m.TO,m.KE,m.hX,f.Nt,C.oH,pt.NW,nt.YE,nt.nU,b.gD,x.gM,M.Il,M.DX,D.a8,D.dn,d.pp,ht.lW,E.oG,w.jh,h.SP,h.uD,h.uX,z.Ou,lt],styles:["table[_ngcontent-%COMP%]{width:100%;justify-content:center;align-items:center}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.example-chart[_ngcontent-%COMP%]{width:100%;height:100%}.example-form[_ngcontent-%COMP%]{width:100%;margin-top:6px;display:flex;flex-direction:row;justify-content:center;align-items:center}.example-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{padding:0 10px}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.my-card[_ngcontent-%COMP%]{width:100%;justify-content:center;align-items:center;display:flex;flex:0 0 calc(50% - 10px);margin-bottom:20px}.analysis-card[_ngcontent-%COMP%]{width:100%;justify-content:center;align-items:center;display:flex;margin-bottom:20px}@media (max-width: 767px){.my-card[_ngcontent-%COMP%]{flex:0 0 100%;margin-left:0;margin-right:0}}.btn-reset[_ngcontent-%COMP%]{width:50%;justify-content:center;align-items:center;display:flex;flex-direction:row}.example-full-width[_ngcontent-%COMP%]{width:80%}.player-field[_ngcontent-%COMP%]{width:50%}.team-field[_ngcontent-%COMP%]{width:30%}.value-field[_ngcontent-%COMP%]{width:25%}.role-field[_ngcontent-%COMP%]{width:20%}.squad-edit[_ngcontent-%COMP%]{max-width:80px}.rating-edit[_ngcontent-%COMP%]{max-width:50px}.hidden-file-input[_ngcontent-%COMP%]{display:none}.mat-raised-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%], .mat-button[_ngcontent-%COMP%]{min-width:16px!important;line-height:26px!important;padding:0 8px!important}mat-checkbox[_ngcontent-%COMP%]{margin-right:20px}.example-form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{line-height:normal}.responsive-image[_ngcontent-%COMP%]{max-width:100%;height:auto;display:block}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1;padding-top:100px;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0009}.modal-content[_ngcontent-%COMP%]{margin:auto;display:block;width:80%;max-width:700px}.close[_ngcontent-%COMP%]{position:absolute;top:15px;right:35px;color:#fff;font-size:40px;font-weight:700;transition:.3s}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{color:#bbb;text-decoration:none;cursor:pointer}.mat-row[_ngcontent-%COMP%]{height:32px!important}.smallcell[_ngcontent-%COMP%]{padding:0;max-width:16px!important;font-size:12px;justify-content:center;align-items:center;text-align:center}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1000;display:flex;justify-content:center;align-items:center}"]}),n})();var ei=Z(7556);const ni=[{path:"tables",component:ti,canActivate:[(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){var l=this;return(0,V.Z)(function*(){return!!(yield l.authService.isAuthenticated())||l.router.parseUrl("/login")})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(ei.e),t.LFG(Ct.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]}];var ii=Z(5454),oi=Z(5415);let ai=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[At],imports:[mt.ez,Ct.Bz.forChild(ni),C.u5,Tt.JF,ii.IJ,T,oi.T,y.p0,a.Bb,m.lN,f.c,C.UX,pt.TU,nt.JX,a.Bb,Tt.JF,b.LD,x.AV,M.N6,D.QW,d.To,ot.Is,ht.ot,E.p9,w.vQ,h.Nh,z.Cq,s.ZX]}),n})()},3028:function(qt,It){var Z,Ct;Z=function mt(){"use strict";var C=typeof self<"u"?self:typeof window<"u"?window:void 0!==C?C:{},t=!C.document&&!!C.postMessage,Nt=C.IS_PAPA_WORKER||!1,xt={},Et=0,T={parse:function(s,a){var u=(a=a||{}).dynamicTyping||!1;if(w(u)&&(a.dynamicTypingFunction=u,u={}),a.dynamicTyping=u,a.transform=!!w(a.transform)&&a.transform,a.worker&&T.WORKERS_SUPPORTED){var m=function(){if(!T.WORKERS_SUPPORTED)return!1;var M,D,b=(M=C.URL||C.webkitURL||null,D=mt.toString(),T.BLOB_URL||(T.BLOB_URL=M.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))),x=new C.Worker(b);return x.onmessage=Ft,x.id=Et++,xt[x.id]=x}();return m.userStep=a.step,m.userChunk=a.chunk,m.userComplete=a.complete,m.userError=a.error,a.step=w(a.step),a.chunk=w(a.chunk),a.complete=w(a.complete),a.error=w(a.error),delete a.worker,void m.postMessage({input:s,config:a,workerId:m.id})}var b,f=null;return"string"==typeof s?(s=65279===(b=s).charCodeAt(0)?b.slice(1):b,f=a.download?new pt(a):new y(a)):!0===s.readable&&w(s.read)&&w(s.on)?f=new dt(a):(C.File&&s instanceof File||s instanceof Object)&&(f=new nt(a)),f.stream(s)},unparse:function(s,a){var u=!1,m=!0,f=",",b="\r\n",x='"',M=x+x,D=!1,d=null,E=!1;!function(){if("object"==typeof a){if("string"!=typeof a.delimiter||T.BAD_DELIMITERS.filter(function(_){return-1!==a.delimiter.indexOf(_)}).length||(f=a.delimiter),("boolean"==typeof a.quotes||"function"==typeof a.quotes||Array.isArray(a.quotes))&&(u=a.quotes),"boolean"!=typeof a.skipEmptyLines&&"string"!=typeof a.skipEmptyLines||(D=a.skipEmptyLines),"string"==typeof a.newline&&(b=a.newline),"string"==typeof a.quoteChar&&(x=a.quoteChar),"boolean"==typeof a.header&&(m=a.header),Array.isArray(a.columns)){if(0===a.columns.length)throw new Error("Option columns is empty");d=a.columns}void 0!==a.escapeChar&&(M=a.escapeChar+x),("boolean"==typeof a.escapeFormulae||a.escapeFormulae instanceof RegExp)&&(E=a.escapeFormulae instanceof RegExp?a.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var h=new RegExp(bt(x),"g");if("string"==typeof s&&(s=JSON.parse(s)),Array.isArray(s)){if(!s.length||Array.isArray(s[0]))return z(null,s,D);if("object"==typeof s[0])return z(d||Object.keys(s[0]),s,D)}else if("object"==typeof s)return"string"==typeof s.data&&(s.data=JSON.parse(s.data)),Array.isArray(s.data)&&(s.fields||(s.fields=s.meta&&s.meta.fields||d),s.fields||(s.fields=Array.isArray(s.data[0])?s.fields:"object"==typeof s.data[0]?Object.keys(s.data[0]):[]),Array.isArray(s.data[0])||"object"==typeof s.data[0]||(s.data=[s.data])),z(s.fields||[],s.data||[],D);throw new Error("Unable to serialize unrecognized input");function z(_,U,B){var O="";"string"==typeof _&&(_=JSON.parse(_)),"string"==typeof U&&(U=JSON.parse(U));var Q=Array.isArray(_)&&0<_.length,P=!Array.isArray(U[0]);if(Q&&m){for(var Y=0;Y<_.length;Y++)0<Y&&(O+=f),O+=L(_[Y],Y);0<U.length&&(O+=b)}for(var g=0;g<U.length;g++){var A=Q?_.length:U[g].length,F=!1,J=Q?0===Object.keys(U[g]).length:0===U[g].length;if(B&&!Q&&(F="greedy"===B?""===U[g].join("").trim():1===U[g].length&&0===U[g][0].length),"greedy"===B&&Q){for(var I=[],j=0;j<A;j++)I.push(U[g][P?_[j]:j]);F=""===I.join("").trim()}if(!F){for(var N=0;N<A;N++)0<N&&!J&&(O+=f),O+=L(U[g][Q&&P?_[N]:N],N);g<U.length-1&&(!B||0<A&&!J)&&(O+=b)}}return O}function L(_,U){if(null==_)return"";if(_.constructor===Date)return JSON.stringify(_).slice(1,25);var B=!1;E&&"string"==typeof _&&E.test(_)&&(_="'"+_,B=!0);var O=_.toString().replace(h,M);return(B=B||!0===u||"function"==typeof u&&u(_,U)||Array.isArray(u)&&u[U]||function(Q,P){for(var Y=0;Y<P.length;Y++)if(-1<Q.indexOf(P[Y]))return!0;return!1}(O,T.BAD_DELIMITERS)||-1<O.indexOf(f)||" "===O.charAt(0)||" "===O.charAt(O.length-1))?x+O+x:O}}};if(T.RECORD_SEP=String.fromCharCode(30),T.UNIT_SEP=String.fromCharCode(31),T.BYTE_ORDER_MARK="\ufeff",T.BAD_DELIMITERS=["\r","\n",'"',T.BYTE_ORDER_MARK],T.WORKERS_SUPPORTED=!t&&!!C.Worker,T.NODE_STREAM_INPUT=1,T.LocalChunkSize=10485760,T.RemoteChunkSize=5242880,T.DefaultDelimiter=",",T.Parser=vt,T.ParserHandle=Dt,T.NetworkStreamer=pt,T.FileStreamer=nt,T.StringStreamer=y,T.ReadableStreamStreamer=dt,C.jQuery){var V=C.jQuery;V.fn.parse=function(s){var a=s.config||{},u=[];return this.each(function(b){if("INPUT"!==V(this).prop("tagName").toUpperCase()||"file"!==V(this).attr("type").toLowerCase()||!C.FileReader||!this.files||0===this.files.length)return!0;for(var x=0;x<this.files.length;x++)u.push({file:this.files[x],inputElem:this,instanceConfig:V.extend({},a)})}),m(),this;function m(){if(0!==u.length){var x,M,D,d=u[0];if(w(s.before)){var E=s.before(d.file,d.inputElem);if("object"==typeof E){if("abort"===E.action)return"AbortError",x=d.file,M=d.inputElem,D=E.reason,void(w(s.error)&&s.error({name:"AbortError"},x,M,D));if("skip"===E.action)return void f();"object"==typeof E.config&&(d.instanceConfig=V.extend(d.instanceConfig,E.config))}else if("skip"===E)return void f()}var h=d.instanceConfig.complete;d.instanceConfig.complete=function(z){w(h)&&h(z,d.file,d.inputElem),f()},T.parse(d.file,d.instanceConfig)}else w(s.complete)&&s.complete()}function f(){u.splice(0,1),m()}}}function tt(s){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(a){var u=ht(a);u.chunkSize=parseInt(u.chunkSize),a.step||a.chunk||(u.chunkSize=null),this._handle=new Dt(u),(this._handle.streamer=this)._config=u}.call(this,s),this.parseChunk=function(a,u){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var m=this._config.beforeFirstChunk(a);void 0!==m&&(a=m)}this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+a;this._partialLine="";var b=this._handle.parse(f,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var x=b.meta.cursor;this._finished||(this._partialLine=f.substring(x-this._baseIndex),this._baseIndex=x),b&&b.data&&(this._rowCount+=b.data.length);var M=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(Nt)C.postMessage({results:b,workerId:T.WORKER_ID,finished:M});else if(w(this._config.chunk)&&!u){if(this._config.chunk(b,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);b=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(b.data),this._completeResults.errors=this._completeResults.errors.concat(b.errors),this._completeResults.meta=b.meta),this._completed||!M||!w(this._config.complete)||b&&b.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),M||b&&b.meta.paused||this._nextChunk(),b}this._halted=!0},this._sendError=function(a){w(this._config.error)?this._config.error(a):Nt&&this._config.error&&C.postMessage({workerId:T.WORKER_ID,error:a,finished:!1})}}function pt(s){var a;(s=s||{}).chunkSize||(s.chunkSize=T.RemoteChunkSize),tt.call(this,s),this._nextChunk=t?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(u){this._input=u,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),t||(a.onload=at(this._chunkLoaded,this),a.onerror=at(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!t),this._config.downloadRequestHeaders){var u=this._config.downloadRequestHeaders;for(var m in u)a.setRequestHeader(m,u[m])}this._config.chunkSize&&a.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{a.send(this._config.downloadRequestBody)}catch(b){this._chunkError(b.message)}t&&0===a.status&&this._chunkError()}},this._chunkLoaded=function(){var m;4===a.readyState&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(m=a.getResponseHeader("Content-Range"))?-1:parseInt(m.substring(m.lastIndexOf("/")+1))),this.parseChunk(a.responseText)))},this._chunkError=function(u){this._sendError(new Error(a.statusText||u))}}function nt(s){var a,u;(s=s||{}).chunkSize||(s.chunkSize=T.LocalChunkSize),tt.call(this,s);var m=typeof FileReader<"u";this.stream=function(f){this._input=f,u=f.slice||f.webkitSlice||f.mozSlice,m?((a=new FileReader).onload=at(this._chunkLoaded,this),a.onerror=at(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var f=this._input;if(this._config.chunkSize){var b=Math.min(this._start+this._config.chunkSize,this._input.size);f=u.call(f,this._start,b)}var x=a.readAsText(f,this._config.encoding);m||this._chunkLoaded({target:{result:x}})},this._chunkLoaded=function(f){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(f.target.result)},this._chunkError=function(){this._sendError(a.error)}}function y(s){var a;tt.call(this,s=s||{}),this.stream=function(u){return a=u,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var u,m=this._config.chunkSize;return m?(u=a.substring(0,m),a=a.substring(m)):(u=a,a=""),this._finished=!a,this.parseChunk(u)}}}function dt(s){tt.call(this,s=s||{});var a=[],u=!0,m=!1;this.pause=function(){tt.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){tt.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(f){this._input=f,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){m&&1===a.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):u=!0},this._streamData=at(function(f){try{a.push("string"==typeof f?f:f.toString(this._config.encoding)),u&&(u=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(b){this._streamError(b)}},this),this._streamError=at(function(f){this._streamCleanUp(),this._sendError(f)},this),this._streamEnd=at(function(){this._streamCleanUp(),m=!0,this._streamData("")},this),this._streamCleanUp=at(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Dt(s){var a,u,m,f=Math.pow(2,53),b=-f,x=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,M=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,d=0,E=0,h=!1,z=!1,L=[],_={data:[],errors:[],meta:{}};if(w(s.step)){var U=s.step;s.step=function(g){if(_=g,Q())O();else{if(O(),0===_.data.length)return;d+=g.data.length,s.preview&&d>s.preview?u.abort():(_.data=_.data[0],U(_,D))}}}function B(g){return"greedy"===s.skipEmptyLines?""===g.join("").trim():1===g.length&&0===g[0].length}function O(){return _&&m&&(Y("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+T.DefaultDelimiter+"'"),m=!1),s.skipEmptyLines&&(_.data=_.data.filter(function(g){return!B(g)})),Q()&&function(){if(_)if(Array.isArray(_.data[0])){for(var A=0;Q()&&A<_.data.length;A++)_.data[A].forEach(g);_.data.splice(0,1)}else _.data.forEach(g);function g(F,J){w(s.transformHeader)&&(F=s.transformHeader(F,J)),L.push(F)}}(),function(){if(!_||!s.header&&!s.dynamicTyping&&!s.transform)return _;function g(F,J){var I,j=s.header?{}:[];for(I=0;I<F.length;I++){var R=I,N=F[I];s.header&&(R=I>=L.length?"__parsed_extra":L[I]),s.transform&&(N=s.transform(N,R)),N=P(R,N),"__parsed_extra"===R?(j[R]=j[R]||[],j[R].push(N)):j[R]=N}return s.header&&(I>L.length?Y("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+I,E+J):I<L.length&&Y("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+I,E+J)),j}var A=1;return!_.data.length||Array.isArray(_.data[0])?(_.data=_.data.map(g),A=_.data.length):_.data=g(_.data,0),s.header&&_.meta&&(_.meta.fields=L),E+=A,_}()}function Q(){return s.header&&0===L.length}function P(g,A){return F=g,s.dynamicTypingFunction&&void 0===s.dynamicTyping[F]&&(s.dynamicTyping[F]=s.dynamicTypingFunction(F)),!0===(s.dynamicTyping[F]||s.dynamicTyping)?"true"===A||"TRUE"===A||"false"!==A&&"FALSE"!==A&&(function(J){if(x.test(J)){var I=parseFloat(J);if(b<I&&I<f)return!0}return!1}(A)?parseFloat(A):M.test(A)?new Date(A):""===A?null:A):A;var F}function Y(g,A,F,J){var I={type:g,code:A,message:F};void 0!==J&&(I.row=J),_.errors.push(I)}this.parse=function(g,A,F){if(s.newline||(s.newline=function(R,N){R=R.substring(0,1048576);var et=new RegExp(bt(N)+"([^]*?)"+bt(N),"gm"),W=(R=R.replace(et,"")).split("\r"),it=R.split("\n");if(1===W.length||1<it.length&&it[0].length<W[0].length)return"\n";for(var K=0,q=0;q<W.length;q++)"\n"===W[q][0]&&K++;return K>=W.length/2?"\r\n":"\r"}(g,s.quoteChar||'"')),m=!1,s.delimiter)w(s.delimiter)&&(s.delimiter=s.delimiter(g),_.meta.delimiter=s.delimiter);else{var I=function(R,N,et,W,it){var rt,K,q,k;it=it||[",","\t","|",";",T.RECORD_SEP,T.UNIT_SEP];for(var _t=0;_t<it.length;_t++){var S=it[_t],gt=0,st=0,ft=0;q=void 0;for(var lt=new vt({comments:W,delimiter:S,newline:N,preview:10}).parse(R),ct=0;ct<lt.data.length;ct++)if(et&&B(lt.data[ct]))ft++;else{var ut=lt.data[ct].length;st+=ut,void 0!==q?0<ut&&(gt+=Math.abs(ut-q),q=ut):q=ut}0<lt.data.length&&(st/=lt.data.length-ft),(void 0===K||gt<=K)&&(void 0===k||k<st)&&1.99<st&&(K=gt,rt=S,k=st)}return{successful:!!(s.delimiter=rt),bestDelimiter:rt}}(g,s.newline,s.skipEmptyLines,s.comments,s.delimitersToGuess);I.successful?s.delimiter=I.bestDelimiter:(m=!0,s.delimiter=T.DefaultDelimiter),_.meta.delimiter=s.delimiter}var j=ht(s);return s.preview&&s.header&&j.preview++,a=g,u=new vt(j),_=u.parse(a,A,F),O(),h?{meta:{paused:!0}}:_||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,u.abort(),a=w(s.chunk)?"":a.substring(u.getCharIndex())},this.resume=function(){D.streamer._halted?(h=!1,D.streamer.parseChunk(a,!0)):setTimeout(D.resume,3)},this.aborted=function(){return z},this.abort=function(){z=!0,u.abort(),_.meta.aborted=!0,w(s.complete)&&s.complete(_),a=""}}function bt(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vt(s){var a,u=(s=s||{}).delimiter,m=s.newline,f=s.comments,b=s.step,x=s.preview,M=s.fastMode,D=a=s.quoteChar??'"';if(void 0!==s.escapeChar&&(D=s.escapeChar),("string"!=typeof u||-1<T.BAD_DELIMITERS.indexOf(u))&&(u=","),f===u)throw new Error("Comment character same as delimiter");!0===f?f="#":("string"!=typeof f||-1<T.BAD_DELIMITERS.indexOf(f))&&(f=!1),"\n"!==m&&"\r"!==m&&"\r\n"!==m&&(m="\n");var d=0,E=!1;this.parse=function(h,z,L){if("string"!=typeof h)throw new Error("Input must be a string");var _=h.length,U=u.length,B=m.length,O=f.length,Q=w(b),P=[],Y=[],g=[],A=d=0;if(!h)return H();if(s.header&&!z){var F=h.split(m)[0].split(u),J=[],I={},j=!1;for(var R in F){var N=F[R];w(s.transformHeader)&&(N=s.transformHeader(N,R));var et=N,W=I[N]||0;for(0<W&&(j=!0,et=N+"_"+W),I[N]=W+1;J.includes(et);)et=et+"_"+W;J.push(et)}if(j){var it=h.split(m);it[0]=J.join(u),h=it.join(m)}}if(M||!1!==M&&-1===h.indexOf(a)){for(var rt=h.split(m),K=0;K<rt.length;K++){if(d+=(g=rt[K]).length,K!==rt.length-1)d+=m.length;else if(L)return H();if(!f||g.substring(0,O)!==f){if(Q){if(P=[],ft(g.split(u)),yt(),E)return H()}else ft(g.split(u));if(x&&x<=K)return P=P.slice(0,x),H(!0)}}return H()}for(var q=h.indexOf(u,d),k=h.indexOf(m,d),_t=new RegExp(bt(D)+bt(a),"g"),S=h.indexOf(a,d);;)if(h[d]!==a)if(f&&0===g.length&&h.substring(d,d+O)===f){if(-1===k)return H();k=h.indexOf(m,d=k+B),q=h.indexOf(u,d)}else if(-1!==q&&(q<k||-1===k))g.push(h.substring(d,q)),q=h.indexOf(u,d=q+U);else{if(-1===k)break;if(g.push(h.substring(d,k)),ut(k+B),Q&&(yt(),E))return H();if(x&&P.length>=x)return H(!0)}else for(S=d,d++;;){if(-1===(S=h.indexOf(a,S+1)))return L||Y.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:P.length,index:d}),ct();if(S===_-1)return ct(h.substring(d,S).replace(_t,a));if(a!==D||h[S+1]!==D){if(a===D||0===S||h[S-1]!==D){-1!==q&&q<S+1&&(q=h.indexOf(u,S+1)),-1!==k&&k<S+1&&(k=h.indexOf(m,S+1));var gt=lt(-1===k?q:Math.min(q,k));if(h.substr(S+1+gt,U)===u){g.push(h.substring(d,S).replace(_t,a)),h[d=S+1+gt+U]!==a&&(S=h.indexOf(a,d)),q=h.indexOf(u,d),k=h.indexOf(m,d);break}var st=lt(k);if(h.substring(S+1+st,S+1+st+B)===m){if(g.push(h.substring(d,S).replace(_t,a)),ut(S+1+st+B),q=h.indexOf(u,d),S=h.indexOf(a,d),Q&&(yt(),E))return H();if(x&&P.length>=x)return H(!0);break}Y.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:P.length,index:d}),S++}}else S++}return ct();function ft(X){P.push(X),A=d}function lt(X){var Ut=0;if(-1!==X){var wt=h.substring(S+1,X);wt&&""===wt.trim()&&(Ut=wt.length)}return Ut}function ct(X){return L||(void 0===X&&(X=h.substring(d)),g.push(X),d=_,ft(g),Q&&yt()),H()}function ut(X){d=X,ft(g),g=[],k=h.indexOf(m,d)}function H(X){return{data:P,errors:Y,meta:{delimiter:u,linebreak:m,aborted:E,truncated:!!X,cursor:A+(z||0)}}}function yt(){b(H()),P=[],Y=[]}},this.abort=function(){E=!0},this.getCharIndex=function(){return d}}function Ft(s){var a=s.data,u=xt[a.workerId],m=!1;if(a.error)u.userError(a.error,a.file);else if(a.results&&a.results.data){var f={abort:function(){m=!0,At(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ot,resume:ot};if(w(u.userStep)){for(var b=0;b<a.results.data.length&&(u.userStep({data:a.results.data[b],errors:a.results.errors,meta:a.results.meta},f),!m);b++);delete a.results}else w(u.userChunk)&&(u.userChunk(a.results,f,a.file),delete a.results)}a.finished&&!m&&At(a.workerId,a.results)}function At(s,a){var u=xt[s];w(u.userComplete)&&u.userComplete(a),u.terminate(),delete xt[s]}function ot(){throw new Error("Not implemented.")}function ht(s){if("object"!=typeof s||null===s)return s;var a=Array.isArray(s)?[]:{};for(var u in s)a[u]=ht(s[u]);return a}function at(s,a){return function(){s.apply(a,arguments)}}function w(s){return"function"==typeof s}return Nt&&(C.onmessage=function(s){var a=s.data;if(void 0===T.WORKER_ID&&a&&(T.WORKER_ID=a.workerId),"string"==typeof a.input)C.postMessage({workerId:T.WORKER_ID,results:T.parse(a.input,a.config),finished:!0});else if(C.File&&a.input instanceof File||a.input instanceof Object){var u=T.parse(a.input,a.config);u&&C.postMessage({workerId:T.WORKER_ID,results:u,finished:!0})}}),(pt.prototype=Object.create(tt.prototype)).constructor=pt,(nt.prototype=Object.create(tt.prototype)).constructor=nt,(y.prototype=Object.create(y.prototype)).constructor=y,(dt.prototype=Object.create(tt.prototype)).constructor=dt,T},void 0!==(Ct=Z.apply(It,[]))&&(qt.exports=Ct)}}]);