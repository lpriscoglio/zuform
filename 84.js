(self.webpackChunkargon_dashboard_angular=self.webpackChunkargon_dashboard_angular||[]).push([[84],{6084:(Rt,wt,Z)=>{"use strict";Z.r(wt),Z.d(wt,{AdminLayoutModule:()=>fi});var Ct=Z(529),xt=Z(4102),pt=Z(6895),x=Z(433),t=Z(1571);let C=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[pt.ez]]}),n})();var G=Z(5861),tt=Z(3028),dt=Z(8739),nt=Z(6308),y=Z(7155);class _t{constructor(o){if(this.DICTIONARY_BEST_ROLES={"Dd;E":{role:"Dd;E",best_role:"Dd"},"Ds;E":{role:"Ds;E",best_role:"Ds"},"Dd;Dc":{role:"Dd;Dc",best_role:"Dc"},"Dd;Ds;Dc":{role:"Dd;Ds;Dc",best_role:"Dc"},"Dd;Ds;E":{role:"Dd;Ds;E",best_role:"Dd;Ds"},"Ds;Dc":{role:"Ds;Dc",best_role:"Dc"},"W;A":{role:"W;A",best_role:"W"},"C;T":{role:"C;T",best_role:"C"},"T;A":{role:"T;A",best_role:"T"},"W;T":{role:"W;T",best_role:"W;T"},"M;C":{role:"M;C",best_role:"M"},"E;W":{role:"E;W",best_role:"E"},"C;W;T":{role:"C;W;T",best_role:"C"},"E;C":{role:"E;C",best_role:"E"},"E;M":{role:"E;M",best_role:"E;M"},"W;T;A":{role:"W;T;A",best_role:"W;T"}},!(o&&o.id&&o.name&&o.team))throw new Error("Essential fields are missing to create a Player instance.");this.id=parseInt(o?.id)||0,this.name=o?.name||"",this.team=o?.team||"",this.ruolo_classic=o?.ruolo_classic||"",this.role_mantra=o?.role_mantra||[o.role_1_mantra,o?.role_2_mantra,o?.role_3_mantra].filter(e=>Boolean(e)).join(";"),this.best_role_mantra=this.getBestRoleValues(o?.role_mantra||[o.role_1_mantra,o?.role_2_mantra,o?.role_3_mantra].filter(e=>Boolean(e)).join(";")),this.curr_value_classic=parseInt(o?.curr_value_classic)||0,this.base_value_classic=parseInt(o?.base_value_classic)||0,this.curr_value_mantra=parseInt(o?.curr_value_mantra)||0,this.base_value_mantra=parseInt(o?.base_value_mantra)||0,this.value_classic_1000=parseInt(o?.value_classic_1000)||0,this.value_mantra_1000=parseInt(o?.value_mantra_1000)||0,this.rating=o?.rating||"",this.first_team=o?.first_team||"",this.penalty_taker=o?.penalty_taker||"",this.free_kick_taker=o?.free_kick_taker||"",this.injured=parseInt(o?.injured)||0,this.notes=o?.notes||"",this.isEdit=null!=o?.isEdit&&"false"!==o?.isEdit&&o?.isEdit,this.price=parseInt(o?.price)||0,this.team_id=parseInt(o?.team_id)||0}getDisplayName(){return`${this.name} (${this.team})`}getBestRoleValues(o){return this.DICTIONARY_BEST_ROLES[o]?this.DICTIONARY_BEST_ROLES[o].best_role:o}}var Ut=Z(1135),Tt=Z(6805),vt=Z(930);let At=(()=>{class n{constructor(e){this.http=e,this.dataSubject=new Ut.X([]),this.dataTable$=this.dataSubject.asObservable(),this.initalizeStorage(),this.dataTable$.subscribe(i=>{localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(i))})}initalizeStorage(){var e=this;return(0,G.Z)(function*(){let i=e.getDataFromLocalStorage();(null==i||0===i.length)&&(console.log("Loading from CSV"),i=yield e.loadFromCSV()),e.dataSubject.next(i.filter(s=>void 0!==s))})()}resetDataToCSV(){var e=this;return(0,G.Z)(function*(){e.dataSubject.next(yield e.loadFromCSV())})()}resetDataToLocal(){var e=this;return(0,G.Z)(function*(){let i=e.getDataFromLocalStorage();e.dataSubject.next(i)})()}loadFromCSV(){var e=this;return(0,G.Z)(function*(){try{const i=yield function Ft(n,o){const e="object"==typeof o;return new Promise((i,s)=>{const l=new vt.Hp({next:u=>{i(u),l.unsubscribe()},error:s,complete:()=>{e?i(o.defaultValue):s(new Tt.K)}});n.subscribe(l)})}(e.http.get("assets/db.csv",{responseType:"text"}));let s=[];return tt.parse(i,{complete:l=>{s=l.data.map(u=>{try{return new _t(u)}catch(c){console.error(c.message)}}),console.log("Data refreshed from CSV: ",s)},header:!0}),localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(s)),s}catch(i){return console.log(i),[]}})()}setData(e){this.dataSubject.next(e)}updateField(e,i,s){const u=this.dataSubject.value.filter(c=>void 0!==c).map(c=>c.id===e?{...c,[i]:s}:c);this.dataSubject.next(u)}saveToLocalStorage(){localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(this.dataSubject.value))}getDataFromLocalStorage(){const e=localStorage.getItem(n.LOCAL_STORAGE_KEY);if(e){const s=JSON.parse(e).map(l=>{try{return new _t(l)}catch(u){console.error(u.message)}});return console.log("Data refreshed from LocalStorage: ",s),s}return[]}}return n.LOCAL_STORAGE_KEY="ZUFORM_PLAYERS_TABLE",n.\u0275fac=function(e){return new(e||n)(t.LFG(Ct.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ot=Z(5412),gt=Z(4859);let at=(()=>{class n{constructor(e,i){this.data=e,this.dialogRef=i,this.message="Are you sure?",this.confirmButtonText="Yes",this.cancelButtonText="No",e&&(this.message=e.message||this.message,e.buttonText&&(this.confirmButtonText=e.buttonText.ok||this.confirmButtonText,this.cancelButtonText=e.buttonText.cancel||this.cancelButtonText))}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ot.WI),t.Y36(ot.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confdialog"]],decls:10,vars:2,consts:[["mat-dialog-title",""],[1,"mat-typography"],["mat-button","",3,"click"],["mat-button","",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"h2",0),t._uU(1,"Sicuro? Perderai i dati."),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"p"),t._uU(4),t.qZA()(),t.TgZ(5,"mat-dialog-actions")(6,"button",2),t.NdJ("click",function(){return i.onNoClick()}),t._uU(7,"No"),t.qZA(),t.TgZ(8,"button",3),t._uU(9,"Si"),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(i.message),t.xp6(4),t.Q6J("mat-dialog-close",!0))},dependencies:[ot.ZT,ot.uh,ot.xY,ot.H8,gt.lW]}),n})();var w=Z(4155),r=Z(2340);let a=(()=>{class n{constructor(){}fetchSheetData(e){return(0,G.Z)(function*(){const i=new Headers;i.append("Authorization","Bearer "+r.N.googleSheetSecret);const s=yield fetch(e,{method:"GET",headers:i});if(!s.ok)throw new Error("Network response was not ok");const l=yield s.json();return console.log("From Google Sheet: ",l.rose),l})()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var m=Z(7009),p=Z(7957),f=Z(3238),b=Z(9549),v=Z(4144),Y=Z(4385),F=Z(266),_=Z(782),O=Z(3546),h=Z(7084),z=Z(6709),P=Z(3848),d=Z(1572),N=Z(4850);function j(n,o){if(1&n&&(t.TgZ(0,"button",19)(1,"span",1),t._UZ(2,"i",20),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",500-e.getColumnSum()," Rimasti ")}}function E(n,o){if(1&n&&(t.TgZ(0,"button",21)(1,"span",1),t._UZ(2,"i",20),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",500-e.getColumnSum()," Rimasti ")}}function B(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Nome "),t.qZA())}function Q(n,o){if(1&n&&(t.TgZ(0,"td",23)(1,"b"),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name)}}function L(n,o){if(1&n&&(t.TgZ(0,"td",24),t._uU(1," Giocatori: "),t.TgZ(2,"b"),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.getCountSum())}}function g(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Ruolo "),t.qZA())}function S(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"button",0),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e)}}function R(n,o){if(1&n&&(t.TgZ(0,"td",23),t.YNc(1,S,3,1,"ng-container",25),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e.role_mantra.split(";"))}}function J(n,o){1&n&&t._UZ(0,"td",24)}function U(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Prezzo "),t.qZA())}function $(n,o){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.price," ")}}function M(n,o){if(1&n&&(t.TgZ(0,"td",24),t._uU(1," Spesa: "),t.TgZ(2,"b"),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.getColumnSum())}}function D(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Squadra "),t.qZA())}function et(n,o){if(1&n&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.team)}}function K(n,o){1&n&&t._UZ(0,"td",24)}function it(n,o){1&n&&(t.TgZ(0,"th",22),t._uU(1," Rating "),t.qZA())}function rt(n,o){if(1&n&&(t.TgZ(0,"button",0),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function W(n,o){if(1&n&&(t.TgZ(0,"button",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function q(n,o){if(1&n&&(t.TgZ(0,"button",21),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function k(n,o){if(1&n&&(t.TgZ(0,"button",3),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function ft(n,o){if(1&n&&(t.TgZ(0,"button",31),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function I(n,o){if(1&n&&(t.TgZ(0,"button",19),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.rating)}}function bt(n,o){if(1&n&&(t.TgZ(0,"td",23),t.YNc(1,rt,2,1,"button",26),t.YNc(2,W,2,1,"button",27),t.YNc(3,q,2,1,"button",5),t.YNc(4,k,2,1,"button",28),t.YNc(5,ft,2,1,"button",29),t.YNc(6,I,2,1,"button",4),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf","A"===e.rating),t.xp6(1),t.Q6J("ngIf","A-"===e.rating),t.xp6(1),t.Q6J("ngIf","B"===e.rating),t.xp6(1),t.Q6J("ngIf","C"===e.rating),t.xp6(1),t.Q6J("ngIf","D"===e.rating),t.xp6(1),t.Q6J("ngIf","F"===e.rating)}}function st(n,o){1&n&&t._UZ(0,"td",24)}function ht(n,o){1&n&&t._UZ(0,"tr",32)}function lt(n,o){1&n&&t._UZ(0,"tr",33)}function ct(n,o){1&n&&(t.TgZ(0,"tr",34)(1,"td",35),t._uU(2,"No data with current filters"),t.qZA()())}function ut(n,o){1&n&&t._UZ(0,"tr",36)}let H=(()=>{class n{constructor(e){this.cdr=e,this.lessDisplayedColumns=["name","role_mantra","team","price","rating"],this.data=[],this.dataSource=new y.by,this.players=[]}ngOnInit(){this.filterData()}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.dataSource.sort.active="price",this.dataSource.sort.direction="desc",this.dataSource.sort.sortChange.emit({active:this.sort.active,direction:this.sort.direction})}filterData(){this.players=this.data.slice().filter(e=>e.team_id===this.teamId),this.dataSource.data=this.players,this.cdr.detectChanges()}ngOnChanges(e){e.data&&this.data&&this.teamId&&this.filterData()}getCountSum(){return this.players.length}getColumnSum(){return this.players.map(e=>+e.price).reduce((e,i)=>e+i,0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-subtables"]],viewQuery:function(e,i){if(1&e&&(t.Gf(dt.NW,5),t.Gf(nt.YE,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.paginator=s.first),t.iGM(s=t.CRH())&&(i.sort=s.first)}},inputs:{data:"data",teamId:"teamId",teamName:"teamName"},features:[t.TTD],decls:39,vars:8,consts:[["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-primary"],[1,"btn-inner--icon"],[1,"fas","fa-users"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-secondary"],["class","btn btn-icon btn-sm btn-danger","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-success","type","button","mat-button","",4,"ngIf"],["mat-table","","matSort","",1,"table","align-items-center","table-flush",3,"dataSource"],["matColumnDef","name"],["class","thead-light","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","role_mantra"],["matColumnDef","price"],["matColumnDef","team"],["matColumnDef","rating"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","mat-row","mat-footer-row","",4,"matFooterRowDef"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-danger"],[1,"fas","fa-dollar-sign"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-success"],["mat-header-cell","","mat-sort-header","",1,"thead-light"],["mat-cell",""],["mat-footer-cell",""],[4,"ngFor","ngForOf"],["class","btn btn-icon btn-sm btn-primary","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-info","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-secondary","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-warning","type","button","mat-button","",4,"ngIf"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-info"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-warning"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-footer-row","",1,"mat-row"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"button",0)(4,"span",1),t._UZ(5,"i",2),t.qZA(),t._uU(6),t.qZA()(),t.TgZ(7,"mat-panel-description")(8,"button",3)(9,"span",1),t._UZ(10,"i",2),t.qZA(),t._uU(11),t.qZA(),t.YNc(12,j,4,1,"button",4),t.YNc(13,E,4,1,"button",5),t.qZA()(),t.TgZ(14,"table",6),t.ynx(15,7),t.YNc(16,B,2,0,"th",8),t.YNc(17,Q,3,1,"td",9),t.YNc(18,L,4,1,"td",10),t.BQk(),t.ynx(19,11),t.YNc(20,g,2,0,"th",8),t.YNc(21,R,2,1,"td",9),t.YNc(22,J,1,0,"td",10),t.BQk(),t.ynx(23,12),t.YNc(24,U,2,0,"th",8),t.YNc(25,$,2,1,"td",9),t.YNc(26,M,4,1,"td",10),t.BQk(),t.ynx(27,13),t.YNc(28,D,2,0,"th",8),t.YNc(29,et,2,1,"td",9),t.YNc(30,K,1,0,"td",10),t.BQk(),t.ynx(31,14),t.YNc(32,it,2,0,"th",8),t.YNc(33,bt,7,6,"td",9),t.YNc(34,st,1,0,"td",10),t.BQk(),t.YNc(35,ht,1,0,"tr",15),t.YNc(36,lt,1,0,"tr",16),t.YNc(37,ct,3,0,"tr",17),t.YNc(38,ut,1,0,"tr",18),t.qZA()()),2&e&&(t.xp6(6),t.hij(" ",i.teamName," "),t.xp6(5),t.hij(" ",i.getCountSum()," Giocatori "),t.xp6(1),t.Q6J("ngIf",i.getColumnSum()>450),t.xp6(1),t.Q6J("ngIf",i.getColumnSum()<=450),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(21),t.Q6J("matHeaderRowDef",i.lessDisplayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.lessDisplayedColumns),t.xp6(2),t.Q6J("matFooterRowDef",i.lessDisplayedColumns))},dependencies:[pt.sg,pt.O5,y.BZ,y.fO,y.as,y.w1,y.Dz,y.nj,y.mD,y.Ke,y.ge,y.ev,y.yh,y.XQ,y.Gk,y.Q2,y.Ee,nt.YE,nt.nU,h.ib,h.yz,h.yK,h.u4,gt.lW],styles:[".mat-row[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%]{height:12px!important}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{padding:4px!important}.mat-table[_ngcontent-%COMP%]{font-size:8px}mat-card[_ngcontent-%COMP%]{width:100%;overflow:scroll}.mat-expansion-panel-header[_ngcontent-%COMP%]{max-height:45px}.mat-raised-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%], .mat-button[_ngcontent-%COMP%]{min-width:19px!important;line-height:21px!important;padding:0 4px!important}"]}),n})();const yt=["inputmine"],X=["inputadder"],Nt=["inputprice"],St=["inputteam"];function Et(n,o){1&n&&(t.TgZ(0,"div",95),t._UZ(1,"mat-spinner"),t.qZA())}function Mt(n,o){1&n&&(t.TgZ(0,"span",11),t._UZ(1,"i",91),t._uU(2," Vista Complessiva Squadre"),t.qZA())}function kt(n,o){if(1&n&&(t.TgZ(0,"mat-accordion",96),t._UZ(1,"app-subtables",97),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("data",i.playersLoaded)("teamId",e)("teamName",i.getTeamName(e))}}function Pt(n,o){1&n&&(t.TgZ(0,"span",11),t._UZ(1,"i",98),t._uU(2," Listone - Assegnazione Giocatori"),t.qZA())}function Jt(n,o){if(1&n&&(t.TgZ(0,"button",99),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.amountRemaining," ")}}function Yt(n,o){if(1&n&&(t.TgZ(0,"button",18),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.amountRemaining," ")}}function Qt(n,o){1&n&&(t.TgZ(0,"h5")(1,"span",11),t._UZ(2,"i",101),t.qZA(),t._uU(3,"Compra altri giocatori per avere suggerimenti!"),t.qZA())}function Lt(n,o){if(1&n&&(t.TgZ(0,"button",99),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e," ")}}function Bt(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1," mancano "),t.YNc(2,Lt,2,1,"button",102),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngForOf",e.missingRoles)}}function jt(n,o){if(1&n&&(t.TgZ(0,"button",15),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",e.role," ")}}function $t(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1," non bastano "),t.YNc(2,jt,2,1,"button",103),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngForOf",e.rolesToBuy)}}function Gt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1," hai tutti i ruoli che ti servono! "),t.qZA())}function Vt(n,o){if(1&n&&(t.TgZ(0,"h5"),t._uU(1,"\xa0\xa0\xa0\xa0"),t.TgZ(2,"span",11),t._UZ(3,"i",101),t.qZA(),t._uU(4," Per il "),t.TgZ(5,"button",18),t._uU(6),t.qZA(),t.YNc(7,Bt,3,1,"span",100),t.YNc(8,$t,3,1,"span",100),t.YNc(9,Gt,2,0,"span",100),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(6),t.hij(" ",e.name," "),t.xp6(1),t.Q6J("ngIf",e.missingRoles&&e.missingRoles.length>0),t.xp6(1),t.Q6J("ngIf",e.rolesToBuy&&e.rolesToBuy.length>0),t.xp6(1),t.Q6J("ngIf",0===e.rolesToBuy.length&&e.missingRoles&&0===e.missingRoles.length)}}function zt(n,o){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Qt,4,0,"h5",100),t.YNc(2,Vt,10,4,"h5",100),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.rolesToBuy.length>=5),t.xp6(1),t.Q6J("ngIf",e.rolesToBuy.length<5)}}function Kt(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function Wt(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("value",e),t.xp6(1),t.hij(" ",i.getDistinctTeams()[e]," ")}}function Ht(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"form",21)(1,"mat-form-field",31)(2,"mat-label"),t._uU(3,"Giocatore..."),t.qZA(),t.TgZ(4,"input",104,105),t.NdJ("input",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.filterAdder())})("focus",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.filterAdder())}),t.qZA(),t.TgZ(6,"mat-autocomplete",34,106),t.NdJ("optionSelected",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.onPlayerToAddSelected(s))}),t.YNc(8,Kt,2,2,"mat-option",29),t.qZA()(),t.TgZ(9,"mat-form-field",39)(10,"mat-label"),t._uU(11,"Prezzo pagato"),t.qZA(),t._UZ(12,"input",107,108),t.qZA(),t.TgZ(14,"mat-form-field",39)(15,"mat-label"),t._uU(16,"Team"),t.qZA(),t.TgZ(17,"mat-select",109,76),t.YNc(19,Wt,2,2,"mat-option",29),t.qZA()()()}if(2&n){const e=t.MAs(7),i=t.oxw();t.xp6(4),t.Q6J("formControl",i.myControlAdder)("matAutocomplete",e),t.xp6(4),t.Q6J("ngForOf",i.addPlayerAutocompleteOptions),t.xp6(4),t.Q6J("formControl",i.myControlAdderPrice),t.xp6(5),t.Q6J("formControl",i.myControlAdderTeam),t.xp6(2),t.Q6J("ngForOf",i.getDistinctTeamsKeysTeamsOnly())}}function Xt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"form",21)(1,"mat-form-field",39)(2,"mat-label"),t._uU(3,"Squadra"),t.qZA(),t.TgZ(4,"input",111),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.teamCandidate=s)}),t.qZA()(),t.TgZ(5,"mat-form-field",39)(6,"mat-label"),t._uU(7,"Rating"),t.qZA(),t.TgZ(8,"input",112),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.ratingCandidate=s)}),t.qZA()(),t.TgZ(9,"mat-form-field",39)(10,"mat-label"),t._uU(11,"Ruolo"),t.qZA(),t.TgZ(12,"input",113),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.roleCandidate=s)}),t.qZA()(),t.TgZ(13,"button",90),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onOptionSelectedAdder())}),t._uU(14," Aggiungilo alla Squadra! "),t.TgZ(15,"span",11),t._UZ(16,"i",114),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngModel",e.teamCandidate),t.xp6(4),t.Q6J("ngModel",e.ratingCandidate),t.xp6(4),t.Q6J("ngModel",e.roleCandidate)}}function te(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.Q6J("value",e),t.xp6(1),t.hij(" ",i.getDistinctTeams()[e]," ")}}function ee(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ne(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ie(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-select",28),t.NdJ("selectionChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.filterByColumnValue(s.value))}),t.YNc(1,ne,2,2,"mat-option",29),t.TgZ(2,"mat-option",38)(3,"b"),t._uU(4,"Qualsiasi"),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("formControl",e.inputrolesrc),t.xp6(1),t.Q6J("ngForOf",e.DISTINCT_ROLES)}}function oe(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ae(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-select",28),t.NdJ("selectionChange",function(s){t.CHM(e);const l=t.oxw();return t.KtG(l.filterByColumnValue(s.value))}),t.YNc(1,oe,2,2,"mat-option",29),t.TgZ(2,"mat-option",38)(3,"b"),t._uU(4,"Qualsiasi"),t.qZA()()()}if(2&n){const e=t.oxw();t.Q6J("formControl",e.inputrolesrc),t.xp6(1),t.Q6J("ngForOf",e.DISTINCT_ROLES)}}function re(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function se(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function le(n,o){1&n&&(t.TgZ(0,"th",115),t._uU(1," Libero "),t.qZA())}function ce(n,o){1&n&&(t.TgZ(0,"button",18)(1,"span",11),t._UZ(2,"i",118),t.qZA()())}function ue(n,o){if(1&n&&(t.TgZ(0,"button",15)(1,"span",11),t._UZ(2,"i",119),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(3),t.hij(" ",i.getTeamName(e.team_id)," ")}}function me(n,o){if(1&n&&(t.TgZ(0,"button",99)(1,"span",11),t._UZ(2,"i",120),t.qZA(),t._uU(3),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(3),t.hij(" ",i.getTeamName(e.team_id)," ")}}function pe(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,ce,3,0,"button",14),t.YNc(2,ue,4,1,"button",117),t.YNc(3,me,4,1,"button",13),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",0===e.team_id),t.xp6(1),t.Q6J("ngIf",1===e.team_id),t.xp6(1),t.Q6J("ngIf",0!==e.team_id&&1!==e.team_id)}}function de(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(3);t.Q6J("value",e),t.xp6(1),t.hij(" ",i.getDistinctTeams()[e]," ")}}function _e(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",121)(2,"mat-label"),t._uU(3,"Squadra Mantra"),t.qZA(),t.TgZ(4,"mat-select",122),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw().$implicit;return t.KtG(l.team_id=s)}),t.YNc(5,de,2,2,"mat-option",29),t.qZA()()()}if(2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(4),t.Q6J("ngModel",e.team_id),t.xp6(1),t.Q6J("ngForOf",i.getDistinctTeamsKeys())}}function fe(n,o){if(1&n&&(t.TgZ(0,"td",116),t.YNc(1,pe,4,3,"div",100),t.YNc(2,_e,6,2,"div",100),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function he(n,o){1&n&&t._UZ(0,"td",123)}function ge(n,o){1&n&&(t.TgZ(0,"th",115),t._uU(1," Nome "),t.qZA())}function be(n,o){if(1&n&&(t.TgZ(0,"td",116)(1,"b"),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name)}}function Te(n,o){if(1&n&&(t.TgZ(0,"td",123),t._uU(1," Giocatori: "),t.TgZ(2,"b"),t._uU(3),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Oqu(e.getCountSum())}}function Ce(n,o){1&n&&(t.TgZ(0,"th",115),t._uU(1," Squadra "),t.qZA())}function xe(n,o){if(1&n&&(t.TgZ(0,"td",116),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.team)}}function ye(n,o){1&n&&t._UZ(0,"td",123)}function Ze(n,o){1&n&&(t.TgZ(0,"th",115)(1,"span",124),t._uU(2,"Ruolo"),t.qZA()())}function ve(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"button",15),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e," ")}}function Ae(n,o){if(1&n&&(t.TgZ(0,"td",116),t.YNc(1,ve,3,1,"ng-container",19),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e.best_role_mantra.split(";"))}}function Se(n,o){1&n&&t._UZ(0,"td",123)}function we(n,o){1&n&&(t.TgZ(0,"th",125),t._uU(1," Ruolo "),t.qZA())}function Ie(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"button",15),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e," ")}}function Ue(n,o){if(1&n&&(t.TgZ(0,"td",116),t.YNc(1,Ie,3,1,"ng-container",19),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngForOf",e.role_mantra.split(";"))}}function Ne(n,o){1&n&&t._UZ(0,"td",123)}function De(n,o){1&n&&(t.TgZ(0,"th",115),t._uU(1," Stima "),t.qZA())}function Fe(n,o){if(1&n&&(t.TgZ(0,"td",116)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw();t.xp6(2),t.hij(" ",i.getPriceEstimation(e.value_mantra_1000)," ")}}function Oe(n,o){1&n&&t._UZ(0,"td",123)}function Re(n,o){1&n&&(t.TgZ(0,"th",115),t._uU(1," Prezzo "),t.qZA())}function qe(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.price," ")}}function Ee(n,o){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Only numbers are allowed. "),t.qZA())}function Me(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",126)(2,"input",127,128),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw().$implicit;return t.KtG(l.price=s)}),t.qZA(),t.YNc(4,Ee,2,0,"mat-error",100),t.qZA()()}if(2&n){const e=t.MAs(3),i=t.oxw().$implicit,s=t.oxw();t.xp6(2),t.Q6J("type",s.number)("ngModel",i.price),t.xp6(2),t.Q6J("ngIf",null==e.errors?null:e.errors.pattern)}}function ke(n,o){if(1&n&&(t.TgZ(0,"td",116),t.YNc(1,qe,2,1,"div",100),t.YNc(2,Me,5,3,"div",100),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function Pe(n,o){1&n&&t._UZ(0,"td",123)}function Je(n,o){1&n&&(t.TgZ(0,"th",115),t._uU(1," Rating "),t.qZA())}function Ye(n,o){if(1&n&&(t.TgZ(0,"button",15),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Qe(n,o){if(1&n&&(t.TgZ(0,"button",132),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Le(n,o){if(1&n&&(t.TgZ(0,"button",18),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Be(n,o){if(1&n&&(t.TgZ(0,"button",17),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function je(n,o){if(1&n&&(t.TgZ(0,"button",16),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function $e(n,o){if(1&n&&(t.TgZ(0,"button",99),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Ge(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,Ye,2,1,"button",117),t.YNc(2,Qe,2,1,"button",129),t.YNc(3,Le,2,1,"button",14),t.YNc(4,Be,2,1,"button",130),t.YNc(5,je,2,1,"button",131),t.YNc(6,$e,2,1,"button",13),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf","A"===e.rating),t.xp6(1),t.Q6J("ngIf","A-"===e.rating),t.xp6(1),t.Q6J("ngIf","B"===e.rating),t.xp6(1),t.Q6J("ngIf","C"===e.rating),t.xp6(1),t.Q6J("ngIf","D"===e.rating),t.xp6(1),t.Q6J("ngIf","F"===e.rating)}}function Ve(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",126)(2,"mat-label"),t._uU(3,"Rating"),t.qZA(),t.TgZ(4,"mat-select",122),t.NdJ("ngModelChange",function(s){t.CHM(e);const l=t.oxw().$implicit;return t.KtG(l.rating=s)}),t._UZ(5,"mat-option",38),t.TgZ(6,"mat-option",133),t._uU(7,"A"),t.qZA(),t.TgZ(8,"mat-option",134),t._uU(9,"A-"),t.qZA(),t.TgZ(10,"mat-option",135),t._uU(11,"B"),t.qZA(),t.TgZ(12,"mat-option",136),t._uU(13,"C"),t.qZA(),t.TgZ(14,"mat-option",137),t._uU(15,"D"),t.qZA(),t.TgZ(16,"mat-option",138),t._uU(17,"F"),t.qZA()()()()}if(2&n){const e=t.oxw().$implicit;t.xp6(4),t.Q6J("ngModel",e.rating)}}function ze(n,o){if(1&n&&(t.TgZ(0,"td",116),t.YNc(1,Ge,7,6,"div",100),t.YNc(2,Ve,18,1,"div",100),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isEdit),t.xp6(1),t.Q6J("ngIf",e.isEdit)}}function Ke(n,o){1&n&&t._UZ(0,"td",123)}function We(n,o){1&n&&(t.TgZ(0,"th",125),t._uU(1," INFO "),t.qZA())}function He(n,o){1&n&&(t.TgZ(0,"button",143)(1,"span",11),t._UZ(2,"i",144),t.qZA()())}function Xe(n,o){1&n&&(t.TgZ(0,"button",145)(1,"span",11),t._UZ(2,"i",146),t.qZA()())}function tn(n,o){1&n&&(t.TgZ(0,"button",147)(1,"span",11),t._UZ(2,"i",148),t.qZA()())}function en(n,o){if(1&n&&(t.TgZ(0,"button",149)(1,"span",11),t._UZ(2,"i",150),t.qZA()()),2&n){const e=t.oxw().$implicit;t.MGl("matTooltip","Injured for ",e.injured," days")}}function nn(n,o){if(1&n&&(t.TgZ(0,"td",116),t.YNc(1,He,3,0,"button",139),t.YNc(2,Xe,3,0,"button",140),t.YNc(3,tn,3,0,"button",141),t.YNc(4,en,3,1,"button",142),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf","Y"===e.first_team),t.xp6(1),t.Q6J("ngIf","Y"===e.penalty_taker),t.xp6(1),t.Q6J("ngIf","Y"===e.free_kick_taker),t.xp6(1),t.Q6J("ngIf",e.injured>0)}}function on(n,o){1&n&&t._UZ(0,"td",123)}function an(n,o){1&n&&t._UZ(0,"th",115)}function rn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",152)(1,"button",90),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw();return t.KtG(l.editField(s))}),t.TgZ(2,"span",11),t._UZ(3,"i",153),t.qZA()()()}}function sn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",152)(1,"button",22),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,l=t.oxw();return t.KtG(l.editField(s))}),t.TgZ(2,"span",11),t._UZ(3,"i",154),t.qZA()()()}}function ln(n,o){if(1&n&&(t.TgZ(0,"td",116),t.YNc(1,rn,4,0,"div",151),t.YNc(2,sn,4,0,"div",151),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isEdit),t.xp6(1),t.Q6J("ngIf",!e.isEdit)}}function cn(n,o){1&n&&t._UZ(0,"td",123)}function un(n,o){1&n&&t._UZ(0,"tr",155)}function mn(n,o){1&n&&t._UZ(0,"tr",156)}function pn(n,o){1&n&&(t.TgZ(0,"tr",157)(1,"td",158),t._uU(2,"No data with current filters"),t.qZA()())}function dn(n,o){1&n&&t._UZ(0,"tr",159)}function _n(n,o){1&n&&(t.TgZ(0,"span",11),t._UZ(1,"i",160),t._uU(2," Analisi Squadra Attuale"),t.qZA())}function fn(n,o){if(1&n&&(t.TgZ(0,"mat-option",110),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function hn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"b")(2,"button",99),t._uU(3),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.assignedRole," ")}}function gn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"b")(2,"button",18),t._uU(3),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij(" ",e.assignedRole," ")}}function bn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"b")(2,"button",164),t._uU(3),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hYB("matTooltip","Sarebbe meglio schierare ",e.name," come ",e.best_role_mantra,""),t.xp6(1),t.hij(" ",e.assignedRole," ")}}function Tn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"b"),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.name)}}function Cn(n,o){1&n&&(t.TgZ(0,"td",162),t._UZ(1,"b"),t.qZA())}function xn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"b"),t._uU(2),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(e.team)}}function yn(n,o){1&n&&(t.TgZ(0,"td",162),t._UZ(1,"b"),t.qZA())}function Zn(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"button",15),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.hij(" ",e," ")}}function vn(n,o){if(1&n&&(t.TgZ(0,"button",15),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function An(n,o){if(1&n&&(t.TgZ(0,"button",132),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Sn(n,o){if(1&n&&(t.TgZ(0,"button",18),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function wn(n,o){if(1&n&&(t.TgZ(0,"button",17),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function In(n,o){if(1&n&&(t.TgZ(0,"button",16),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Un(n,o){if(1&n&&(t.TgZ(0,"button",99),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.rating," ")}}function Nn(n,o){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,hn,4,1,"td",163),t.YNc(2,gn,4,1,"td",163),t.YNc(3,bn,4,3,"td",163),t.YNc(4,Tn,3,1,"td",163),t.YNc(5,Cn,2,0,"td",163),t.YNc(6,xn,3,1,"td",163),t.YNc(7,yn,2,0,"td",163),t.TgZ(8,"td",162),t.YNc(9,Zn,3,1,"ng-container",19),t.qZA(),t.TgZ(10,"td",162),t.YNc(11,vn,2,1,"button",117),t.YNc(12,An,2,1,"button",129),t.YNc(13,Sn,2,1,"button",14),t.YNc(14,wn,2,1,"button",130),t.YNc(15,In,2,1,"button",131),t.YNc(16,Un,2,1,"button",13),t.qZA(),t.TgZ(17,"td",162),t._uU(18),t.qZA()()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",-1===e.id),t.xp6(1),t.Q6J("ngIf",-1!==e.id&&e.best_role_mantra===e.assignedRole),t.xp6(1),t.Q6J("ngIf",-1!==e.id&&e.best_role_mantra!==e.assignedRole),t.xp6(1),t.Q6J("ngIf",-1!==e.id),t.xp6(1),t.Q6J("ngIf",-1===e.id),t.xp6(1),t.Q6J("ngIf",-1!==e.id),t.xp6(1),t.Q6J("ngIf",-1===e.id),t.xp6(2),t.Q6J("ngForOf",e.best_role_mantra.split(";")),t.xp6(2),t.Q6J("ngIf","A"===e.rating),t.xp6(1),t.Q6J("ngIf","A-"===e.rating),t.xp6(1),t.Q6J("ngIf","B"===e.rating),t.xp6(1),t.Q6J("ngIf","C"===e.rating),t.xp6(1),t.Q6J("ngIf","D"===e.rating),t.xp6(1),t.Q6J("ngIf","F"===e.rating),t.xp6(2),t.hij(" ",e.price," ")}}function Dn(n,o){if(1&n&&(t.TgZ(0,"table",161)(1,"tr")(2,"th",162),t._uU(3," Ruolo Formazione "),t.qZA(),t.TgZ(4,"th",162),t._uU(5," Giocatore "),t.qZA(),t.TgZ(6,"th",162),t._uU(7," Squadra "),t.qZA(),t.TgZ(8,"th",162),t._uU(9," Ruolo Giocatore"),t.qZA(),t.TgZ(10,"th",162),t._uU(11," Rating "),t.qZA(),t.TgZ(12,"th",162),t._uU(13," Spesa "),t.qZA()(),t.YNc(14,Nn,19,15,"tr",19),t.qZA()),2&n){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.getBestEleven())}}function Fn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",165)(2,"span",11),t._UZ(3,"i",118),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.MGl("matTooltip","Rating: ",e.value,"")}}function On(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",164)(2,"span",11),t._UZ(3,"i",166),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.MGl("matTooltip","Rating: ",e.value,"")}}function Rn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",149)(2,"span",11),t._UZ(3,"i",167),t.qZA()()()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.MGl("matTooltip","Rating: ",e.value,"")}}function qn(n,o){if(1&n&&(t.TgZ(0,"b"),t._uU(1," \xa0"),t.TgZ(2,"button",99),t._uU(3),t.qZA()()),2&n){const e=o.$implicit;t.xp6(3),t.hij(" ",e," ")}}function En(n,o){if(1&n&&(t.TgZ(0,"td",162),t.YNc(1,qn,4,1,"b",19),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.missingRoles)}}function Mn(n,o){1&n&&(t.TgZ(0,"td",162)(1,"b"),t._uU(2," \xa0"),t.TgZ(3,"button",99),t._uU(4," Molti "),t.qZA()()())}function kn(n,o){1&n&&(t.TgZ(0,"td",162)(1,"button",18),t._uU(2," Nessuno "),t.qZA()())}function Pn(n,o){if(1&n&&(t.TgZ(0,"b"),t._uU(1," \xa0"),t.TgZ(2,"button",15),t._uU(3),t.qZA()()),2&n){const e=o.$implicit;t.xp6(3),t.hij(" ",e.role," ")}}function Jn(n,o){if(1&n&&(t.TgZ(0,"td",162),t.YNc(1,Pn,4,1,"b",19),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.rolesToBuy)}}function Yn(n,o){1&n&&(t.TgZ(0,"td",162)(1,"button",99),t._uU(2," Molti "),t.qZA()())}function Qn(n,o){1&n&&(t.TgZ(0,"td",162)(1,"button",18),t._uU(2," Nessuno "),t.qZA()())}function Ln(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",162)(2,"b"),t._uU(3),t.qZA()(),t.YNc(4,Fn,4,1,"td",163),t.YNc(5,On,4,1,"td",163),t.YNc(6,Rn,4,1,"td",163),t.YNc(7,En,2,1,"td",163),t.YNc(8,Mn,5,0,"td",163),t.YNc(9,kn,3,0,"td",163),t.YNc(10,Jn,2,1,"td",163),t.YNc(11,Yn,3,0,"td",163),t.YNc(12,Qn,3,0,"td",163),t.qZA()),2&n){const e=o.$implicit;t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",e.value>=11),t.xp6(1),t.Q6J("ngIf",e.value<11&&e.value>=7),t.xp6(1),t.Q6J("ngIf",e.value<7),t.xp6(1),t.Q6J("ngIf",e.missingRoles.length>0&&e.missingRoles.length<4),t.xp6(1),t.Q6J("ngIf",e.missingRoles.length>=4),t.xp6(1),t.Q6J("ngIf",0===e.missingRoles.length),t.xp6(1),t.Q6J("ngIf",e.rolesToBuy.length>0&&e.rolesToBuy.length<4),t.xp6(1),t.Q6J("ngIf",e.rolesToBuy.length>=4||e.missingRoles.length>=4),t.xp6(1),t.Q6J("ngIf",0===e.rolesToBuy.length&&e.missingRoles.length<4)}}function Bn(n,o){if(1&n&&(t.TgZ(0,"table",161)(1,"tr")(2,"th",162),t._uU(3," Formazione "),t.qZA(),t.TgZ(4,"th",162),t._uU(5," Valore "),t.qZA(),t.TgZ(6,"th",162),t._uU(7," Ruoli Mancanti "),t.qZA(),t.TgZ(8,"th",162),t._uU(9," Ruoli Da Comprare "),t.qZA()(),t.YNc(10,Ln,13,10,"tr",19),t.qZA()),2&n){const e=t.oxw();t.xp6(10),t.Q6J("ngForOf",e.computedFormations)}}function jn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",18)(2,"span",11),t._UZ(3,"i",118),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].remaining,"")}}function $n(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",16)(2,"span",11),t._UZ(3,"i",168),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].remaining,"")}}function Gn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",99)(2,"span",11),t._UZ(3,"i",169),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].remaining,"")}}function Vn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",18)(2,"span",11),t._UZ(3,"i",118),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].all,"")}}function zn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",16)(2,"span",11),t._UZ(3,"i",166),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].all,"")}}function Kn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",99)(2,"span",11),t._UZ(3,"i",167),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].all,"")}}function Wn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",18)(2,"span",11),t._UZ(3,"i",118),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].allRole,"")}}function Hn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",16)(2,"span",11),t._UZ(3,"i",166),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].allRole,"")}}function Xn(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",99)(2,"span",11),t._UZ(3,"i",167),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].allRole,"")}}function ti(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",18)(2,"span",11),t._UZ(3,"i",118),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].firstTeam,"")}}function ei(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",16)(2,"span",11),t._UZ(3,"i",166),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].firstTeam,"")}}function ni(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",99)(2,"span",11),t._UZ(3,"i",167),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].firstTeam,"")}}function ii(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",18)(2,"span",11),t._UZ(3,"i",118),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].good,"")}}function oi(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",17)(2,"span",11),t._UZ(3,"i",166),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].good,"")}}function ai(n,o){if(1&n&&(t.TgZ(0,"td",162)(1,"button",99)(2,"span",11),t._UZ(3,"i",167),t._uU(4),t.qZA()()()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",i.roleInfo[e].good,"")}}function ri(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",162)(2,"b"),t._uU(3),t.qZA()(),t.YNc(4,jn,5,1,"td",163),t.YNc(5,$n,5,1,"td",163),t.YNc(6,Gn,5,1,"td",163),t.YNc(7,Vn,5,1,"td",163),t.YNc(8,zn,5,1,"td",163),t.YNc(9,Kn,5,1,"td",163),t.YNc(10,Wn,5,1,"td",163),t.YNc(11,Hn,5,1,"td",163),t.YNc(12,Xn,5,1,"td",163),t.YNc(13,ti,5,1,"td",163),t.YNc(14,ei,5,1,"td",163),t.YNc(15,ni,5,1,"td",163),t.YNc(16,ii,5,1,"td",163),t.YNc(17,oi,5,1,"td",163),t.YNc(18,ai,5,1,"td",163),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].remaining>=3),t.xp6(1),t.Q6J("ngIf",2===i.roleInfo[e].remaining),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].remaining<=1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].all>=3),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].all<3&&i.roleInfo[e].all>=1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].all<1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].allRole>=3),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].allRole<3&&i.roleInfo[e].allRole>=1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].allRole<1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].firstTeam>=3),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].firstTeam<3&&i.roleInfo[e].firstTeam>=1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].firstTeam<1),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].good>=2),t.xp6(1),t.Q6J("ngIf",1===i.roleInfo[e].good),t.xp6(1),t.Q6J("ngIf",i.roleInfo[e].good<1)}}function si(n,o){if(1&n&&(t.TgZ(0,"table",161)(1,"tr")(2,"th",162),t._uU(3," Ruolo "),t.qZA(),t.TgZ(4,"th",162),t._uU(5," TOP Liberi "),t.qZA(),t.TgZ(6,"th",162),t._uU(7," Tuoi "),t.qZA(),t.TgZ(8,"th",162),t._uU(9," Di Ruolo "),t.qZA(),t.TgZ(10,"th",162),t._uU(11," Titolari "),t.qZA(),t.TgZ(12,"th",162),t._uU(13," B+ "),t.qZA()(),t.YNc(14,ri,19,16,"tr",19),t.qZA()),2&n){const e=t.oxw();t.xp6(14),t.Q6J("ngForOf",e.getDistinctRoles())}}function li(n,o){1&n&&(t.TgZ(0,"span",11),t._UZ(1,"i",170),t._uU(2," Admin"),t.qZA())}const ci=function(){return[25,50,100]};let ui=(()=>{class n{constructor(e,i,s,l,u){this.cdr=e,this.teamDataService=i,this.dialog=s,this._snackBar=l,this.googleSheetsService=u,this.loading=!1,this.DISTINCT_ROLES=["Por","Dc","Dd","Ds","E","M","C","W","T","A","Pc"],this.DISTINCT_TEAMS={0:"Senza Squadra",1:"OMagos",2:"Dano",3:"Greg",4:"Gio",5:"Fra",6:"Donzo",7:"Bot",8:"Riccardo"},this.FORMATIONS=[{name:"343",Por:1,Dc:3,Dd:0,Ds:0,E:2,M:0,C:2,W:0,T:0,A:2,Pc:1},{name:"4312",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:2,W:0,T:1,A:0,Pc:2},{name:"3412",Por:1,Dc:3,Dd:0,Ds:0,E:2,M:0,C:2,W:0,T:1,A:0,Pc:2},{name:"442",Por:1,Dc:2,Dd:1,Ds:1,E:1,M:0,C:2,W:1,T:0,A:0,Pc:2},{name:"3421",Por:1,Dc:3,Dd:0,Ds:0,E:1,M:1,C:1,W:1,T:1,A:1,Pc:1},{name:"4141",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:0,W:2,T:2,A:0,Pc:1},{name:"4231W",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:1,W:1,T:1,A:1,Pc:1},{name:"4231T",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:1,W:0,T:2,A:1,Pc:1},{name:"4411",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:1,W:2,T:0,A:1,Pc:1},{name:"352",Por:1,Dc:3,Dd:0,Ds:0,E:1,M:1,C:2,W:1,T:0,A:0,Pc:2},{name:"3511",Por:1,Dc:3,Dd:0,Ds:0,E:0,M:2,C:1,W:2,T:0,A:1,Pc:1},{name:"433",Por:1,Dc:2,Dd:1,Ds:1,E:0,M:1,C:2,W:0,T:0,A:2,Pc:1}],this.sheetSource="",this.COLUMNS=[{columnDef:"team_id",header:"Comprato",cell:c=>`${c.team_id}`},{columnDef:"name",header:"Nome",cell:c=>`${c.name}`},{columnDef:"team",header:"Squadra",cell:c=>`${c.team}`},{columnDef:"role_mantra",header:"Ruolo Mantra",cell:c=>`${c.role_mantra}`},{columnDef:"value_mantra_1000",header:"Valore 1000",cell:c=>`${c.value_mantra_1000}`},{columnDef:"price",header:"Prezzo",cell:c=>`${c.price}`},{columnDef:"rating",header:"Rating",cell:c=>`${c.rating}`},{columnDef:"first_team",header:"T",cell:c=>`${c.first_team}`},{columnDef:"isEdit",header:"",cell:c=>`${c.isEdit}`}],this.SIMPLE_ROLE_COLUMNS=[{columnDef:"team_id",header:"Comprato",cell:c=>`${c.team_id}`},{columnDef:"name",header:"Nome",cell:c=>`${c.name}`},{columnDef:"team",header:"Squadra",cell:c=>`${c.team}`},{columnDef:"best_role_mantra",header:"Ruolo Mantra",cell:c=>`${c.best_role_mantra}`},{columnDef:"value_mantra_1000",header:"Valore 1000",cell:c=>`${c.value_mantra_1000}`},{columnDef:"price",header:"Prezzo",cell:c=>`${c.price}`},{columnDef:"rating",header:"Rating",cell:c=>`${c.rating}`},{columnDef:"first_team",header:"T",cell:c=>`${c.first_team}`},{columnDef:"isEdit",header:"",cell:c=>`${c.isEdit}`}],this.adderForm=!1,this.RATING_VALUES={A:1e4,"A-":1e3,B:100,C:10,D:5,F:0},this.playersLoaded=[],this.dataSource=new y.by(this.playersLoaded),this.displayedColumns=this.SIMPLE_ROLE_COLUMNS.map(c=>c.columnDef),this.formationNames=this.FORMATIONS.map(c=>c.name),this.displayedColumnsFormations=["name","value"],this.allPlayerNames=this.playersLoaded.map(c=>c.name),this.notSoldPlayerNames=this.playersLoaded.map(c=>c.name),this.groupByTeam=[],this.pieChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"}}},this.pieChartLabels=Object.keys(this.groupByTeam),this.pieChartDatasets=[{data:Object.values(this.groupByTeam),label:"this is an example"}],this.pieChartLegend=!0,this.pieChartPlugins=[],this.roleColumn="best_role_mantra",this.nameColumn="name",this.teamColumn="team",this.userColumn="team_id",this.ratingColumn="rating",this.valueColumn="value_mantra_1000",this.roleFilter="",this.nameFilter="",this.teamFilter="",this.ratingFilter="",this.valueFilter="",this.userFilter=-1,this.areSimpleRoles=!0,this.firstTeamFilter=!1,this.penaltyTakerFilter=!1,this.freeKickTakerFilter=!1,this.injuredFilter=!0,this.formationChosen="442",this.myControl=new x.NI(""),this.myControlAdder=new x.NI(""),this.myControlAdderPrice=new x.NI(""),this.myControlAdderTeam=new x.NI(""),this.inputsquadsrc=new x.NI(""),this.inputrolesrc=new x.NI(""),this.inputteamsrc=new x.NI(""),this.inputratingsrc=new x.NI(""),this.inputvaluesrc=new x.NI(""),this.computedFormations=[],this.roleInfo={},this.dataSourceFormation=new y.by(this.computedFormations),this.addCandidate="",this.ratingCandidate="",this.roleCandidate="",this.teamCandidate="",this.cols=3,this.amountRemaining=500,this.bestFormationsFound=[{name:"",rolesToBuy:[]}],this.roleFilterPredicate=(c,T)=>c[this.roleColumn].includes(T),this.userFilterPredicate=(c,T)=>!(this.userFilter>=0&&this.userFilter<=8)||c[this.userColumn]===T,this.nameFilterPredicate=(c,T)=>c[this.nameColumn].trim().toLowerCase().includes(T),this.valueFilterPredicate=(c,T)=>(T=""===T?"0":T,parseInt(c[this.valueColumn])>=parseInt(T)),this.teamFilterPredicate=(c,T)=>c[this.teamColumn]===T,this.ratingFilterPredicate=(c,T)=>this.RATING_VALUES[c[this.ratingColumn]]>=this.RATING_VALUES[T],this.infoFilterPredicate=(c,T,V,A,mt)=>(!T||"Y"===c.first_team===T)&&(!V||"Y"===c.penalty_taker===V)&&(!A||"Y"===c.free_kick_taker===A)&&(mt||c.injured>0===mt)}groupByAndCountRoles(e,i,s="F"){return e.flatMap(u=>u[i].split(";").map(T=>({...u,value:T}))).filter(u=>this.RATING_VALUES[u.rating]>=this.RATING_VALUES[s]).reduce((u,c)=>(u[c[i]]=(u[c[i]]||0)+1,u),{})}groupByAndCount(e,i,s="F"){return e.filter(l=>this.RATING_VALUES[l.rating]>=this.RATING_VALUES[s]).reduce((l,u)=>(l[u[i]]=(l[u[i]]||0)+1,l),{})}ngOnInit(){this.setColumns(),window.addEventListener("resize",()=>{this.setColumns()})}getDataFromSheets(){var e=this;return(0,G.Z)(function*(){let i=0;try{e.loading=!0;const l=(yield e.googleSheetsService.fetchSheetData(e.sheetSource)).rose.slice(3,37);console.log("Players found",l);for(let u of e.playersLoaded)e.addPlayer(u.name,u.price,0);for(let u of l)for(let c=1;c<9;c++)e.addPlayer(u[c.toString()],u[c.toString()+"Price"],c),i++;e.updateAnalyses()}catch(s){console.error("Error fetching data from Google Sheets:",s)}e.loading=!1,e.openSnackBar("Caricati giocatori da Google Sheets : "+i.toString(),"OK")})()}ngAfterViewInit(){this.dataSource=new y.by(this.playersLoaded),this.dataSubscription=this.teamDataService.dataTable$.subscribe(e=>{this.playersLoaded=e.filter(i=>void 0!==i),this.dataSource.data=this.playersLoaded,this.allPlayerNames=this.playersLoaded.map(i=>i.name),this.searchFilterOptions=this.allPlayerNames.slice(),this.addPlayerAutocompleteOptions=this.allPlayerNames.slice(),this.dataSource.paginator=this.paginator,this.cdr.detectChanges()}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.sort.active=this.valueColumn,this.sort.direction="desc",this.sort.sortChange.emit({active:this.sort.active,direction:this.sort.direction}),this.areSimpleRoles=!0,setTimeout(()=>{this.updateAnalyses()},100),this.cdr.detectChanges()}ngOnDestroy(){window.removeEventListener("resize",this.setColumns),this.dataSubscription&&this.dataSubscription.unsubscribe()}openConfirmationDialogLoadCSV(){this.dialog.open(at,{data:{message:"Sicuro di voler ricaricare i dati di default? Perderai i dati attuali.",buttonText:{ok:"Si",cancel:"No"}}}).afterClosed().subscribe(i=>{i&&(this.loadCSV(),setTimeout(()=>{this.updateAnalyses()},1e3))})}setColumns(){const e=window.innerWidth;this.cols=e<=900?1:e>900&&e<=1200?2:3}openSnackBar(e,i){this._snackBar.open(e,i)}openConfirmationDialogReloadTeams(){this.dialog.open(at,{data:{message:"Sicuro di voler ricreare tutte le squadre? Perderai i dati attuali.",buttonText:{ok:"Si",cancel:"No"}}}).afterClosed().subscribe(i=>{i&&this.addGoodTeam()})}updateBestEleven(){this.bestEleven=this.parseBestEleven()}getFormations(){return this.FORMATIONS}getBestEleven(){return this.bestEleven}onCheckboxChange(){this.areSimpleRoles?(this.displayedColumns=this.SIMPLE_ROLE_COLUMNS.map(e=>e.columnDef),this.roleColumn="best_role_mantra"):(this.displayedColumns=this.COLUMNS.map(e=>e.columnDef),this.roleColumn="role_mantra"),this.filterOptions(),this.aggregateFilters()}onFileChange(e){let i=e.target.files[0];tt.parse(i,{complete:s=>{const l=s.data.map(u=>{try{return new _t(u)}catch(c){console.error(c.message)}});console.log("Loaded From File: ",l),this.openSnackBar("Caricati "+l.length.toString()+" giocatori da "+i.name,"OK"),this.teamDataService.setData(l),this.filterOptions()},header:!0})}onPlayerToAddSelected(e){const i=e.option.value.trim().toLowerCase(),s=this.playersLoaded.find(l=>l.name.trim().toLowerCase()===i);this.addCandidate=i,this.ratingCandidate=s.rating,this.roleCandidate=s.role_mantra,this.teamCandidate=s.team}onOptionSelected(e){this.nameFilter=e.option.value.trim().toLowerCase(),this.myControl.setValue(e.option.value),this.aggregateFilters(),this.filterOptions()}openImageModal(){document.getElementById("imageModal").style.display="block"}closeImageModal(){document.getElementById("imageModal").style.display="none"}selectMyTeamOnly(){this.deleteFilters(),this.userFilter=1,this.aggregateFilters(),this.filterOptions()}deleteFilters(){this.roleFilter="",this.nameFilter="",this.teamFilter="",this.ratingFilter="",this.valueFilter="",this.userFilter=-1,this.inputsquadsrc.setValue(""),this.inputrolesrc.setValue(""),this.inputteamsrc.setValue(""),this.inputratingsrc.setValue(""),this.inputvaluesrc.setValue(""),this.myControl.setValue(""),this.areSimpleRoles=!0,this.firstTeamFilter=!1,this.penaltyTakerFilter=!1,this.freeKickTakerFilter=!1,this.injuredFilter=!0,this.aggregateFilters(),this.filterOptions()}getRandomElements(e,i){const s=[...e];for(let l=s.length-1;l>0;l--){const u=Math.floor(Math.random()*(l+1));[s[l],s[u]]=[s[u],s[l]]}return s.slice(0,i)}addGoodTeam(){var e=this;this.loading=!0,setTimeout((0,G.Z)(function*(){yield e.addTeam(),e.updateAnalyses(),e.loading=!1,e.openSnackBar("Team casuali creati","OK")}),0)}addTeam(){var e=this;return(0,G.Z)(function*(){for(let i=0;i<e.playersLoaded.length;i++)e.playersLoaded[i].team_id=0;Object.keys(e.DISTINCT_TEAMS).forEach(function(){var i=(0,G.Z)(function*(s){yield e.createRandomTeamInternal(s)});return function(s){return i.apply(this,arguments)}}())})()}createRandomTeamInternal(e){var i=this;return(0,G.Z)(function*(){return new Promise(s=>{if("0"!==e){const l=[];i.DISTINCT_ROLES.forEach(u=>{l.push(...i.getRandomElements(i.playersLoaded.filter(c=>0===c.team_id).filter(c=>c.value_mantra_1000>=4).filter(c=>c.best_role_mantra.split(";")[0]===u),3))});for(let u=0;u<l.length;u++)i.addPlayer(l[u].name,Math.round(l[u].value_mantra_1000/2),parseInt(e))}setTimeout(()=>{s()},100)})})()}onOptionSelectedAdder(){const e=this.inputAdder.nativeElement.value,i=parseInt(""===this.inputPrice.nativeElement.value.trim()?"0":this.inputPrice.nativeElement.value);this.addPlayer(e,i,this.inputTeam.value),this.myControl.setValue(""),this.myControlAdder.setValue(""),this.myControlAdderPrice.setValue(""),this.myControlAdderTeam.setValue(""),this.filterOptions(),setTimeout(()=>{this.inputAdder.nativeElement.blur()})}addPlayer(e,i,s){let l=this.playersLoaded.find(u=>u.name===e);if(l){const u=l.id;this.teamDataService.updateField(u,"team_id",s),this.teamDataService.updateField(u,"price",i),this.filterOptions()}}getCountSum(){return this.dataSource.filteredData.length}getBestFormation(){if(void 0===this.bestFormationsFound)this.bestFormationsFound=[{name:"",rolesToBuy:[]}];else{this.bestFormationsFound=this.computedFormations.sort((e,i)=>i.value-e.value).slice(0,3);for(let e of this.bestFormationsFound){e.rolesToBuy=e.rolesToBuy.splice(0,5);for(let i of e.missingRoles)e.rolesToBuy=e.rolesToBuy.filter(s=>s.role!==i)}}}getRolesToBuy(){if(this.bestFormationsFound=this.computedFormations.reduce((e,i)=>i.value>e.value?i:e,this.computedFormations[0]),void 0===this.bestFormationsFound)return{name:"",rolesToBuy:[]};this.bestFormationsFound.rolesToBuy=this.bestFormationsFound.rolesToBuy.splice(0,3)}getMyAmountRemaining(){const e=this.dataSource.data.filter(i=>1===i.team_id).map(i=>+i.price).map(i=>isNaN(i)?0:i).filter(i=>!isNaN(i)).reduce((i,s)=>i+s,0);this.amountRemaining=500-e}getInfoPlayers(){const e=this.dataSource.data.filter(c=>1===c.team_id);return{injured:e.filter(c=>c.injured>0).length,firstTeam:e.filter(c=>c.first_team).length,penaltyTakers:e.filter(c=>c.penalty_taker).length,stars:e.filter(c=>this.RATING_VALUES[c.rating]>this.RATING_VALUES.B).length}}getColumnSum(){return this.dataSource.filteredData.map(e=>+e.price).map(e=>isNaN(e)?0:e).filter(e=>!isNaN(e)).reduce((e,i)=>e+i,0)}filterOptions(){if(!this.loading){this.allPlayerNames=this.playersLoaded.slice().map(i=>i.name),this.notSoldPlayerNames=this.playersLoaded.slice().filter(i=>0===i.team_id).map(i=>i.name);const e=this.input.nativeElement.value.toLowerCase();this.searchFilterOptions=this.allPlayerNames.filter(i=>i.toLowerCase().includes(e)).sort(),this.cdr.detectChanges(),setTimeout(()=>{this.updateAnalyses()},100)}}updateAnalyses(){this.groupByTeam=this.updateGroupByTeamCount(),this.computedFormations=this.rateFormationsByPlayers(),this.roleInfo=this.evaluatePlayersInSquad(),this.bestEleven=this.parseBestEleven(),this.getMyAmountRemaining(),this.getBestFormation(),0===this.chart.chart.data.datasets.length||(this.chart.chart.data.datasets[0].data=Object.values(this.groupByTeam),this.chart.chart.data.labels=Object.keys(this.groupByTeam)),this.chart.chart.update()}rateFormationsByPlayers(){const e=this.evaluatePlayersInSquad();return this.FORMATIONS.map(s=>{const l=[],u=[],c=Object.keys(s).filter(A=>s[A]>0),V=this.DISTINCT_ROLES.map(A=>{const Ot=void 0!==e[A]?e[A].allRole:0;let Dt=Math.min(s[A],(Ot-(s[A]+1))*((void 0!==e[A]?e[A].good:0)+1));return s[A]>0&&s[A]-Ot>0&&(l.push(A),Dt-=3),s[A]>0&&Ot<2*s[A]+1&&u.push({role:A,urgency:Dt-s[A]}),isNaN(Dt)?{name:A,value:-1}:{name:A,value:Dt}}).filter(A=>c.includes(A.name)).reduce((A,mt)=>A+mt.value,0);return u.sort((A,mt)=>mt.urgency-A.urgency),{name:s.name,value:V,missingRoles:l,rolesToBuy:u}}).sort((s,l)=>l.value-s.value)}parseBestEleven(){const e=[],i=this.FORMATIONS.find(u=>u.name===this.formationChosen),s=this.playersLoaded.filter(u=>1===u.team_id).sort((u,c)=>this.RATING_VALUES[c.rating]-this.RATING_VALUES[u.rating]),l=[...this.DISTINCT_ROLES].reverse();for(let u of l){const c=s.filter(T=>!e.includes(T)).slice().filter(T=>{const V=T.best_role_mantra.split(";");for(let A of V)if(u===A)return!0;return!1}).slice(0,i[u]);for(let T of c)T.assignedRole=u;if(e.push(...c),c.length<i[u]){const T=s.filter(V=>!e.includes(V)).slice().filter(V=>{const A=V.role_mantra.split(";");for(let mt of A)if(u===mt)return!0;return!1}).slice(0,i[u]);for(let V of T)V.assignedRole=u;if(e.push(...T),c.length+T.length<i[u])for(let V=0;V<i[u]-(c.length+T.length);V++){const A=new _t({name:" !! ",id:-1,team:" !! "});A.assignedRole=u,e.push(A)}}}return e}evaluatePlayersInSquad(){const e=this.groupByAndCount(this.playersLoaded.filter(T=>1===T.team_id),"role_mantra","F"),i=this.groupByAndCount(this.playersLoaded.filter(T=>1===T.team_id),"best_role_mantra","F"),s=this.groupByAndCount(this.playersLoaded.filter(T=>1===T.team_id),"best_role_mantra","B"),l=this.groupByAndCount(this.playersLoaded.filter(T=>1===T.team_id&&"Y"===T.first_team),"best_role_mantra","F"),u=this.groupByAndCount(this.playersLoaded.filter(T=>0===T.team_id),"best_role_mantra","A-");this.expandRolesCountsToMultiRoles(e),this.expandRolesCountsToMultiRoles(i),this.expandRolesCountsToMultiRoles(s),this.expandRolesCountsToMultiRoles(l),this.expandRolesCountsToMultiRoles(u);const c={};for(let T of this.DISTINCT_ROLES)c[T]={all:e[T]||0,allRole:i[T]||0,good:s[T]||0,firstTeam:l[T]||0,remaining:u[T]||0};return c}expandRolesCountsToMultiRoles(e){for(let i in e)if(i.includes(";")){let s=i.split(";");for(let l of s)e[l]?e[l]+=e[i]:e[l]=e[i];delete e[i]}}updateGroupByTeamCount(){return this.groupByAndCount(this.playersLoaded.filter(i=>1===i.team_id),"team","B")}getPriceEstimation(e){return Math.round(e/2)}editField(e){this.teamDataService.updateField(e.id,"isEdit",!e.isEdit),this.filterOptions()}loadCSV(){this.loading=!0,setTimeout(()=>{this.teamDataService.resetDataToCSV(),this.groupByTeam={},this.computedFormations=[],this.roleInfo=[],this.bestEleven=[],this.updateAnalyses(),this.openSnackBar("Caricati "+this.playersLoaded.length.toString()+" giocatori","OK"),this.loading=!1},0),setTimeout(()=>{this.groupByTeam=this.updateGroupByTeamCount(),this.computedFormations=this.rateFormationsByPlayers(),this.roleInfo=this.evaluatePlayersInSquad(),this.bestEleven=this.parseBestEleven(),this.getMyAmountRemaining(),0===this.chart.chart.data.datasets.length||(this.chart.chart.data.datasets[0].data=Object.values(this.groupByTeam),this.chart.chart.data.labels=Object.keys(this.groupByTeam)),this.chart.chart.update()},100)}remove(e){const i=this.playersLoaded.indexOf(e);this.playersLoaded.splice(i,1),this.teamDataService.setData(this.playersLoaded),this.filterOptions()}getNumPlayers(){return this.playersLoaded.filter(e=>1===e.team_id).length}getDistinctTeams(){return this.DISTINCT_TEAMS}getDistinctRoles(){return this.DISTINCT_ROLES}getDistinctTeamsKeys(){return Object.keys(this.getDistinctTeams()).map(e=>parseInt(e))}getDistinctTeamsKeysTeamsOnly(){return Object.keys(this.getDistinctTeams()).map(e=>parseInt(e)).filter(e=>0!==e)}getTeamName(e){return this.getDistinctTeams()[e]}switchFirstTeamFilter(){this.aggregateFilters(),this.filterOptions()}switchPenaltyTakerFilter(){this.aggregateFilters(),this.filterOptions()}switchFreeKickTakerFilter(){this.aggregateFilters(),this.filterOptions()}switchInjuredFilter(){this.aggregateFilters(),this.filterOptions()}getDistinctValues(e){const i=new Set;return this.playersLoaded.forEach(s=>{if(e===this.roleColumn){void 0===s&&console.log("undefined");const l=s[e].split(";");for(let u=0;u<l.length;u++)i.add(l[u])}else i.add(s[e])}),Array.from(i).sort()}aggregateFilters(){this.loading||(this.dataSource.filterPredicate=(e,i)=>(!this.nameFilter||this.nameFilterPredicate(e,this.nameFilter))&&(void 0===this.userFilter||this.userFilter<0||this.userFilterPredicate(e,this.userFilter))&&(!this.roleFilter||this.roleFilterPredicate(e,this.roleFilter))&&(!this.teamFilter||this.teamFilterPredicate(e,this.teamFilter))&&(!this.ratingFilter||this.ratingFilterPredicate(e,this.ratingFilter))&&(!this.valueFilter||this.valueFilterPredicate(e,this.valueFilter))&&this.infoFilterPredicate(e,this.firstTeamFilter,this.penaltyTakerFilter,this.freeKickTakerFilter,this.injuredFilter),this.dataSource.filter="#",this.dataSource.filter="A",this.dataSource.paginator&&this.dataSource.paginator.firstPage())}filterByColumnValue(e){this.roleFilter=e,this.aggregateFilters()}downloadCSV(){const e=tt.unparse(this.dataSource.data),i=new Blob([e],{type:"text/csv"}),s=window.URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.download="data.csv",l.click(),window.URL.revokeObjectURL(s)}filterByColumnValueUser(e){this.userFilter=e,this.aggregateFilters()}filterByColumnValueTeam(e){this.teamFilter=e,this.aggregateFilters()}filterByColumnValueRating(e){this.ratingFilter=e,this.aggregateFilters()}filterByColumnValueMantra(e){this.valueFilter=e.target.value.trim().toLowerCase(),this.aggregateFilters()}applyFilter(e){this.nameFilter=e.target.value.trim().toLowerCase(),this.aggregateFilters()}filter(){this.filterOptions()}filterAdder(){this.filterOptions()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.sBO),t.Y36(At),t.Y36(ot.uw),t.Y36(m.ux),t.Y36(a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-tables"]],viewQuery:function(e,i){if(1&e&&(t.Gf(w.jh,5),t.Gf(yt,5),t.Gf(X,5),t.Gf(Nt,5),t.Gf(St,5),t.Gf(dt.NW,5),t.Gf(nt.YE,5),t.Gf(y.BZ,5)),2&e){let s;t.iGM(s=t.CRH())&&(i.chart=s.first),t.iGM(s=t.CRH())&&(i.input=s.first),t.iGM(s=t.CRH())&&(i.inputAdder=s.first),t.iGM(s=t.CRH())&&(i.inputPrice=s.first),t.iGM(s=t.CRH())&&(i.inputTeam=s.first),t.iGM(s=t.CRH())&&(i.paginator=s.first),t.iGM(s=t.CRH())&&(i.sort=s.first),t.iGM(s=t.CRH())&&(i.table=s.first)}},decls:250,vars:48,consts:[[1,"header","bg-gradient-danger","pb-5","pt-5","pt-md-5"],[1,"container-fluid"],[1,"header-body"],["class","overlay",4,"ngIf"],["mat-tab-label",""],[1,"accordion-container"],["multi","",4,"ngFor","ngForOf"],[1,"card","shadow"],[1,"card-container"],[1,"my-card"],[1,"my-card-content"],[1,"btn-inner--icon"],[1,"fas","fa-bullhorn"],["class","btn btn-icon btn-sm btn-danger","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-success","type","button","mat-button","",4,"ngIf"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-primary"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-warning"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-secondary"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-success"],[4,"ngFor","ngForOf"],["class","example-form",4,"ngIf"],[1,"example-form"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-primary",3,"click"],[1,"fas","fa-user"],["id","imageModal",1,"modal"],[1,"close",3,"click"],["src","https://content.fantacalcio.it/web/img/medium/fb125077-b00a-4587-9139-be740128a4e4.jpg","alt","Description",1,"modal-content"],[1,"team-field"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["value","-1"],[1,"player-field"],["type","text","placeholder","Pick one","matInput","",3,"formControl","matAutocomplete","input","focus","keyup"],["inputmine",""],["requireSelection","",3,"optionSelected"],["auto","matAutocomplete"],[1,"role-field"],[3,"formControl","selectionChange",4,"ngIf"],["value",""],[1,"value-field"],["type","text","placeholder","Minimum Value","matInput","",3,"formControl","keyup"],["matTooltip","Se selezionato, mostra solo il ruolo migliore tra i disponibili es. Ds, Dc viene mostrato come Dc","matTooltipPosition","left","name","simpleRoles",3,"ngModel","ngModelChange","change"],["name","firstTeam",3,"ngModel","ngModelChange","change"],["name","penalty",3,"ngModel","ngModelChange","change"],["name","freeKick",3,"ngModel","ngModelChange","change"],["name","injured",3,"ngModel","ngModelChange","change"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-primary","btn-reset",3,"click"],[1,"fas","fa-trash"],[1,"table-responsive"],["mat-table","","matSort","",1,"table","align-items-center","table-flush",3,"dataSource"],["matColumnDef","team_id"],["class","thead-light","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","name"],["matColumnDef","team"],["matColumnDef","best_role_mantra"],["matColumnDef","role_mantra"],["class","thead-light","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","value_mantra_1000"],["matColumnDef","price"],["matColumnDef","rating"],["matColumnDef","first_team"],["matColumnDef","isEdit"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["class","mat-row","mat-footer-row","",4,"matFooterRowDef"],["aria-label","Select page of users",3,"pageSizeOptions"],[1,"card-footer","py-4"],["aria-label","..."],["cols","1","rowHeight","430px","gutterSize","16px"],[1,"analysis-card"],[1,"example-chart"],[1,"card-title","text-uppercase","text-muted","mb-0"],[3,"ngModel","selectionChange","ngModelChange"],["inputteam",""],["class","table align-items-center table-flush small-table",4,"ngIf"],["rowHeight","430px","gutterSize","16px",3,"cols"],["baseChart","",3,"type","datasets","labels","options","plugins","legend"],[1,"col-auto"],[1,"card-header","bg-transparent","border-0"],["type","button","mat-button","","matTooltip","Scarica i dati salvati come .CSV","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-primary",3,"click"],[1,"fas","fa-download"],["type","file",1,"hidden-file-input",3,"change"],["fileInput",""],["mat-button","","matTooltip","Carica un .CSV scaricato in precedenza","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-primary",3,"click"],[1,"fas","fa-upload"],["mat-button","","matTooltip","Riporta i dati allo stato originario","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-primary",3,"click"],[1,"fas","fa-power-off"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-success",3,"click"],[1,"fas","fa-table"],[1,"url-edit"],["matInput","","type","text",3,"ngModel","ngModelChange"],[1,"container-fluid","mt--7"],[1,"overlay"],["multi",""],[3,"data","teamId","teamName"],[1,"fas","fa-play"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-danger"],[4,"ngIf"],[1,"fas","fa-hand-point-right"],["class","btn btn-icon btn-sm btn-danger","type","button","mat-button","",4,"ngFor","ngForOf"],["class","btn btn-icon btn-sm btn-primary","type","button","mat-button","",4,"ngFor","ngForOf"],["type","text","placeholder","Pick one","matInput","",3,"formControl","matAutocomplete","input","focus"],["inputadder",""],["autoAdder","matAutocomplete"],["type","text","placeholder","Prezzo","matInput","",3,"formControl"],["inputprice",""],[3,"formControl"],[3,"value"],["type","text","placeholder","Minimum Value","matInput","","disabled","","name","teaamCandidate",3,"ngModel","ngModelChange"],["type","text","placeholder","Minimum Value","matInput","","disabled","","name","ratingCandidate",3,"ngModel","ngModelChange"],["type","text","placeholder","Minimum Value","matInput","","disabled","","name","roleCandidate",3,"ngModel","ngModelChange"],[1,"fas","fa-plus"],["mat-header-cell","","mat-sort-header","",1,"thead-light"],["mat-cell",""],["class","btn btn-icon btn-sm btn-primary","type","button","mat-button","",4,"ngIf"],[1,"fas","fa-thumbs-up"],[1,"fas","fa-star"],[1,"fas","fa-ban"],[1,"squad-edit"],["name","rating",3,"ngModel","ngModelChange"],["mat-footer-cell",""],["matTooltip","Mostra solo il ruolo migliore tra i disponibili es. Ds, Dc viene mostrato come Dc","matTooltipPosition","above"],["mat-header-cell","",1,"thead-light"],[1,"rating-edit"],["matInput","","required","","pattern","[0-9]+",3,"type","ngModel","ngModelChange"],["price","ngModel"],["class","btn btn-icon btn-sm btn-info","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-secondary","type","button","mat-button","",4,"ngIf"],["class","btn btn-icon btn-sm btn-warning","type","button","mat-button","",4,"ngIf"],["type","button","mat-button","",1,"btn","btn-icon","btn-sm","btn-info"],["value","A"],["value","A-"],["value","B"],["value","C"],["value","D"],["value","F"],["class","btn btn-icon btn-sm btn-success","type","button","mat-button","","matTooltip","Titolare","matTooltipPosition","above",4,"ngIf"],["class","btn btn-icon btn-sm btn-primary","type","button","mat-button","","matTooltip","Rigorista","matTooltipPosition","above",4,"ngIf"],["class","btn btn-icon btn-sm btn-secondary","type","button","mat-button","","matTooltip","Tira punizioni e angoli","matTooltipPosition","above",4,"ngIf"],["class","btn btn-icon btn-sm btn-danger","type","button","mat-button","","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["type","button","mat-button","","matTooltip","Titolare","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-success"],[1,"fas","fa-child"],["type","button","mat-button","","matTooltip","Rigorista","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-primary"],[1,"fas","fa-futbol"],["type","button","mat-button","","matTooltip","Tira punizioni e angoli","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-secondary"],[1,"fas","fa-bullseye"],["type","button","mat-button","","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-danger",3,"matTooltip"],[1,"fas","fa-briefcase-medical"],["class","btn-edit",4,"ngIf"],[1,"btn-edit"],[1,"fas","fa-check"],[1,"fas","fa-edit"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],["mat-footer-row","",1,"mat-row"],[1,"fas","fa-chart-line"],[1,"table","align-items-center","table-flush","small-table"],[1,"smallcell"],["class","smallcell",4,"ngIf"],["type","button","mat-button","","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-warning",3,"matTooltip"],["type","button","mat-button","","matTooltipPosition","above",1,"btn","btn-icon","btn-sm","btn-success",3,"matTooltip"],[1,"fas","fa-equals"],[1,"fas","fa-thumbs-down"],[1,"fas","fa-exclamation-circle"],[1,"fas","fa-exclamation-triangle"],[1,"fas","fa-users-cog"]],template:function(e,i){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,Et,2,0,"div",3),t.qZA()()(),t.TgZ(4,"mat-tab-group")(5,"mat-tab"),t.YNc(6,Mt,3,0,"ng-template",4),t._UZ(7,"br"),t.TgZ(8,"div",5),t.YNc(9,kt,2,3,"mat-accordion",6),t.qZA()(),t.TgZ(10,"mat-tab"),t.YNc(11,Pt,3,0,"ng-template",4),t.TgZ(12,"div")(13,"div")(14,"div",7)(15,"div",8)(16,"div",9)(17,"mat-card",10)(18,"mat-card-content")(19,"h4"),t._uU(20,"Analisi Squadra"),t.qZA(),t._UZ(21,"mat-divider")(22,"br"),t.TgZ(23,"h5")(24,"span",11),t._UZ(25,"i",12),t.qZA(),t._uU(26," Hai "),t.TgZ(27,"b"),t.YNc(28,Jt,2,1,"button",13),t.YNc(29,Yt,2,1,"button",14),t.qZA(),t._uU(30," crediti e "),t.TgZ(31,"button",15),t._uU(32),t.qZA(),t._uU(33,"giocatori, di cui "),t.TgZ(34,"button",16),t._uU(35),t.qZA(),t._uU(36," infortunati, "),t.TgZ(37,"button",15),t._uU(38),t.qZA(),t._uU(39," titolari, "),t.TgZ(40,"button",17),t._uU(41),t.qZA(),t._uU(42," rigoristi, "),t.TgZ(43,"button",18),t._uU(44),t.qZA(),t._uU(45," stelle. "),t.qZA(),t.YNc(46,zt,3,2,"span",19),t.YNc(47,Ht,20,6,"form",20),t.YNc(48,Xt,17,3,"form",20),t.TgZ(49,"form",21)(50,"button",22),t.NdJ("click",function(){return i.openImageModal()}),t._uU(51,"Vedi Moduli Mantra 23-24 "),t.TgZ(52,"span",11),t._UZ(53,"i",23),t.qZA()(),t.TgZ(54,"div",24)(55,"span",25),t.NdJ("click",function(){return i.closeImageModal()}),t._uU(56,"\xd7"),t.qZA(),t._UZ(57,"img",26),t.qZA()()()()(),t._UZ(58,"br"),t.TgZ(59,"div",9)(60,"mat-card",10)(61,"mat-card-content")(62,"h4"),t._uU(63,"Filtra giocatori nel Listone"),t.qZA(),t._UZ(64,"mat-divider"),t.TgZ(65,"form",21)(66,"mat-form-field",27)(67,"mat-label"),t._uU(68,"Squadra"),t.qZA(),t.TgZ(69,"mat-select",28),t.NdJ("selectionChange",function(u){return i.filterByColumnValueUser(u.value)}),t.YNc(70,te,2,2,"mat-option",29),t.TgZ(71,"mat-option",30)(72,"b"),t._uU(73,"Tutti"),t.qZA()()()(),t.TgZ(74,"mat-form-field",31)(75,"mat-label"),t._uU(76,"Giocatore ..."),t.qZA(),t.TgZ(77,"input",32,33),t.NdJ("input",function(){return i.filter()})("focus",function(){return i.filter()})("keyup",function(u){return i.applyFilter(u)}),t.qZA(),t.TgZ(79,"mat-autocomplete",34,35),t.NdJ("optionSelected",function(u){return i.onOptionSelected(u)}),t.YNc(81,ee,2,2,"mat-option",29),t.qZA()(),t.TgZ(82,"mat-form-field",36)(83,"mat-label"),t._uU(84,"Ruolo"),t.qZA(),t.YNc(85,ie,5,2,"mat-select",37),t.YNc(86,ae,5,2,"mat-select",37),t.qZA()(),t.TgZ(87,"form",21)(88,"mat-form-field",27)(89,"mat-label"),t._uU(90,"Squadra"),t.qZA(),t.TgZ(91,"mat-select",28),t.NdJ("selectionChange",function(u){return i.filterByColumnValueTeam(u.value)}),t.YNc(92,re,2,2,"mat-option",29),t.TgZ(93,"mat-option",38)(94,"b"),t._uU(95,"Qualsiasi"),t.qZA()()()(),t.TgZ(96,"mat-form-field",36)(97,"mat-label"),t._uU(98,"Rating"),t.qZA(),t.TgZ(99,"mat-select",28),t.NdJ("selectionChange",function(u){return i.filterByColumnValueRating(u.value)}),t.YNc(100,se,2,2,"mat-option",29),t.TgZ(101,"mat-option",38)(102,"b"),t._uU(103,"Qualsiasi"),t.qZA()()()(),t.TgZ(104,"mat-form-field",39)(105,"mat-label"),t._uU(106,"Valore min"),t.qZA(),t.TgZ(107,"input",40),t.NdJ("keyup",function(u){return i.filterByColumnValueMantra(u)}),t.qZA()()(),t.TgZ(108,"form",21)(109,"mat-checkbox",41),t.NdJ("ngModelChange",function(u){return i.areSimpleRoles=u})("change",function(){return i.onCheckboxChange()}),t._uU(110,"Ruoli Migliori"),t.qZA(),t.TgZ(111,"mat-checkbox",42),t.NdJ("ngModelChange",function(u){return i.firstTeamFilter=u})("change",function(){return i.switchFirstTeamFilter()}),t._uU(112,"Titolari"),t.qZA(),t.TgZ(113,"mat-checkbox",43),t.NdJ("ngModelChange",function(u){return i.penaltyTakerFilter=u})("change",function(){return i.switchPenaltyTakerFilter()}),t._uU(114,"Rigoristi"),t.qZA(),t.TgZ(115,"mat-checkbox",44),t.NdJ("ngModelChange",function(u){return i.freeKickTakerFilter=u})("change",function(){return i.switchFreeKickTakerFilter()}),t._uU(116,"Tiratori"),t.qZA(),t.TgZ(117,"mat-checkbox",45),t.NdJ("ngModelChange",function(u){return i.injuredFilter=u})("change",function(){return i.switchInjuredFilter()}),t._uU(118,"Infortunati"),t.qZA()(),t.TgZ(119,"form",21)(120,"button",46),t.NdJ("click",function(){return i.selectMyTeamOnly()}),t._uU(121," La Mia Squadra "),t.TgZ(122,"span",11),t._UZ(123,"i",23),t.qZA()(),t.TgZ(124,"button",46),t.NdJ("click",function(){return i.deleteFilters()}),t._uU(125," Cancella Tutti i Filtri "),t.TgZ(126,"span",11),t._UZ(127,"i",47),t.qZA()()()()()(),t._UZ(128,"br"),t.qZA(),t.TgZ(129,"div",48)(130,"table",49),t.ynx(131,50),t.YNc(132,le,2,0,"th",51),t.YNc(133,fe,3,2,"td",52),t.YNc(134,he,1,0,"td",53),t.BQk(),t.ynx(135,54),t.YNc(136,ge,2,0,"th",51),t.YNc(137,be,3,1,"td",52),t.YNc(138,Te,4,1,"td",53),t.BQk(),t.ynx(139,55),t.YNc(140,Ce,2,0,"th",51),t.YNc(141,xe,2,1,"td",52),t.YNc(142,ye,1,0,"td",53),t.BQk(),t.ynx(143,56),t.YNc(144,Ze,3,0,"th",51),t.YNc(145,Ae,2,1,"td",52),t.YNc(146,Se,1,0,"td",53),t.BQk(),t.ynx(147,57),t.YNc(148,we,2,0,"th",58),t.YNc(149,Ue,2,1,"td",52),t.YNc(150,Ne,1,0,"td",53),t.BQk(),t.ynx(151,59),t.YNc(152,De,2,0,"th",51),t.YNc(153,Fe,3,1,"td",52),t.YNc(154,Oe,1,0,"td",53),t.BQk(),t.ynx(155,60),t.YNc(156,Re,2,0,"th",51),t.YNc(157,ke,3,2,"td",52),t.YNc(158,Pe,1,0,"td",53),t.BQk(),t.ynx(159,61),t.YNc(160,Je,2,0,"th",51),t.YNc(161,ze,3,2,"td",52),t.YNc(162,Ke,1,0,"td",53),t.BQk(),t.ynx(163,62),t.YNc(164,We,2,0,"th",58),t.YNc(165,nn,5,4,"td",52),t.YNc(166,on,1,0,"td",53),t.BQk(),t.ynx(167,63),t.YNc(168,an,1,0,"th",51),t.YNc(169,ln,3,2,"td",52),t.YNc(170,cn,1,0,"td",53),t.BQk(),t.YNc(171,un,1,0,"tr",64),t.YNc(172,mn,1,0,"tr",65),t.YNc(173,pn,3,0,"tr",66),t.YNc(174,dn,1,0,"tr",67),t.qZA(),t._UZ(175,"mat-paginator",68),t.qZA(),t.TgZ(176,"div",69),t._UZ(177,"nav",70),t.qZA()()()()(),t.TgZ(178,"mat-tab"),t.YNc(179,_n,3,0,"ng-template",4),t._UZ(180,"br"),t.TgZ(181,"mat-grid-list",71)(182,"mat-grid-tile")(183,"mat-card",72)(184,"mat-card-content",73)(185,"h5",74),t._uU(186," Migliore Formazione modulo "),t.qZA(),t.TgZ(187,"mat-form-field")(188,"mat-select",75,76),t.NdJ("selectionChange",function(){return i.updateBestEleven()})("ngModelChange",function(u){return i.formationChosen=u}),t.YNc(190,fn,2,2,"mat-option",29),t.qZA()(),t.YNc(191,Dn,15,1,"table",77),t.qZA()()()(),t._UZ(192,"br"),t.TgZ(193,"mat-grid-list",78)(194,"mat-grid-tile")(195,"mat-card",72)(196,"mat-card-content",73)(197,"h5",74),t._uU(198," Squadre giocatori migliori "),t.qZA(),t.TgZ(199,"div",73),t._UZ(200,"canvas",79),t.qZA()()()(),t.TgZ(201,"mat-grid-tile")(202,"mat-card",72)(203,"mat-card-content",73)(204,"h5",74),t._uU(205," Formazioni Migliori "),t.qZA(),t.TgZ(206,"div",80),t.YNc(207,Bn,11,1,"table",77),t.qZA()()()(),t.TgZ(208,"mat-grid-tile")(209,"mat-card",72)(210,"mat-card-content",73)(211,"h5",74),t._uU(212," Analisi Ruolo "),t.qZA(),t.TgZ(213,"div",80),t.YNc(214,si,15,1,"table",77),t.qZA()()()()()(),t.TgZ(215,"mat-tab"),t.YNc(216,li,3,0,"ng-template",4),t.TgZ(217,"div")(218,"div")(219,"div",7)(220,"div",81),t._UZ(221,"br"),t.TgZ(222,"button",82),t.NdJ("click",function(){return i.downloadCSV()}),t.TgZ(223,"span",11),t._uU(224,"Scarica tutti i dati come .CSV "),t._UZ(225,"i",83),t.qZA()(),t._UZ(226,"br")(227,"br"),t.TgZ(228,"input",84,85),t.NdJ("change",function(u){return i.onFileChange(u)}),t.qZA(),t.TgZ(230,"button",86),t.NdJ("click",function(){t.CHM(s);const u=t.MAs(229);return t.KtG(u.click())}),t.TgZ(231,"span",11),t._uU(232,"Ricarica tutti i dati da un file .CSV "),t._UZ(233,"i",87),t.qZA()(),t._UZ(234,"br")(235,"br"),t.TgZ(236,"button",88),t.NdJ("click",function(){return i.openConfirmationDialogLoadCSV()}),t.TgZ(237,"span",11),t._uU(238,"Ripristina dati allo stato iniziale "),t._UZ(239,"i",89),t.qZA()(),t._UZ(240,"br")(241,"br"),t.TgZ(242,"button",90),t.NdJ("click",function(){return i.getDataFromSheets()}),t._uU(243,"Carica dati da Google Sheets "),t.TgZ(244,"span",11),t._UZ(245,"i",91),t.qZA()(),t._uU(246,"URL : "),t.TgZ(247,"mat-form-field",92)(248,"input",93),t.NdJ("ngModelChange",function(u){return i.sheetSource=u}),t.qZA()()()()()()()(),t._UZ(249,"div",94)}if(2&e){const s=t.MAs(80);t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(6),t.Q6J("ngForOf",i.getDistinctTeamsKeysTeamsOnly()),t.xp6(19),t.Q6J("ngIf",i.amountRemaining<50),t.xp6(1),t.Q6J("ngIf",i.amountRemaining>=50),t.xp6(3),t.hij(" ",i.getNumPlayers()," "),t.xp6(3),t.hij(" ",i.getInfoPlayers().injured," "),t.xp6(3),t.hij(" ",i.getInfoPlayers().firstTeam," "),t.xp6(3),t.hij(" ",i.getInfoPlayers().penaltyTakers," "),t.xp6(3),t.hij(" ",i.getInfoPlayers().stars," "),t.xp6(2),t.Q6J("ngForOf",i.bestFormationsFound),t.xp6(1),t.Q6J("ngIf",i.adderForm),t.xp6(1),t.Q6J("ngIf",i.adderForm),t.xp6(21),t.Q6J("formControl",i.inputsquadsrc),t.xp6(1),t.Q6J("ngForOf",i.getDistinctTeamsKeys()),t.xp6(7),t.Q6J("formControl",i.myControl)("matAutocomplete",s),t.xp6(4),t.Q6J("ngForOf",i.searchFilterOptions),t.xp6(4),t.Q6J("ngIf",i.areSimpleRoles),t.xp6(1),t.Q6J("ngIf",!i.areSimpleRoles),t.xp6(5),t.Q6J("formControl",i.inputteamsrc),t.xp6(1),t.Q6J("ngForOf",i.getDistinctValues("team")),t.xp6(7),t.Q6J("formControl",i.inputratingsrc),t.xp6(1),t.Q6J("ngForOf",i.getDistinctValues("rating")),t.xp6(7),t.Q6J("formControl",i.inputvaluesrc),t.xp6(2),t.Q6J("ngModel",i.areSimpleRoles),t.xp6(2),t.Q6J("ngModel",i.firstTeamFilter),t.xp6(2),t.Q6J("ngModel",i.penaltyTakerFilter),t.xp6(2),t.Q6J("ngModel",i.freeKickTakerFilter),t.xp6(2),t.Q6J("ngModel",i.injuredFilter),t.xp6(13),t.Q6J("dataSource",i.dataSource),t.xp6(41),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("matFooterRowDef",i.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(47,ci)),t.xp6(13),t.Q6J("ngModel",i.formationChosen),t.xp6(2),t.Q6J("ngForOf",i.formationNames),t.xp6(1),t.Q6J("ngIf",i.getBestEleven()),t.xp6(2),t.Q6J("cols",i.cols),t.xp6(7),t.Q6J("type","pie")("datasets",i.pieChartDatasets)("labels",i.pieChartLabels)("options",i.pieChartOptions)("plugins",i.pieChartPlugins)("legend",i.pieChartLegend),t.xp6(7),t.Q6J("ngIf",i.computedFormations),t.xp6(7),t.Q6J("ngIf",i.roleInfo.Por),t.xp6(34),t.Q6J("ngModel",i.sheetSource)}},dependencies:[pt.sg,pt.O5,x._Y,x.Fj,x.JJ,x.JL,x.Q7,x.c5,x.On,x.F,y.BZ,y.fO,y.as,y.w1,y.Dz,y.nj,y.mD,y.Ke,y.ge,y.ev,y.yh,y.XQ,y.Gk,y.Q2,y.Ee,p.XC,p.ZL,f.ey,b.TO,b.KE,b.hX,v.Nt,x.oH,dt.NW,nt.YE,nt.nU,Y.gD,F.gM,_.Il,_.DX,O.a8,O.dn,h.pp,gt.lW,z.oG,w.jh,P.SP,P.uD,P.uX,d.Ou,N.d,H],styles:["table[_ngcontent-%COMP%]{width:100%;justify-content:center;align-items:center}.mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.example-chart[_ngcontent-%COMP%]{width:100%;height:100%}.example-form[_ngcontent-%COMP%]{width:100%;margin-top:6px;display:flex;flex-direction:row;justify-content:center;align-items:center}.example-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{padding:0 10px}.card-container[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center;align-items:center;flex-wrap:wrap;justify-content:space-between}.my-card-content[_ngcontent-%COMP%]{width:100%;margin:20px}.accordion-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}mat-accordion[_ngcontent-%COMP%]{max-width:60%;width:100%;margin-bottom:6px}.my-card[_ngcontent-%COMP%]{width:100%;justify-content:center;align-items:center;display:flex;flex:0 0 calc(50% - 10px);margin-bottom:20px}@media screen and (max-width: 1280px){.my-card[_ngcontent-%COMP%]{flex:0 0 90%;margin:10px auto}}.analysis-card[_ngcontent-%COMP%]{width:100%;justify-content:center;align-items:center;display:flex;margin-bottom:20px}@media (max-width: 767px){.my-card[_ngcontent-%COMP%]{flex:0 0 100%;margin-left:0;margin-right:0}}.btn-reset[_ngcontent-%COMP%]{width:50%;justify-content:center;align-items:center;display:flex;flex-direction:row}.example-full-width[_ngcontent-%COMP%]{width:80%}.player-field[_ngcontent-%COMP%]{width:50%}.team-field[_ngcontent-%COMP%]{width:30%}.value-field[_ngcontent-%COMP%]{width:25%}.role-field[_ngcontent-%COMP%]{width:20%}.squad-edit[_ngcontent-%COMP%]{max-width:80px}.url-edit[_ngcontent-%COMP%]{width:50%}.rating-edit[_ngcontent-%COMP%]{max-width:50px}.hidden-file-input[_ngcontent-%COMP%]{display:none}.mat-raised-button[_ngcontent-%COMP%], .mat-flat-button[_ngcontent-%COMP%], .mat-stroked-button[_ngcontent-%COMP%], .mat-button[_ngcontent-%COMP%]{min-width:16px!important;line-height:26px!important;padding:0 8px!important}mat-checkbox[_ngcontent-%COMP%]{margin-right:20px}.example-form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-label[_ngcontent-%COMP%]{line-height:normal}.responsive-image[_ngcontent-%COMP%]{max-width:100%;height:auto;display:block}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1;padding-top:100px;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#0009}.modal-content[_ngcontent-%COMP%]{margin:auto;display:block;width:80%;max-width:700px}.close[_ngcontent-%COMP%]{position:absolute;top:15px;right:35px;color:#fff;font-size:40px;font-weight:700;transition:.3s}.close[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:focus{color:#bbb;text-decoration:none;cursor:pointer}.mat-row[_ngcontent-%COMP%]{height:32px!important}.smallcell[_ngcontent-%COMP%]{padding:0;max-width:16px!important;font-size:12px;justify-content:center;align-items:center;text-align:center}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:1000;display:flex;justify-content:center;align-items:center}"]}),n})();var mi=Z(7556);const pi=[{path:"tables",component:ui,canActivate:[(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){var s=this;return(0,G.Z)(function*(){return!!(yield s.authService.isAuthenticated())||s.router.parseUrl("/login")})()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.e),t.LFG(xt.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]}];var di=Z(5454),_i=Z(5415);let fi=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[At],imports:[pt.ez,xt.Bz.forChild(pi),x.u5,Ct.JF,di.IJ,C,_i.T,y.p0,p.Bb,b.lN,v.c,x.UX,dt.TU,nt.JX,p.Bb,Ct.JF,Y.LD,F.AV,_.N6,O.QW,h.To,ot.Is,gt.ot,z.p9,w.vQ,P.Nh,d.Cq,m.ZX,N.t]}),n})()},3028:function(Rt,wt){var Z,xt;Z=function pt(){"use strict";var x=typeof self<"u"?self:typeof window<"u"?window:void 0!==x?x:{},t=!x.document&&!!x.postMessage,It=x.IS_PAPA_WORKER||!1,Zt={},qt=0,C={parse:function(r,a){var m=(a=a||{}).dynamicTyping||!1;if(w(m)&&(a.dynamicTypingFunction=m,m={}),a.dynamicTyping=m,a.transform=!!w(a.transform)&&a.transform,a.worker&&C.WORKERS_SUPPORTED){var p=function(){if(!C.WORKERS_SUPPORTED)return!1;var Y,F,b=(Y=x.URL||x.webkitURL||null,F=pt.toString(),C.BLOB_URL||(C.BLOB_URL=Y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",F,")();"],{type:"text/javascript"})))),v=new x.Worker(b);return v.onmessage=Ft,v.id=qt++,Zt[v.id]=v}();return p.userStep=a.step,p.userChunk=a.chunk,p.userComplete=a.complete,p.userError=a.error,a.step=w(a.step),a.chunk=w(a.chunk),a.complete=w(a.complete),a.error=w(a.error),delete a.worker,void p.postMessage({input:r,config:a,workerId:p.id})}var b,f=null;return"string"==typeof r?(r=65279===(b=r).charCodeAt(0)?b.slice(1):b,f=a.download?new dt(a):new y(a)):!0===r.readable&&w(r.read)&&w(r.on)?f=new _t(a):(x.File&&r instanceof File||r instanceof Object)&&(f=new nt(a)),f.stream(r)},unparse:function(r,a){var m=!1,p=!0,f=",",b="\r\n",v='"',Y=v+v,F=!1,_=null,O=!1;!function(){if("object"==typeof a){if("string"!=typeof a.delimiter||C.BAD_DELIMITERS.filter(function(d){return-1!==a.delimiter.indexOf(d)}).length||(f=a.delimiter),("boolean"==typeof a.quotes||"function"==typeof a.quotes||Array.isArray(a.quotes))&&(m=a.quotes),"boolean"!=typeof a.skipEmptyLines&&"string"!=typeof a.skipEmptyLines||(F=a.skipEmptyLines),"string"==typeof a.newline&&(b=a.newline),"string"==typeof a.quoteChar&&(v=a.quoteChar),"boolean"==typeof a.header&&(p=a.header),Array.isArray(a.columns)){if(0===a.columns.length)throw new Error("Option columns is empty");_=a.columns}void 0!==a.escapeChar&&(Y=a.escapeChar+v),("boolean"==typeof a.escapeFormulae||a.escapeFormulae instanceof RegExp)&&(O=a.escapeFormulae instanceof RegExp?a.escapeFormulae:/^[=+\-@\t\r].*$/)}}();var h=new RegExp(Tt(v),"g");if("string"==typeof r&&(r=JSON.parse(r)),Array.isArray(r)){if(!r.length||Array.isArray(r[0]))return z(null,r,F);if("object"==typeof r[0])return z(_||Object.keys(r[0]),r,F)}else if("object"==typeof r)return"string"==typeof r.data&&(r.data=JSON.parse(r.data)),Array.isArray(r.data)&&(r.fields||(r.fields=r.meta&&r.meta.fields||_),r.fields||(r.fields=Array.isArray(r.data[0])?r.fields:"object"==typeof r.data[0]?Object.keys(r.data[0]):[]),Array.isArray(r.data[0])||"object"==typeof r.data[0]||(r.data=[r.data])),z(r.fields||[],r.data||[],F);throw new Error("Unable to serialize unrecognized input");function z(d,N,j){var E="";"string"==typeof d&&(d=JSON.parse(d)),"string"==typeof N&&(N=JSON.parse(N));var B=Array.isArray(d)&&0<d.length,Q=!Array.isArray(N[0]);if(B&&p){for(var L=0;L<d.length;L++)0<L&&(E+=f),E+=P(d[L],L);0<N.length&&(E+=b)}for(var g=0;g<N.length;g++){var S=B?d.length:N[g].length,R=!1,J=B?0===Object.keys(N[g]).length:0===N[g].length;if(j&&!B&&(R="greedy"===j?""===N[g].join("").trim():1===N[g].length&&0===N[g][0].length),"greedy"===j&&B){for(var U=[],$=0;$<S;$++)U.push(N[g][Q?d[$]:$]);R=""===U.join("").trim()}if(!R){for(var D=0;D<S;D++)0<D&&!J&&(E+=f),E+=P(N[g][B&&Q?d[D]:D],D);g<N.length-1&&(!j||0<S&&!J)&&(E+=b)}}return E}function P(d,N){if(null==d)return"";if(d.constructor===Date)return JSON.stringify(d).slice(1,25);var j=!1;O&&"string"==typeof d&&O.test(d)&&(d="'"+d,j=!0);var E=d.toString().replace(h,Y);return(j=j||!0===m||"function"==typeof m&&m(d,N)||Array.isArray(m)&&m[N]||function(B,Q){for(var L=0;L<Q.length;L++)if(-1<B.indexOf(Q[L]))return!0;return!1}(E,C.BAD_DELIMITERS)||-1<E.indexOf(f)||" "===E.charAt(0)||" "===E.charAt(E.length-1))?v+E+v:E}}};if(C.RECORD_SEP=String.fromCharCode(30),C.UNIT_SEP=String.fromCharCode(31),C.BYTE_ORDER_MARK="\ufeff",C.BAD_DELIMITERS=["\r","\n",'"',C.BYTE_ORDER_MARK],C.WORKERS_SUPPORTED=!t&&!!x.Worker,C.NODE_STREAM_INPUT=1,C.LocalChunkSize=10485760,C.RemoteChunkSize=5242880,C.DefaultDelimiter=",",C.Parser=vt,C.ParserHandle=Ut,C.NetworkStreamer=dt,C.FileStreamer=nt,C.StringStreamer=y,C.ReadableStreamStreamer=_t,x.jQuery){var G=x.jQuery;G.fn.parse=function(r){var a=r.config||{},m=[];return this.each(function(b){if("INPUT"!==G(this).prop("tagName").toUpperCase()||"file"!==G(this).attr("type").toLowerCase()||!x.FileReader||!this.files||0===this.files.length)return!0;for(var v=0;v<this.files.length;v++)m.push({file:this.files[v],inputElem:this,instanceConfig:G.extend({},a)})}),p(),this;function p(){if(0!==m.length){var v,Y,F,_=m[0];if(w(r.before)){var O=r.before(_.file,_.inputElem);if("object"==typeof O){if("abort"===O.action)return"AbortError",v=_.file,Y=_.inputElem,F=O.reason,void(w(r.error)&&r.error({name:"AbortError"},v,Y,F));if("skip"===O.action)return void f();"object"==typeof O.config&&(_.instanceConfig=G.extend(_.instanceConfig,O.config))}else if("skip"===O)return void f()}var h=_.instanceConfig.complete;_.instanceConfig.complete=function(z){w(h)&&h(z,_.file,_.inputElem),f()},C.parse(_.file,_.instanceConfig)}else w(r.complete)&&r.complete()}function f(){m.splice(0,1),p()}}}function tt(r){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(a){var m=gt(a);m.chunkSize=parseInt(m.chunkSize),a.step||a.chunk||(m.chunkSize=null),this._handle=new Ut(m),(this._handle.streamer=this)._config=m}.call(this,r),this.parseChunk=function(a,m){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var p=this._config.beforeFirstChunk(a);void 0!==p&&(a=p)}this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+a;this._partialLine="";var b=this._handle.parse(f,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var v=b.meta.cursor;this._finished||(this._partialLine=f.substring(v-this._baseIndex),this._baseIndex=v),b&&b.data&&(this._rowCount+=b.data.length);var Y=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(It)x.postMessage({results:b,workerId:C.WORKER_ID,finished:Y});else if(w(this._config.chunk)&&!m){if(this._config.chunk(b,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);b=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(b.data),this._completeResults.errors=this._completeResults.errors.concat(b.errors),this._completeResults.meta=b.meta),this._completed||!Y||!w(this._config.complete)||b&&b.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Y||b&&b.meta.paused||this._nextChunk(),b}this._halted=!0},this._sendError=function(a){w(this._config.error)?this._config.error(a):It&&this._config.error&&x.postMessage({workerId:C.WORKER_ID,error:a,finished:!1})}}function dt(r){var a;(r=r||{}).chunkSize||(r.chunkSize=C.RemoteChunkSize),tt.call(this,r),this._nextChunk=t?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(m){this._input=m,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),t||(a.onload=at(this._chunkLoaded,this),a.onerror=at(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!t),this._config.downloadRequestHeaders){var m=this._config.downloadRequestHeaders;for(var p in m)a.setRequestHeader(p,m[p])}this._config.chunkSize&&a.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{a.send(this._config.downloadRequestBody)}catch(b){this._chunkError(b.message)}t&&0===a.status&&this._chunkError()}},this._chunkLoaded=function(){var p;4===a.readyState&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(p=a.getResponseHeader("Content-Range"))?-1:parseInt(p.substring(p.lastIndexOf("/")+1))),this.parseChunk(a.responseText)))},this._chunkError=function(m){this._sendError(new Error(a.statusText||m))}}function nt(r){var a,m;(r=r||{}).chunkSize||(r.chunkSize=C.LocalChunkSize),tt.call(this,r);var p=typeof FileReader<"u";this.stream=function(f){this._input=f,m=f.slice||f.webkitSlice||f.mozSlice,p?((a=new FileReader).onload=at(this._chunkLoaded,this),a.onerror=at(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var f=this._input;if(this._config.chunkSize){var b=Math.min(this._start+this._config.chunkSize,this._input.size);f=m.call(f,this._start,b)}var v=a.readAsText(f,this._config.encoding);p||this._chunkLoaded({target:{result:v}})},this._chunkLoaded=function(f){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(f.target.result)},this._chunkError=function(){this._sendError(a.error)}}function y(r){var a;tt.call(this,r=r||{}),this.stream=function(m){return a=m,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var m,p=this._config.chunkSize;return p?(m=a.substring(0,p),a=a.substring(p)):(m=a,a=""),this._finished=!a,this.parseChunk(m)}}}function _t(r){tt.call(this,r=r||{});var a=[],m=!0,p=!1;this.pause=function(){tt.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){tt.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(f){this._input=f,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){p&&1===a.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):m=!0},this._streamData=at(function(f){try{a.push("string"==typeof f?f:f.toString(this._config.encoding)),m&&(m=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(b){this._streamError(b)}},this),this._streamError=at(function(f){this._streamCleanUp(),this._sendError(f)},this),this._streamEnd=at(function(){this._streamCleanUp(),p=!0,this._streamData("")},this),this._streamCleanUp=at(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Ut(r){var a,m,p,f=Math.pow(2,53),b=-f,v=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Y=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,_=0,O=0,h=!1,z=!1,P=[],d={data:[],errors:[],meta:{}};if(w(r.step)){var N=r.step;r.step=function(g){if(d=g,B())E();else{if(E(),0===d.data.length)return;_+=g.data.length,r.preview&&_>r.preview?m.abort():(d.data=d.data[0],N(d,F))}}}function j(g){return"greedy"===r.skipEmptyLines?""===g.join("").trim():1===g.length&&0===g[0].length}function E(){return d&&p&&(L("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+C.DefaultDelimiter+"'"),p=!1),r.skipEmptyLines&&(d.data=d.data.filter(function(g){return!j(g)})),B()&&function(){if(d)if(Array.isArray(d.data[0])){for(var S=0;B()&&S<d.data.length;S++)d.data[S].forEach(g);d.data.splice(0,1)}else d.data.forEach(g);function g(R,J){w(r.transformHeader)&&(R=r.transformHeader(R,J)),P.push(R)}}(),function(){if(!d||!r.header&&!r.dynamicTyping&&!r.transform)return d;function g(R,J){var U,$=r.header?{}:[];for(U=0;U<R.length;U++){var M=U,D=R[U];r.header&&(M=U>=P.length?"__parsed_extra":P[U]),r.transform&&(D=r.transform(D,M)),D=Q(M,D),"__parsed_extra"===M?($[M]=$[M]||[],$[M].push(D)):$[M]=D}return r.header&&(U>P.length?L("FieldMismatch","TooManyFields","Too many fields: expected "+P.length+" fields but parsed "+U,O+J):U<P.length&&L("FieldMismatch","TooFewFields","Too few fields: expected "+P.length+" fields but parsed "+U,O+J)),$}var S=1;return!d.data.length||Array.isArray(d.data[0])?(d.data=d.data.map(g),S=d.data.length):d.data=g(d.data,0),r.header&&d.meta&&(d.meta.fields=P),O+=S,d}()}function B(){return r.header&&0===P.length}function Q(g,S){return R=g,r.dynamicTypingFunction&&void 0===r.dynamicTyping[R]&&(r.dynamicTyping[R]=r.dynamicTypingFunction(R)),!0===(r.dynamicTyping[R]||r.dynamicTyping)?"true"===S||"TRUE"===S||"false"!==S&&"FALSE"!==S&&(function(J){if(v.test(J)){var U=parseFloat(J);if(b<U&&U<f)return!0}return!1}(S)?parseFloat(S):Y.test(S)?new Date(S):""===S?null:S):S;var R}function L(g,S,R,J){var U={type:g,code:S,message:R};void 0!==J&&(U.row=J),d.errors.push(U)}this.parse=function(g,S,R){if(r.newline||(r.newline=function(M,D){M=M.substring(0,1048576);var et=new RegExp(Tt(D)+"([^]*?)"+Tt(D),"gm"),K=(M=M.replace(et,"")).split("\r"),it=M.split("\n");if(1===K.length||1<it.length&&it[0].length<K[0].length)return"\n";for(var W=0,q=0;q<K.length;q++)"\n"===K[q][0]&&W++;return W>=K.length/2?"\r\n":"\r"}(g,r.quoteChar||'"')),p=!1,r.delimiter)w(r.delimiter)&&(r.delimiter=r.delimiter(g),d.meta.delimiter=r.delimiter);else{var U=function(M,D,et,K,it){var rt,W,q,k;it=it||[",","\t","|",";",C.RECORD_SEP,C.UNIT_SEP];for(var ft=0;ft<it.length;ft++){var I=it[ft],bt=0,st=0,ht=0;q=void 0;for(var lt=new vt({comments:K,delimiter:I,newline:D,preview:10}).parse(M),ct=0;ct<lt.data.length;ct++)if(et&&j(lt.data[ct]))ht++;else{var ut=lt.data[ct].length;st+=ut,void 0!==q?0<ut&&(bt+=Math.abs(ut-q),q=ut):q=ut}0<lt.data.length&&(st/=lt.data.length-ht),(void 0===W||bt<=W)&&(void 0===k||k<st)&&1.99<st&&(W=bt,rt=I,k=st)}return{successful:!!(r.delimiter=rt),bestDelimiter:rt}}(g,r.newline,r.skipEmptyLines,r.comments,r.delimitersToGuess);U.successful?r.delimiter=U.bestDelimiter:(p=!0,r.delimiter=C.DefaultDelimiter),d.meta.delimiter=r.delimiter}var $=gt(r);return r.preview&&r.header&&$.preview++,a=g,m=new vt($),d=m.parse(a,S,R),E(),h?{meta:{paused:!0}}:d||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,m.abort(),a=w(r.chunk)?"":a.substring(m.getCharIndex())},this.resume=function(){F.streamer._halted?(h=!1,F.streamer.parseChunk(a,!0)):setTimeout(F.resume,3)},this.aborted=function(){return z},this.abort=function(){z=!0,m.abort(),d.meta.aborted=!0,w(r.complete)&&r.complete(d),a=""}}function Tt(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vt(r){var a,m=(r=r||{}).delimiter,p=r.newline,f=r.comments,b=r.step,v=r.preview,Y=r.fastMode,F=a=r.quoteChar??'"';if(void 0!==r.escapeChar&&(F=r.escapeChar),("string"!=typeof m||-1<C.BAD_DELIMITERS.indexOf(m))&&(m=","),f===m)throw new Error("Comment character same as delimiter");!0===f?f="#":("string"!=typeof f||-1<C.BAD_DELIMITERS.indexOf(f))&&(f=!1),"\n"!==p&&"\r"!==p&&"\r\n"!==p&&(p="\n");var _=0,O=!1;this.parse=function(h,z,P){if("string"!=typeof h)throw new Error("Input must be a string");var d=h.length,N=m.length,j=p.length,E=f.length,B=w(b),Q=[],L=[],g=[],S=_=0;if(!h)return H();if(r.header&&!z){var R=h.split(p)[0].split(m),J=[],U={},$=!1;for(var M in R){var D=R[M];w(r.transformHeader)&&(D=r.transformHeader(D,M));var et=D,K=U[D]||0;for(0<K&&($=!0,et=D+"_"+K),U[D]=K+1;J.includes(et);)et=et+"_"+K;J.push(et)}if($){var it=h.split(p);it[0]=J.join(m),h=it.join(p)}}if(Y||!1!==Y&&-1===h.indexOf(a)){for(var rt=h.split(p),W=0;W<rt.length;W++){if(_+=(g=rt[W]).length,W!==rt.length-1)_+=p.length;else if(P)return H();if(!f||g.substring(0,E)!==f){if(B){if(Q=[],ht(g.split(m)),yt(),O)return H()}else ht(g.split(m));if(v&&v<=W)return Q=Q.slice(0,v),H(!0)}}return H()}for(var q=h.indexOf(m,_),k=h.indexOf(p,_),ft=new RegExp(Tt(F)+Tt(a),"g"),I=h.indexOf(a,_);;)if(h[_]!==a)if(f&&0===g.length&&h.substring(_,_+E)===f){if(-1===k)return H();k=h.indexOf(p,_=k+j),q=h.indexOf(m,_)}else if(-1!==q&&(q<k||-1===k))g.push(h.substring(_,q)),q=h.indexOf(m,_=q+N);else{if(-1===k)break;if(g.push(h.substring(_,k)),ut(k+j),B&&(yt(),O))return H();if(v&&Q.length>=v)return H(!0)}else for(I=_,_++;;){if(-1===(I=h.indexOf(a,I+1)))return P||L.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Q.length,index:_}),ct();if(I===d-1)return ct(h.substring(_,I).replace(ft,a));if(a!==F||h[I+1]!==F){if(a===F||0===I||h[I-1]!==F){-1!==q&&q<I+1&&(q=h.indexOf(m,I+1)),-1!==k&&k<I+1&&(k=h.indexOf(p,I+1));var bt=lt(-1===k?q:Math.min(q,k));if(h.substr(I+1+bt,N)===m){g.push(h.substring(_,I).replace(ft,a)),h[_=I+1+bt+N]!==a&&(I=h.indexOf(a,_)),q=h.indexOf(m,_),k=h.indexOf(p,_);break}var st=lt(k);if(h.substring(I+1+st,I+1+st+j)===p){if(g.push(h.substring(_,I).replace(ft,a)),ut(I+1+st+j),q=h.indexOf(m,_),I=h.indexOf(a,_),B&&(yt(),O))return H();if(v&&Q.length>=v)return H(!0);break}L.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Q.length,index:_}),I++}}else I++}return ct();function ht(X){Q.push(X),S=_}function lt(X){var Nt=0;if(-1!==X){var St=h.substring(I+1,X);St&&""===St.trim()&&(Nt=St.length)}return Nt}function ct(X){return P||(void 0===X&&(X=h.substring(_)),g.push(X),_=d,ht(g),B&&yt()),H()}function ut(X){_=X,ht(g),g=[],k=h.indexOf(p,_)}function H(X){return{data:Q,errors:L,meta:{delimiter:m,linebreak:p,aborted:O,truncated:!!X,cursor:S+(z||0)}}}function yt(){b(H()),Q=[],L=[]}},this.abort=function(){O=!0},this.getCharIndex=function(){return _}}function Ft(r){var a=r.data,m=Zt[a.workerId],p=!1;if(a.error)m.userError(a.error,a.file);else if(a.results&&a.results.data){var f={abort:function(){p=!0,At(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ot,resume:ot};if(w(m.userStep)){for(var b=0;b<a.results.data.length&&(m.userStep({data:a.results.data[b],errors:a.results.errors,meta:a.results.meta},f),!p);b++);delete a.results}else w(m.userChunk)&&(m.userChunk(a.results,f,a.file),delete a.results)}a.finished&&!p&&At(a.workerId,a.results)}function At(r,a){var m=Zt[r];w(m.userComplete)&&m.userComplete(a),m.terminate(),delete Zt[r]}function ot(){throw new Error("Not implemented.")}function gt(r){if("object"!=typeof r||null===r)return r;var a=Array.isArray(r)?[]:{};for(var m in r)a[m]=gt(r[m]);return a}function at(r,a){return function(){r.apply(a,arguments)}}function w(r){return"function"==typeof r}return It&&(x.onmessage=function(r){var a=r.data;if(void 0===C.WORKER_ID&&a&&(C.WORKER_ID=a.workerId),"string"==typeof a.input)x.postMessage({workerId:C.WORKER_ID,results:C.parse(a.input,a.config),finished:!0});else if(x.File&&a.input instanceof File||a.input instanceof Object){var m=C.parse(a.input,a.config);m&&x.postMessage({workerId:C.WORKER_ID,results:m,finished:!0})}}),(dt.prototype=Object.create(tt.prototype)).constructor=dt,(nt.prototype=Object.create(tt.prototype)).constructor=nt,(y.prototype=Object.create(y.prototype)).constructor=y,(_t.prototype=Object.create(tt.prototype)).constructor=_t,C},void 0!==(xt=Z.apply(wt,[]))&&(Rt.exports=xt)}}]);